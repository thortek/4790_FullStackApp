import{C as Ze,_ as Yr,a as Ee,b as Us,c as Rs,d as ve,e as he,A as xn}from"./Amplify-82ffdf69.js";var Os="5.0.11",Jr="aws-amplify/"+Os,ct={userAgent:Jr+" js",product:"",navigator:null,isReactNative:!1};if(typeof navigator<"u"&&navigator.product)switch(ct.product=navigator.product||"",ct.navigator=navigator||null,navigator.product){case"ReactNative":ct.userAgent=Jr+" react-native",ct.isReactNative=!0;break;default:ct.userAgent=Jr+" js",ct.isReactNative=!1;break}var Ds=function(r){return""+ct.userAgent+(r||"")},qe=new Ze("Hub"),Fs=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default";function Ms(r){return r.onHubCapsule!==void 0}var ks=function(){function r(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}return r.prototype._remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find(function(i){var s=i.pattern;return s.source===e.source});if(!n){qe.warn("No listeners for "+e);return}this.patterns=Yr(this.patterns.filter(function(i){return i!==n}))}else{var o=this.listeners[e];if(!o){qe.warn("No listeners for "+e);return}this.listeners[e]=Yr(o.filter(function(i){var s=i.callback;return s!==t}))}},r.prototype.remove=function(e,t){this._remove(e,t)},r.prototype.dispatch=function(e,t,n,o){if(n===void 0&&(n=""),this.protectedChannels.indexOf(e)>-1){var i=o===Fs;i||qe.warn("WARNING: "+e+" is protected and dispatching on it can have unintended consequences")}var s={channel:e,payload:Ee({},t),source:n,patternInfo:[]};try{this._toListeners(s)}catch(u){qe.error(u)}},r.prototype.listen=function(e,t,n){var o=this;n===void 0&&(n="noname");var i;if(Ms(t))qe.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),i=t.onHubCapsule.bind(t);else{if(typeof t!="function")throw new Error("No callback supplied to Hub");i=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:i});else{var s=this.listeners[e];s||(s=[],this.listeners[e]=s),s.push({name:n,callback:i})}return function(){o._remove(e,i)}},r.prototype._toListeners=function(e){var t=e.channel,n=e.payload,o=this.listeners[t];if(o&&o.forEach(function(s){qe.debug("Dispatching to "+t+" with ",n);try{s.callback(e)}catch(u){qe.error(u)}}),this.patterns.length>0){if(!n.message){qe.warn("Cannot perform pattern matching without a message key");return}var i=n.message;this.patterns.forEach(function(s){var u=i.match(s.pattern);if(u){var f=Us(u),a=f.slice(1),c=Ee(Ee({},e),{patternInfo:a});try{s.callback(c)}catch(h){qe.error(h)}}})}},r}(),Ge=new ks("__default__"),Ns=function(r){if(r.isResolved)return r;var e=!0,t=!1,n=!1,o=r.then(function(i){return n=!0,e=!1,i},function(i){throw t=!0,e=!1,i});return o.isFullfilled=function(){return n},o.isPending=function(){return e},o.isRejected=function(){return t},o},Je=function(){var r=typeof window<"u"&&typeof window.document<"u",e=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;return{isBrowser:r,isNode:e}},Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Un(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var i=Function.bind.apply(e,o);return new i}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var o=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return r[n]}})}),t}var it={},nr={},js={get exports(){return nr},set exports(r){nr=r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(r){var e,t,n,o,i,s,u,f,a,c,h,y,_,b,E,C,O,T,M,q,z,V,Y;(function(R){var W=typeof Ue=="object"?Ue:typeof self=="object"?self:typeof this=="object"?this:{};R(g(W,g(r.exports)));function g(v,p){return v!==W&&(typeof Object.create=="function"?Object.defineProperty(v,"__esModule",{value:!0}):v.__esModule=!0),function(A,I){return v[A]=p?p(A,I):I}}})(function(R){var W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var p in v)v.hasOwnProperty(p)&&(g[p]=v[p])};e=function(g,v){W(g,v);function p(){this.constructor=g}g.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)},t=Object.assign||function(g){for(var v,p=1,A=arguments.length;p<A;p++){v=arguments[p];for(var I in v)Object.prototype.hasOwnProperty.call(v,I)&&(g[I]=v[I])}return g},n=function(g,v){var p={};for(var A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.indexOf(A)<0&&(p[A]=g[A]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,A=Object.getOwnPropertySymbols(g);I<A.length;I++)v.indexOf(A[I])<0&&Object.prototype.propertyIsEnumerable.call(g,A[I])&&(p[A[I]]=g[A[I]]);return p},o=function(g,v,p,A){var I=arguments.length,m=I<3?v:A===null?A=Object.getOwnPropertyDescriptor(v,p):A,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(g,v,p,A);else for(var K=g.length-1;K>=0;K--)(x=g[K])&&(m=(I<3?x(m):I>3?x(v,p,m):x(v,p))||m);return I>3&&m&&Object.defineProperty(v,p,m),m},i=function(g,v){return function(p,A){v(p,A,g)}},s=function(g,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(g,v)},u=function(g,v,p,A){function I(m){return m instanceof p?m:new p(function(x){x(m)})}return new(p||(p=Promise))(function(m,x){function K(k){try{U(A.next(k))}catch(H){x(H)}}function J(k){try{U(A.throw(k))}catch(H){x(H)}}function U(k){k.done?m(k.value):I(k.value).then(K,J)}U((A=A.apply(g,v||[])).next())})},f=function(g,v){var p={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},A,I,m,x;return x={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function K(U){return function(k){return J([U,k])}}function J(U){if(A)throw new TypeError("Generator is already executing.");for(;p;)try{if(A=1,I&&(m=U[0]&2?I.return:U[0]?I.throw||((m=I.return)&&m.call(I),0):I.next)&&!(m=m.call(I,U[1])).done)return m;switch(I=0,m&&(U=[U[0]&2,m.value]),U[0]){case 0:case 1:m=U;break;case 4:return p.label++,{value:U[1],done:!1};case 5:p.label++,I=U[1],U=[0];continue;case 7:U=p.ops.pop(),p.trys.pop();continue;default:if(m=p.trys,!(m=m.length>0&&m[m.length-1])&&(U[0]===6||U[0]===2)){p=0;continue}if(U[0]===3&&(!m||U[1]>m[0]&&U[1]<m[3])){p.label=U[1];break}if(U[0]===6&&p.label<m[1]){p.label=m[1],m=U;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(U);break}m[2]&&p.ops.pop(),p.trys.pop();continue}U=v.call(g,p)}catch(k){U=[6,k],I=0}finally{A=m=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},Y=function(g,v,p,A){A===void 0&&(A=p),g[A]=v[p]},a=function(g,v){for(var p in g)p!=="default"&&!v.hasOwnProperty(p)&&(v[p]=g[p])},c=function(g){var v=typeof Symbol=="function"&&Symbol.iterator,p=v&&g[v],A=0;if(p)return p.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&A>=g.length&&(g=void 0),{value:g&&g[A++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(g,v){var p=typeof Symbol=="function"&&g[Symbol.iterator];if(!p)return g;var A=p.call(g),I,m=[],x;try{for(;(v===void 0||v-- >0)&&!(I=A.next()).done;)m.push(I.value)}catch(K){x={error:K}}finally{try{I&&!I.done&&(p=A.return)&&p.call(A)}finally{if(x)throw x.error}}return m},y=function(){for(var g=[],v=0;v<arguments.length;v++)g=g.concat(h(arguments[v]));return g},_=function(){for(var g=0,v=0,p=arguments.length;v<p;v++)g+=arguments[v].length;for(var A=Array(g),I=0,v=0;v<p;v++)for(var m=arguments[v],x=0,K=m.length;x<K;x++,I++)A[I]=m[x];return A},b=function(g){return this instanceof b?(this.v=g,this):new b(g)},E=function(g,v,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A=p.apply(g,v||[]),I,m=[];return I={},x("next"),x("throw"),x("return"),I[Symbol.asyncIterator]=function(){return this},I;function x(F){A[F]&&(I[F]=function($){return new Promise(function(Z,ae){m.push([F,$,Z,ae])>1||K(F,$)})})}function K(F,$){try{J(A[F]($))}catch(Z){H(m[0][3],Z)}}function J(F){F.value instanceof b?Promise.resolve(F.value.v).then(U,k):H(m[0][2],F)}function U(F){K("next",F)}function k(F){K("throw",F)}function H(F,$){F($),m.shift(),m.length&&K(m[0][0],m[0][1])}},C=function(g){var v,p;return v={},A("next"),A("throw",function(I){throw I}),A("return"),v[Symbol.iterator]=function(){return this},v;function A(I,m){v[I]=g[I]?function(x){return(p=!p)?{value:b(g[I](x)),done:I==="return"}:m?m(x):x}:m}},O=function(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=g[Symbol.asyncIterator],p;return v?v.call(g):(g=typeof c=="function"?c(g):g[Symbol.iterator](),p={},A("next"),A("throw"),A("return"),p[Symbol.asyncIterator]=function(){return this},p);function A(m){p[m]=g[m]&&function(x){return new Promise(function(K,J){x=g[m](x),I(K,J,x.done,x.value)})}}function I(m,x,K,J){Promise.resolve(J).then(function(U){m({value:U,done:K})},x)}},T=function(g,v){return Object.defineProperty?Object.defineProperty(g,"raw",{value:v}):g.raw=v,g},M=function(g){if(g&&g.__esModule)return g;var v={};if(g!=null)for(var p in g)Object.hasOwnProperty.call(g,p)&&(v[p]=g[p]);return v.default=g,v},q=function(g){return g&&g.__esModule?g:{default:g}},z=function(g,v){if(!v.has(g))throw new TypeError("attempted to get private field on non-instance");return v.get(g)},V=function(g,v,p){if(!v.has(g))throw new TypeError("attempted to set private field on non-instance");return v.set(g,p),p},R("__extends",e),R("__assign",t),R("__rest",n),R("__decorate",o),R("__param",i),R("__metadata",s),R("__awaiter",u),R("__generator",f),R("__exportStar",a),R("__createBinding",Y),R("__values",c),R("__read",h),R("__spread",y),R("__spreadArrays",_),R("__await",b),R("__asyncGenerator",E),R("__asyncDelegator",C),R("__asyncValues",O),R("__makeTemplateObject",T),R("__importStar",M),R("__importDefault",q),R("__classPrivateFieldGet",z),R("__classPrivateFieldSet",V)})})(js);var gr={},xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.MAX_HASHABLE_LENGTH=xe.INIT=xe.KEY=xe.DIGEST_LENGTH=xe.BLOCK_SIZE=void 0;xe.BLOCK_SIZE=64;xe.DIGEST_LENGTH=32;xe.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);xe.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];xe.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.RawSha256=void 0;var Oe=xe,Bs=function(){function r(){this.state=Int32Array.from(Oe.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>Oe.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===Oe.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},r.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%Oe.BLOCK_SIZE>=Oe.BLOCK_SIZE-8){for(var o=this.bufferLength;o<Oe.BLOCK_SIZE;o++)t.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<Oe.BLOCK_SIZE-8;o++)t.setUint8(o,0);t.setUint32(Oe.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(Oe.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(Oe.DIGEST_LENGTH),o=0;o<8;o++)i[o*4]=this.state[o]>>>24&255,i[o*4+1]=this.state[o]>>>16&255,i[o*4+2]=this.state[o]>>>8&255,i[o*4+3]=this.state[o]>>>0&255;return i},r.prototype.hashBuffer=function(){for(var e=this,t=e.buffer,n=e.state,o=n[0],i=n[1],s=n[2],u=n[3],f=n[4],a=n[5],c=n[6],h=n[7],y=0;y<Oe.BLOCK_SIZE;y++){if(y<16)this.temp[y]=(t[y*4]&255)<<24|(t[y*4+1]&255)<<16|(t[y*4+2]&255)<<8|t[y*4+3]&255;else{var _=this.temp[y-2],b=(_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10;_=this.temp[y-15];var E=(_>>>7|_<<25)^(_>>>18|_<<14)^_>>>3;this.temp[y]=(b+this.temp[y-7]|0)+(E+this.temp[y-16]|0)}var C=(((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&a^~f&c)|0)+(h+(Oe.KEY[y]+this.temp[y]|0)|0)|0,O=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&i^o&s^i&s)|0;h=c,c=a,a=f,f=u+C|0,u=s,s=i,i=o,o=C+O|0}n[0]+=o,n[1]+=i,n[2]+=s,n[3]+=u,n[4]+=f,n[5]+=a,n[6]+=c,n[7]+=h},r}();vr.RawSha256=Bs;var Rn={},pr={},Ls=function(r){for(var e=[],t=0,n=r.length;t<n;t++){var o=r.charCodeAt(t);if(o<128)e.push(o);else if(o<2048)e.push(o>>6|192,o&63|128);else if(t+1<r.length&&(o&64512)===55296&&(r.charCodeAt(t+1)&64512)===56320){var i=65536+((o&1023)<<10)+(r.charCodeAt(++t)&1023);e.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else e.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(e)},Ks=function(r){for(var e="",t=0,n=r.length;t<n;t++){var o=r[t];if(o<128)e+=String.fromCharCode(o);else if(192<=o&&o<224){var i=r[++t];e+=String.fromCharCode((o&31)<<6|i&63)}else if(240<=o&&o<365){var s=[o,r[++t],r[++t],r[++t]],u="%"+s.map(function(f){return f.toString(16)}).join("%");e+=decodeURIComponent(u)}else e+=String.fromCharCode((o&15)<<12|(r[++t]&63)<<6|r[++t]&63)}return e};function qs(r){return new TextEncoder().encode(r)}function Hs(r){return new TextDecoder("utf-8").decode(r)}var Ro=function(r){return typeof TextEncoder=="function"?qs(r):Ls(r)},Oo=function(r){return typeof TextDecoder=="function"?Hs(r):Ks(r)};const zs=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:Ro,toUtf8:Oo},Symbol.toStringTag,{value:"Module"})),Do=Un(zs);Object.defineProperty(pr,"__esModule",{value:!0});pr.convertToBuffer=void 0;var Vs=Do,Gs=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:Vs.fromUtf8;function $s(r){return r instanceof Uint8Array?r:typeof r=="string"?Gs(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}pr.convertToBuffer=$s;var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.isEmptyData=void 0;function Ws(r){return typeof r=="string"?r.length===0:r.byteLength===0}yr.isEmptyData=Ws;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.numToUint8=void 0;function Ys(r){return new Uint8Array([(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])}mr.numToUint8=Ys;var wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.uint32ArrayFrom=void 0;function Js(r){if(!Array.from){for(var e=new Uint32Array(r.length),t=0;t<r.length;)e[t]=r[t];return e}return Uint32Array.from(r)}wr.uint32ArrayFrom=Js;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.uint32ArrayFrom=r.numToUint8=r.isEmptyData=r.convertToBuffer=void 0;var e=pr;Object.defineProperty(r,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var t=yr;Object.defineProperty(r,"isEmptyData",{enumerable:!0,get:function(){return t.isEmptyData}});var n=mr;Object.defineProperty(r,"numToUint8",{enumerable:!0,get:function(){return n.numToUint8}});var o=wr;Object.defineProperty(r,"uint32ArrayFrom",{enumerable:!0,get:function(){return o.uint32ArrayFrom}})})(Rn);Object.defineProperty(gr,"__esModule",{value:!0});gr.Sha256=void 0;var zn=nr,ir=xe,Zr=vr,Xr=Rn,Zs=function(){function r(e){if(this.hash=new Zr.RawSha256,e){this.outer=new Zr.RawSha256;var t=Xs(e),n=new Uint8Array(ir.BLOCK_SIZE);n.set(t);for(var o=0;o<ir.BLOCK_SIZE;o++)t[o]^=54,n[o]^=92;this.hash.update(t),this.outer.update(n);for(var o=0;o<t.byteLength;o++)t[o]=0}}return r.prototype.update=function(e){if(!((0,Xr.isEmptyData)(e)||this.error))try{this.hash.update((0,Xr.convertToBuffer)(e))}catch(t){this.error=t}},r.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},r.prototype.digest=function(){return(0,zn.__awaiter)(this,void 0,void 0,function(){return(0,zn.__generator)(this,function(e){return[2,this.digestSync()]})})},r}();gr.Sha256=Zs;function Xs(r){var e=(0,Xr.convertToBuffer)(r);if(e.byteLength>ir.BLOCK_SIZE){var t=new Zr.RawSha256;t.update(e),e=t.digest()}var n=new Uint8Array(ir.BLOCK_SIZE);return n.set(e),n}(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=nr;(0,e.__exportStar)(gr,r)})(it);var Fo={};for(var Vt=0;Vt<256;Vt++){var Gt=Vt.toString(16).toLowerCase();Gt.length===1&&(Gt="0"+Gt),Fo[Vt]=Gt}function At(r){for(var e="",t=0;t<r.byteLength;t++)e+=Fo[r[t]];return e}var or={},Qs={get exports(){return or},set exports(r){or=r}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(r,e){(function(t){var n=e&&!e.nodeType&&e,o=r&&!r.nodeType&&r,i=typeof Ue=="object"&&Ue;(i.global===i||i.window===i||i.self===i)&&(t=i);var s,u=2147483647,f=36,a=1,c=26,h=38,y=700,_=72,b=128,E="-",C=/^xn--/,O=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},q=f-a,z=Math.floor,V=String.fromCharCode,Y;function R(k){throw RangeError(M[k])}function W(k,H){for(var F=k.length,$=[];F--;)$[F]=H(k[F]);return $}function g(k,H){var F=k.split("@"),$="";F.length>1&&($=F[0]+"@",k=F[1]),k=k.replace(T,".");var Z=k.split("."),ae=W(Z,H).join(".");return $+ae}function v(k){for(var H=[],F=0,$=k.length,Z,ae;F<$;)Z=k.charCodeAt(F++),Z>=55296&&Z<=56319&&F<$?(ae=k.charCodeAt(F++),(ae&64512)==56320?H.push(((Z&1023)<<10)+(ae&1023)+65536):(H.push(Z),F--)):H.push(Z);return H}function p(k){return W(k,function(H){var F="";return H>65535&&(H-=65536,F+=V(H>>>10&1023|55296),H=56320|H&1023),F+=V(H),F}).join("")}function A(k){return k-48<10?k-22:k-65<26?k-65:k-97<26?k-97:f}function I(k,H){return k+22+75*(k<26)-((H!=0)<<5)}function m(k,H,F){var $=0;for(k=F?z(k/y):k>>1,k+=z(k/H);k>q*c>>1;$+=f)k=z(k/q);return z($+(q+1)*k/(k+h))}function x(k){var H=[],F=k.length,$,Z=0,ae=b,de=_,_e,Te,Re,ke,ge,pe,Pe,je,Be;for(_e=k.lastIndexOf(E),_e<0&&(_e=0),Te=0;Te<_e;++Te)k.charCodeAt(Te)>=128&&R("not-basic"),H.push(k.charCodeAt(Te));for(Re=_e>0?_e+1:0;Re<F;){for(ke=Z,ge=1,pe=f;Re>=F&&R("invalid-input"),Pe=A(k.charCodeAt(Re++)),(Pe>=f||Pe>z((u-Z)/ge))&&R("overflow"),Z+=Pe*ge,je=pe<=de?a:pe>=de+c?c:pe-de,!(Pe<je);pe+=f)Be=f-je,ge>z(u/Be)&&R("overflow"),ge*=Be;$=H.length+1,de=m(Z-ke,$,ke==0),z(Z/$)>u-ae&&R("overflow"),ae+=z(Z/$),Z%=$,H.splice(Z++,0,ae)}return p(H)}function K(k){var H,F,$,Z,ae,de,_e,Te,Re,ke,ge,pe=[],Pe,je,Be,Xe;for(k=v(k),Pe=k.length,H=b,F=0,ae=_,de=0;de<Pe;++de)ge=k[de],ge<128&&pe.push(V(ge));for($=Z=pe.length,Z&&pe.push(E);$<Pe;){for(_e=u,de=0;de<Pe;++de)ge=k[de],ge>=H&&ge<_e&&(_e=ge);for(je=$+1,_e-H>z((u-F)/je)&&R("overflow"),F+=(_e-H)*je,H=_e,de=0;de<Pe;++de)if(ge=k[de],ge<H&&++F>u&&R("overflow"),ge==H){for(Te=F,Re=f;ke=Re<=ae?a:Re>=ae+c?c:Re-ae,!(Te<ke);Re+=f)Xe=Te-ke,Be=f-ke,pe.push(V(I(ke+Xe%Be,0))),Te=z(Xe/Be);pe.push(V(I(Te,0))),ae=m(F,je,$==Z),F=0,++$}++F,++H}return pe.join("")}function J(k){return g(k,function(H){return C.test(H)?x(H.slice(4).toLowerCase()):H})}function U(k){return g(k,function(H){return O.test(H)?"xn--"+K(H):H})}if(s={version:"1.3.2",ucs2:{decode:v,encode:p},decode:x,encode:K,toASCII:U,toUnicode:J},n&&o)if(r.exports==n)o.exports=s;else for(Y in s)s.hasOwnProperty(Y)&&(n[Y]=s[Y]);else t.punycode=s})(Ue)})(Qs,or);var ea={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},jt={};function ta(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var ra=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if(typeof r!="string"||r.length===0)return o;var i=/\+/g;r=r.split(e);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var u=r.length;s>0&&u>s&&(u=s);for(var f=0;f<u;++f){var a=r[f].replace(i,"%20"),c=a.indexOf(t),h,y,_,b;c>=0?(h=a.substr(0,c),y=a.substr(c+1)):(h=a,y=""),_=decodeURIComponent(h),b=decodeURIComponent(y),ta(o,_)?Array.isArray(o[_])?o[_].push(b):o[_]=[o[_],b]:o[_]=b}return o},Dt=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},na=function(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(o){var i=encodeURIComponent(Dt(o))+t;return Array.isArray(r[o])?r[o].map(function(s){return i+encodeURIComponent(Dt(s))}).join(e):i+encodeURIComponent(Dt(r[o]))}).join(e):n?encodeURIComponent(Dt(n))+t+encodeURIComponent(Dt(r)):""};jt.decode=jt.parse=ra;jt.encode=jt.stringify=na;var ia=or,$e=ea,tt=Mo;function We(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var oa=/^([a-z0-9.+-]+:)/i,sa=/:[0-9]*$/,aa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ua=["<",">",'"',"`"," ","\r",`
`,"	"],ca=["{","}","|","\\","^","`"].concat(ua),Qr=["'"].concat(ca),Vn=["%","/","?",";","#"].concat(Qr),Gn=["/","?","#"],fa=255,$n=/^[+a-z0-9A-Z_-]{0,63}$/,la=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,da={javascript:!0,"javascript:":!0},en={javascript:!0,"javascript:":!0},Et={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},tn=jt;function Mo(r,e,t){if(r&&$e.isObject(r)&&r instanceof We)return r;var n=new We;return n.parse(r,e,t),n}We.prototype.parse=function(r,e,t){if(!$e.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),o=n!==-1&&n<r.indexOf("#")?"?":"#",i=r.split(o),s=/\\/g;i[0]=i[0].replace(s,"/"),r=i.join(o);var u=r;if(u=u.trim(),!t&&r.split("#").length===1){var f=aa.exec(u);if(f)return this.path=u,this.href=u,this.pathname=f[1],f[2]?(this.search=f[2],e?this.query=tn.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var a=oa.exec(u);if(a){a=a[0];var c=a.toLowerCase();this.protocol=c,u=u.substr(a.length)}if(t||a||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=u.substr(0,2)==="//";h&&!(a&&en[a])&&(u=u.substr(2),this.slashes=!0)}if(!en[a]&&(h||a&&!Et[a])){for(var y=-1,_=0;_<Gn.length;_++){var b=u.indexOf(Gn[_]);b!==-1&&(y===-1||b<y)&&(y=b)}var E,C;y===-1?C=u.lastIndexOf("@"):C=u.lastIndexOf("@",y),C!==-1&&(E=u.slice(0,C),u=u.slice(C+1),this.auth=decodeURIComponent(E)),y=-1;for(var _=0;_<Vn.length;_++){var b=u.indexOf(Vn[_]);b!==-1&&(y===-1||b<y)&&(y=b)}y===-1&&(y=u.length),this.host=u.slice(0,y),u=u.slice(y),this.parseHost(),this.hostname=this.hostname||"";var O=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!O)for(var T=this.hostname.split(/\./),_=0,M=T.length;_<M;_++){var q=T[_];if(q&&!q.match($n)){for(var z="",V=0,Y=q.length;V<Y;V++)q.charCodeAt(V)>127?z+="x":z+=q[V];if(!z.match($n)){var R=T.slice(0,_),W=T.slice(_+1),g=q.match(la);g&&(R.push(g[1]),W.unshift(g[2])),W.length&&(u="/"+W.join(".")+u),this.hostname=R.join(".");break}}}this.hostname.length>fa?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=ia.toASCII(this.hostname));var v=this.port?":"+this.port:"",p=this.hostname||"";this.host=p+v,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!da[c])for(var _=0,M=Qr.length;_<M;_++){var A=Qr[_];if(u.indexOf(A)!==-1){var I=encodeURIComponent(A);I===A&&(I=escape(A)),u=u.split(A).join(I)}}var m=u.indexOf("#");m!==-1&&(this.hash=u.substr(m),u=u.slice(0,m));var x=u.indexOf("?");if(x!==-1?(this.search=u.substr(x),this.query=u.substr(x+1),e&&(this.query=tn.parse(this.query)),u=u.slice(0,x)):e&&(this.search="",this.query={}),u&&(this.pathname=u),Et[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var v=this.pathname||"",K=this.search||"";this.path=v+K}return this.href=this.format(),this};We.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=r+this.host:this.hostname&&(o=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&$e.isObject(this.query)&&Object.keys(this.query).length&&(i=tn.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Et[e])&&o!==!1?(o="//"+(o||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):o||(o=""),n&&n.charAt(0)!=="#"&&(n="#"+n),s&&s.charAt(0)!=="?"&&(s="?"+s),t=t.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),s=s.replace("#","%23"),e+o+t+s+n};We.prototype.resolve=function(r){return this.resolveObject(Mo(r,!1,!0)).format()};We.prototype.resolveObject=function(r){if($e.isString(r)){var e=new We;e.parse(r,!1,!0),r=e}for(var t=new We,n=Object.keys(this),o=0;o<n.length;o++){var i=n[o];t[i]=this[i]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),u=0;u<s.length;u++){var f=s[u];f!=="protocol"&&(t[f]=r[f])}return Et[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Et[r.protocol]){for(var a=Object.keys(r),c=0;c<a.length;c++){var h=a[c];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!en[r.protocol]){for(var M=(r.pathname||"").split("/");M.length&&!(r.host=M.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),M[0]!==""&&M.unshift(""),M.length<2&&M.unshift(""),t.pathname=M.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var y=t.pathname||"",_=t.search||"";t.path=y+_}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var b=t.pathname&&t.pathname.charAt(0)==="/",E=r.host||r.pathname&&r.pathname.charAt(0)==="/",C=E||b||t.host&&r.pathname,O=C,T=t.pathname&&t.pathname.split("/")||[],M=r.pathname&&r.pathname.split("/")||[],q=t.protocol&&!Et[t.protocol];if(q&&(t.hostname="",t.port=null,t.host&&(T[0]===""?T[0]=t.host:T.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(M[0]===""?M[0]=r.host:M.unshift(r.host)),r.host=null),C=C&&(M[0]===""||T[0]==="")),E)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,T=M;else if(M.length)T||(T=[]),T.pop(),T=T.concat(M),t.search=r.search,t.query=r.query;else if(!$e.isNullOrUndefined(r.search)){if(q){t.hostname=t.host=T.shift();var z=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;z&&(t.auth=z.shift(),t.host=t.hostname=z.shift())}return t.search=r.search,t.query=r.query,(!$e.isNull(t.pathname)||!$e.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!T.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var V=T.slice(-1)[0],Y=(t.host||r.host||T.length>1)&&(V==="."||V==="..")||V==="",R=0,W=T.length;W>=0;W--)V=T[W],V==="."?T.splice(W,1):V===".."?(T.splice(W,1),R++):R&&(T.splice(W,1),R--);if(!C&&!O)for(;R--;R)T.unshift("..");C&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),Y&&T.join("/").substr(-1)!=="/"&&T.push("");var g=T[0]===""||T[0]&&T[0].charAt(0)==="/";if(q){t.hostname=t.host=g?"":T.length?T.shift():"";var z=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;z&&(t.auth=z.shift(),t.host=t.hostname=z.shift())}return C=C||t.host&&T.length,C&&!g&&T.unshift(""),T.length?t.pathname=T.join("/"):(t.pathname=null,t.path=null),(!$e.isNull(t.pathname)||!$e.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};We.prototype.parseHost=function(){var r=this.host,e=sa.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};var $t=new Ze("Util"),ht=function(r){Rs(e,r);function e(t){var n=r.call(this,t)||this;return n.nonRetryable=!0,n}return e}(Error),ha=function(r){var e="nonRetryable";return r&&r[e]};function ga(r,e,t,n){return ve(this,void 0,void 0,function(){var o=this;return he(this,function(i){if(typeof r!="function")throw Error("functionToRetry must be a function");return[2,new Promise(function(s,u){return ve(o,void 0,void 0,function(){var f,a,c,h,y,_,b;return he(this,function(E){switch(E.label){case 0:f=0,a=!1,h=function(){},n&&n.then(function(){a=!0,clearTimeout(c),h()}),_=function(){var C,O,T,M;return he(this,function(q){switch(q.label){case 0:f++,$t.debug(r.name+" attempt #"+f+" with this vars: "+JSON.stringify(e)),q.label=1;case 1:return q.trys.push([1,3,,7]),C={},O=s,[4,r.apply(void 0,Yr(e))];case 2:return[2,(C.value=O.apply(void 0,[q.sent()]),C)];case 3:return T=q.sent(),y=T,$t.debug("error on "+r.name,T),ha(T)?($t.debug(r.name+" non retryable error",T),[2,{value:u(T)}]):(M=t(f,e,T),$t.debug(r.name+" retrying in "+M+" ms"),M===!1||a?[2,{value:u(T)}]:[3,4]);case 4:return[4,new Promise(function(z){h=z,c=setTimeout(h,M)})];case 5:q.sent(),q.label=6;case 6:return[3,7];case 7:return[2]}})},E.label=1;case 1:return a?[3,3]:[5,_()];case 2:return b=E.sent(),typeof b=="object"?[2,b.value]:[3,1];case 3:return u(y),[2]}})})})]})})}var ko=5*60*1e3;function va(r){r===void 0&&(r=ko);var e=100,t=100;return function(n){var o=Math.pow(2,n)*e+t*Math.random();return o>r?!1:o}}var pa=function(r,e,t,n){return t===void 0&&(t=ko),ga(r,e,va(t),n)};function ya(r){return r.split("").map(function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")}).join("")}function ma(r){return r.match(/.{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join("")}var wa=new Ze("Parser"),No=function(r){var e={};if(r.aws_mobile_analytics_app_id){var t={AWSPinpoint:{appId:r.aws_mobile_analytics_app_id,region:r.aws_mobile_analytics_app_region}};e.Analytics=t}(r.aws_cognito_identity_pool_id||r.aws_user_pools_id)&&(e.Auth={userPoolId:r.aws_user_pools_id,userPoolWebClientId:r.aws_user_pools_web_client_id,region:r.aws_cognito_region,identityPoolId:r.aws_cognito_identity_pool_id,identityPoolRegion:r.aws_cognito_region,mandatorySignIn:r.aws_mandatory_sign_in==="enable",signUpVerificationMethod:r.aws_cognito_sign_up_verification_method||"code"});var n;return r.aws_user_files_s3_bucket?n={AWSS3:{bucket:r.aws_user_files_s3_bucket,region:r.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:r.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:n=r?r.Storage||r:{},r.Logging&&(e.Logging=Ee(Ee({},r.Logging),{region:r.aws_project_region})),r.geo&&(e.Geo=Object.assign({},r.geo),r.geo.amazon_location_service&&(e.Geo={AmazonLocationService:r.geo.amazon_location_service})),e.Analytics=Object.assign({},e.Analytics,r.Analytics),e.Auth=Object.assign({},e.Auth,r.Auth),e.Storage=Object.assign({},n),e.Logging=Object.assign({},e.Logging,r.Logging),wa.debug("parse config",r,"to amplifyconfig",e),e},rn=function(r,e){return rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},rn(r,e)};function On(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");rn(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var D=function(){return D=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},D.apply(this,arguments)};function Se(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function Ae(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(t=0)),t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function _a(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}var jo={},nn={},ba={get exports(){return nn},set exports(r){nn=r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(r){var e,t,n,o,i,s,u,f,a,c,h,y,_,b,E,C,O,T,M,q,z,V,Y;(function(R){var W=typeof Ue=="object"?Ue:typeof self=="object"?self:typeof this=="object"?this:{};R(g(W,g(r.exports)));function g(v,p){return v!==W&&(typeof Object.create=="function"?Object.defineProperty(v,"__esModule",{value:!0}):v.__esModule=!0),function(A,I){return v[A]=p?p(A,I):I}}})(function(R){var W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var p in v)v.hasOwnProperty(p)&&(g[p]=v[p])};e=function(g,v){W(g,v);function p(){this.constructor=g}g.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)},t=Object.assign||function(g){for(var v,p=1,A=arguments.length;p<A;p++){v=arguments[p];for(var I in v)Object.prototype.hasOwnProperty.call(v,I)&&(g[I]=v[I])}return g},n=function(g,v){var p={};for(var A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.indexOf(A)<0&&(p[A]=g[A]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,A=Object.getOwnPropertySymbols(g);I<A.length;I++)v.indexOf(A[I])<0&&Object.prototype.propertyIsEnumerable.call(g,A[I])&&(p[A[I]]=g[A[I]]);return p},o=function(g,v,p,A){var I=arguments.length,m=I<3?v:A===null?A=Object.getOwnPropertyDescriptor(v,p):A,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(g,v,p,A);else for(var K=g.length-1;K>=0;K--)(x=g[K])&&(m=(I<3?x(m):I>3?x(v,p,m):x(v,p))||m);return I>3&&m&&Object.defineProperty(v,p,m),m},i=function(g,v){return function(p,A){v(p,A,g)}},s=function(g,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(g,v)},u=function(g,v,p,A){function I(m){return m instanceof p?m:new p(function(x){x(m)})}return new(p||(p=Promise))(function(m,x){function K(k){try{U(A.next(k))}catch(H){x(H)}}function J(k){try{U(A.throw(k))}catch(H){x(H)}}function U(k){k.done?m(k.value):I(k.value).then(K,J)}U((A=A.apply(g,v||[])).next())})},f=function(g,v){var p={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},A,I,m,x;return x={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function K(U){return function(k){return J([U,k])}}function J(U){if(A)throw new TypeError("Generator is already executing.");for(;p;)try{if(A=1,I&&(m=U[0]&2?I.return:U[0]?I.throw||((m=I.return)&&m.call(I),0):I.next)&&!(m=m.call(I,U[1])).done)return m;switch(I=0,m&&(U=[U[0]&2,m.value]),U[0]){case 0:case 1:m=U;break;case 4:return p.label++,{value:U[1],done:!1};case 5:p.label++,I=U[1],U=[0];continue;case 7:U=p.ops.pop(),p.trys.pop();continue;default:if(m=p.trys,!(m=m.length>0&&m[m.length-1])&&(U[0]===6||U[0]===2)){p=0;continue}if(U[0]===3&&(!m||U[1]>m[0]&&U[1]<m[3])){p.label=U[1];break}if(U[0]===6&&p.label<m[1]){p.label=m[1],m=U;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(U);break}m[2]&&p.ops.pop(),p.trys.pop();continue}U=v.call(g,p)}catch(k){U=[6,k],I=0}finally{A=m=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},Y=function(g,v,p,A){A===void 0&&(A=p),g[A]=v[p]},a=function(g,v){for(var p in g)p!=="default"&&!v.hasOwnProperty(p)&&(v[p]=g[p])},c=function(g){var v=typeof Symbol=="function"&&Symbol.iterator,p=v&&g[v],A=0;if(p)return p.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&A>=g.length&&(g=void 0),{value:g&&g[A++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(g,v){var p=typeof Symbol=="function"&&g[Symbol.iterator];if(!p)return g;var A=p.call(g),I,m=[],x;try{for(;(v===void 0||v-- >0)&&!(I=A.next()).done;)m.push(I.value)}catch(K){x={error:K}}finally{try{I&&!I.done&&(p=A.return)&&p.call(A)}finally{if(x)throw x.error}}return m},y=function(){for(var g=[],v=0;v<arguments.length;v++)g=g.concat(h(arguments[v]));return g},_=function(){for(var g=0,v=0,p=arguments.length;v<p;v++)g+=arguments[v].length;for(var A=Array(g),I=0,v=0;v<p;v++)for(var m=arguments[v],x=0,K=m.length;x<K;x++,I++)A[I]=m[x];return A},b=function(g){return this instanceof b?(this.v=g,this):new b(g)},E=function(g,v,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A=p.apply(g,v||[]),I,m=[];return I={},x("next"),x("throw"),x("return"),I[Symbol.asyncIterator]=function(){return this},I;function x(F){A[F]&&(I[F]=function($){return new Promise(function(Z,ae){m.push([F,$,Z,ae])>1||K(F,$)})})}function K(F,$){try{J(A[F]($))}catch(Z){H(m[0][3],Z)}}function J(F){F.value instanceof b?Promise.resolve(F.value.v).then(U,k):H(m[0][2],F)}function U(F){K("next",F)}function k(F){K("throw",F)}function H(F,$){F($),m.shift(),m.length&&K(m[0][0],m[0][1])}},C=function(g){var v,p;return v={},A("next"),A("throw",function(I){throw I}),A("return"),v[Symbol.iterator]=function(){return this},v;function A(I,m){v[I]=g[I]?function(x){return(p=!p)?{value:b(g[I](x)),done:I==="return"}:m?m(x):x}:m}},O=function(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=g[Symbol.asyncIterator],p;return v?v.call(g):(g=typeof c=="function"?c(g):g[Symbol.iterator](),p={},A("next"),A("throw"),A("return"),p[Symbol.asyncIterator]=function(){return this},p);function A(m){p[m]=g[m]&&function(x){return new Promise(function(K,J){x=g[m](x),I(K,J,x.done,x.value)})}}function I(m,x,K,J){Promise.resolve(J).then(function(U){m({value:U,done:K})},x)}},T=function(g,v){return Object.defineProperty?Object.defineProperty(g,"raw",{value:v}):g.raw=v,g},M=function(g){if(g&&g.__esModule)return g;var v={};if(g!=null)for(var p in g)Object.hasOwnProperty.call(g,p)&&(v[p]=g[p]);return v.default=g,v},q=function(g){return g&&g.__esModule?g:{default:g}},z=function(g,v){if(!v.has(g))throw new TypeError("attempted to get private field on non-instance");return v.get(g)},V=function(g,v,p){if(!v.has(g))throw new TypeError("attempted to set private field on non-instance");return v.set(g,p),p},R("__extends",e),R("__assign",t),R("__rest",n),R("__decorate",o),R("__param",i),R("__metadata",s),R("__awaiter",u),R("__generator",f),R("__exportStar",a),R("__createBinding",Y),R("__values",c),R("__read",h),R("__spread",y),R("__spreadArrays",_),R("__await",b),R("__asyncGenerator",E),R("__asyncDelegator",C),R("__asyncValues",O),R("__makeTemplateObject",T),R("__importStar",M),R("__importDefault",q),R("__classPrivateFieldGet",z),R("__classPrivateFieldSet",V)})})(ba);var _r={},qt={},br={};Object.defineProperty(br,"__esModule",{value:!0});br.isEmptyData=void 0;function Sa(r){return typeof r=="string"?r.length===0:r.byteLength===0}br.isEmptyData=Sa;var Dn={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.EMPTY_DATA_SHA_256=r.SHA_256_HMAC_ALGO=r.SHA_256_HASH=void 0,r.SHA_256_HASH={name:"SHA-256"},r.SHA_256_HMAC_ALGO={name:"HMAC",hash:r.SHA_256_HASH},r.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])})(Dn);const Aa={};function Ia(){return typeof window<"u"?window:typeof self<"u"?self:Aa}const Ea=Object.freeze(Object.defineProperty({__proto__:null,locateWindow:Ia},Symbol.toStringTag,{value:"Module"})),Fn=Un(Ea);Object.defineProperty(qt,"__esModule",{value:!0});qt.Sha256=void 0;var Ca=br,Bo=Dn,Ta=Do,on=Fn,Pa=function(){function r(e){e?(this.operation=xa(e).then(function(t){return(0,on.locateWindow)().msCrypto.subtle.sign(Bo.SHA_256_HMAC_ALGO,t)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,on.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return r.prototype.update=function(e){var t=this;(0,Ca.isEmptyData)(e)||(this.operation=this.operation.then(function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(Lo(e)),n}),this.operation.catch(function(){}))},r.prototype.digest=function(){return this.operation.then(function(e){return new Promise(function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()})})},r}();qt.Sha256=Pa;function xa(r){return new Promise(function(e,t){var n=(0,on.locateWindow)().msCrypto.subtle.importKey("raw",Lo(r),Bo.SHA_256_HMAC_ALGO,!1,["sign"]);n.oncomplete=function(){n.result&&e(n.result),t(new Error("ImportKey completed without importing key."))},n.onerror=function(){t(new Error("ImportKey failed to import key."))}})}function Lo(r){return typeof r=="string"?(0,Ta.fromUtf8)(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.Sha256=void 0;var Wt=Rn,Yt=Dn,Cr=Fn,Ua=function(){function r(e){this.toHash=new Uint8Array(0),e!==void 0&&(this.key=new Promise(function(t,n){(0,Cr.locateWindow)().crypto.subtle.importKey("raw",(0,Wt.convertToBuffer)(e),Yt.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)}),this.key.catch(function(){}))}return r.prototype.update=function(e){if(!(0,Wt.isEmptyData)(e)){var t=(0,Wt.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},r.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return(0,Cr.locateWindow)().crypto.subtle.sign(Yt.SHA_256_HMAC_ALGO,t,e.toHash).then(function(n){return new Uint8Array(n)})}):(0,Wt.isEmptyData)(this.toHash)?Promise.resolve(Yt.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,Cr.locateWindow)().crypto.subtle.digest(Yt.SHA_256_HASH,e.toHash)}).then(function(t){return Promise.resolve(new Uint8Array(t))})},r}();Ht.Sha256=Ua;var Ko={},sr={},Ra={get exports(){return sr},set exports(r){sr=r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(r){var e,t,n,o,i,s,u,f,a,c,h,y,_,b,E,C,O,T,M,q,z,V,Y;(function(R){var W=typeof Ue=="object"?Ue:typeof self=="object"?self:typeof this=="object"?this:{};R(g(W,g(r.exports)));function g(v,p){return v!==W&&(typeof Object.create=="function"?Object.defineProperty(v,"__esModule",{value:!0}):v.__esModule=!0),function(A,I){return v[A]=p?p(A,I):I}}})(function(R){var W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var p in v)v.hasOwnProperty(p)&&(g[p]=v[p])};e=function(g,v){W(g,v);function p(){this.constructor=g}g.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)},t=Object.assign||function(g){for(var v,p=1,A=arguments.length;p<A;p++){v=arguments[p];for(var I in v)Object.prototype.hasOwnProperty.call(v,I)&&(g[I]=v[I])}return g},n=function(g,v){var p={};for(var A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.indexOf(A)<0&&(p[A]=g[A]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,A=Object.getOwnPropertySymbols(g);I<A.length;I++)v.indexOf(A[I])<0&&Object.prototype.propertyIsEnumerable.call(g,A[I])&&(p[A[I]]=g[A[I]]);return p},o=function(g,v,p,A){var I=arguments.length,m=I<3?v:A===null?A=Object.getOwnPropertyDescriptor(v,p):A,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(g,v,p,A);else for(var K=g.length-1;K>=0;K--)(x=g[K])&&(m=(I<3?x(m):I>3?x(v,p,m):x(v,p))||m);return I>3&&m&&Object.defineProperty(v,p,m),m},i=function(g,v){return function(p,A){v(p,A,g)}},s=function(g,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(g,v)},u=function(g,v,p,A){function I(m){return m instanceof p?m:new p(function(x){x(m)})}return new(p||(p=Promise))(function(m,x){function K(k){try{U(A.next(k))}catch(H){x(H)}}function J(k){try{U(A.throw(k))}catch(H){x(H)}}function U(k){k.done?m(k.value):I(k.value).then(K,J)}U((A=A.apply(g,v||[])).next())})},f=function(g,v){var p={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},A,I,m,x;return x={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function K(U){return function(k){return J([U,k])}}function J(U){if(A)throw new TypeError("Generator is already executing.");for(;p;)try{if(A=1,I&&(m=U[0]&2?I.return:U[0]?I.throw||((m=I.return)&&m.call(I),0):I.next)&&!(m=m.call(I,U[1])).done)return m;switch(I=0,m&&(U=[U[0]&2,m.value]),U[0]){case 0:case 1:m=U;break;case 4:return p.label++,{value:U[1],done:!1};case 5:p.label++,I=U[1],U=[0];continue;case 7:U=p.ops.pop(),p.trys.pop();continue;default:if(m=p.trys,!(m=m.length>0&&m[m.length-1])&&(U[0]===6||U[0]===2)){p=0;continue}if(U[0]===3&&(!m||U[1]>m[0]&&U[1]<m[3])){p.label=U[1];break}if(U[0]===6&&p.label<m[1]){p.label=m[1],m=U;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(U);break}m[2]&&p.ops.pop(),p.trys.pop();continue}U=v.call(g,p)}catch(k){U=[6,k],I=0}finally{A=m=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},Y=function(g,v,p,A){A===void 0&&(A=p),g[A]=v[p]},a=function(g,v){for(var p in g)p!=="default"&&!v.hasOwnProperty(p)&&(v[p]=g[p])},c=function(g){var v=typeof Symbol=="function"&&Symbol.iterator,p=v&&g[v],A=0;if(p)return p.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&A>=g.length&&(g=void 0),{value:g&&g[A++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(g,v){var p=typeof Symbol=="function"&&g[Symbol.iterator];if(!p)return g;var A=p.call(g),I,m=[],x;try{for(;(v===void 0||v-- >0)&&!(I=A.next()).done;)m.push(I.value)}catch(K){x={error:K}}finally{try{I&&!I.done&&(p=A.return)&&p.call(A)}finally{if(x)throw x.error}}return m},y=function(){for(var g=[],v=0;v<arguments.length;v++)g=g.concat(h(arguments[v]));return g},_=function(){for(var g=0,v=0,p=arguments.length;v<p;v++)g+=arguments[v].length;for(var A=Array(g),I=0,v=0;v<p;v++)for(var m=arguments[v],x=0,K=m.length;x<K;x++,I++)A[I]=m[x];return A},b=function(g){return this instanceof b?(this.v=g,this):new b(g)},E=function(g,v,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A=p.apply(g,v||[]),I,m=[];return I={},x("next"),x("throw"),x("return"),I[Symbol.asyncIterator]=function(){return this},I;function x(F){A[F]&&(I[F]=function($){return new Promise(function(Z,ae){m.push([F,$,Z,ae])>1||K(F,$)})})}function K(F,$){try{J(A[F]($))}catch(Z){H(m[0][3],Z)}}function J(F){F.value instanceof b?Promise.resolve(F.value.v).then(U,k):H(m[0][2],F)}function U(F){K("next",F)}function k(F){K("throw",F)}function H(F,$){F($),m.shift(),m.length&&K(m[0][0],m[0][1])}},C=function(g){var v,p;return v={},A("next"),A("throw",function(I){throw I}),A("return"),v[Symbol.iterator]=function(){return this},v;function A(I,m){v[I]=g[I]?function(x){return(p=!p)?{value:b(g[I](x)),done:I==="return"}:m?m(x):x}:m}},O=function(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=g[Symbol.asyncIterator],p;return v?v.call(g):(g=typeof c=="function"?c(g):g[Symbol.iterator](),p={},A("next"),A("throw"),A("return"),p[Symbol.asyncIterator]=function(){return this},p);function A(m){p[m]=g[m]&&function(x){return new Promise(function(K,J){x=g[m](x),I(K,J,x.done,x.value)})}}function I(m,x,K,J){Promise.resolve(J).then(function(U){m({value:U,done:K})},x)}},T=function(g,v){return Object.defineProperty?Object.defineProperty(g,"raw",{value:v}):g.raw=v,g},M=function(g){if(g&&g.__esModule)return g;var v={};if(g!=null)for(var p in g)Object.hasOwnProperty.call(g,p)&&(v[p]=g[p]);return v.default=g,v},q=function(g){return g&&g.__esModule?g:{default:g}},z=function(g,v){if(!v.has(g))throw new TypeError("attempted to get private field on non-instance");return v.get(g)},V=function(g,v,p){if(!v.has(g))throw new TypeError("attempted to set private field on non-instance");return v.set(g,p),p},R("__extends",e),R("__assign",t),R("__rest",n),R("__decorate",o),R("__param",i),R("__metadata",s),R("__awaiter",u),R("__generator",f),R("__exportStar",a),R("__createBinding",Y),R("__values",c),R("__read",h),R("__spread",y),R("__spreadArrays",_),R("__await",b),R("__asyncGenerator",E),R("__asyncDelegator",C),R("__asyncValues",O),R("__makeTemplateObject",T),R("__importStar",M),R("__importDefault",q),R("__classPrivateFieldGet",z),R("__classPrivateFieldSet",V)})})(Ra);var Ne={},Wn;function Oa(){if(Wn)return Ne;Wn=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.supportsZeroByteGCM=Ne.supportsSubtleCrypto=Ne.supportsSecureRandom=Ne.supportsWebCrypto=void 0;var r=sr,e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function t(s){if(n(s)&&typeof s.crypto.subtle=="object"){var u=s.crypto.subtle;return o(u)}return!1}Ne.supportsWebCrypto=t;function n(s){if(typeof s=="object"&&typeof s.crypto=="object"){var u=s.crypto.getRandomValues;return typeof u=="function"}return!1}Ne.supportsSecureRandom=n;function o(s){return s&&e.every(function(u){return typeof s[u]=="function"})}Ne.supportsSubtleCrypto=o;function i(s){return r.__awaiter(this,void 0,void 0,function(){var u,f;return r.__generator(this,function(a){switch(a.label){case 0:if(!o(s))return[2,!1];a.label=1;case 1:return a.trys.push([1,4,,5]),[4,s.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return u=a.sent(),[4,s.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},u,new Uint8Array(0))];case 3:return f=a.sent(),[2,f.byteLength===16];case 4:return a.sent(),[2,!1];case 5:return[2]}})})}return Ne.supportsZeroByteGCM=i,Ne}(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=sr;e.__exportStar(Oa(),r)})(Ko);var qo={},sn={},Da={get exports(){return sn},set exports(r){sn=r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(r){var e,t,n,o,i,s,u,f,a,c,h,y,_,b,E,C,O,T,M,q,z,V,Y;(function(R){var W=typeof Ue=="object"?Ue:typeof self=="object"?self:typeof this=="object"?this:{};R(g(W,g(r.exports)));function g(v,p){return v!==W&&(typeof Object.create=="function"?Object.defineProperty(v,"__esModule",{value:!0}):v.__esModule=!0),function(A,I){return v[A]=p?p(A,I):I}}})(function(R){var W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var p in v)v.hasOwnProperty(p)&&(g[p]=v[p])};e=function(g,v){W(g,v);function p(){this.constructor=g}g.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)},t=Object.assign||function(g){for(var v,p=1,A=arguments.length;p<A;p++){v=arguments[p];for(var I in v)Object.prototype.hasOwnProperty.call(v,I)&&(g[I]=v[I])}return g},n=function(g,v){var p={};for(var A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.indexOf(A)<0&&(p[A]=g[A]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,A=Object.getOwnPropertySymbols(g);I<A.length;I++)v.indexOf(A[I])<0&&Object.prototype.propertyIsEnumerable.call(g,A[I])&&(p[A[I]]=g[A[I]]);return p},o=function(g,v,p,A){var I=arguments.length,m=I<3?v:A===null?A=Object.getOwnPropertyDescriptor(v,p):A,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(g,v,p,A);else for(var K=g.length-1;K>=0;K--)(x=g[K])&&(m=(I<3?x(m):I>3?x(v,p,m):x(v,p))||m);return I>3&&m&&Object.defineProperty(v,p,m),m},i=function(g,v){return function(p,A){v(p,A,g)}},s=function(g,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(g,v)},u=function(g,v,p,A){function I(m){return m instanceof p?m:new p(function(x){x(m)})}return new(p||(p=Promise))(function(m,x){function K(k){try{U(A.next(k))}catch(H){x(H)}}function J(k){try{U(A.throw(k))}catch(H){x(H)}}function U(k){k.done?m(k.value):I(k.value).then(K,J)}U((A=A.apply(g,v||[])).next())})},f=function(g,v){var p={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},A,I,m,x;return x={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function K(U){return function(k){return J([U,k])}}function J(U){if(A)throw new TypeError("Generator is already executing.");for(;p;)try{if(A=1,I&&(m=U[0]&2?I.return:U[0]?I.throw||((m=I.return)&&m.call(I),0):I.next)&&!(m=m.call(I,U[1])).done)return m;switch(I=0,m&&(U=[U[0]&2,m.value]),U[0]){case 0:case 1:m=U;break;case 4:return p.label++,{value:U[1],done:!1};case 5:p.label++,I=U[1],U=[0];continue;case 7:U=p.ops.pop(),p.trys.pop();continue;default:if(m=p.trys,!(m=m.length>0&&m[m.length-1])&&(U[0]===6||U[0]===2)){p=0;continue}if(U[0]===3&&(!m||U[1]>m[0]&&U[1]<m[3])){p.label=U[1];break}if(U[0]===6&&p.label<m[1]){p.label=m[1],m=U;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(U);break}m[2]&&p.ops.pop(),p.trys.pop();continue}U=v.call(g,p)}catch(k){U=[6,k],I=0}finally{A=m=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},Y=function(g,v,p,A){A===void 0&&(A=p),g[A]=v[p]},a=function(g,v){for(var p in g)p!=="default"&&!v.hasOwnProperty(p)&&(v[p]=g[p])},c=function(g){var v=typeof Symbol=="function"&&Symbol.iterator,p=v&&g[v],A=0;if(p)return p.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&A>=g.length&&(g=void 0),{value:g&&g[A++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(g,v){var p=typeof Symbol=="function"&&g[Symbol.iterator];if(!p)return g;var A=p.call(g),I,m=[],x;try{for(;(v===void 0||v-- >0)&&!(I=A.next()).done;)m.push(I.value)}catch(K){x={error:K}}finally{try{I&&!I.done&&(p=A.return)&&p.call(A)}finally{if(x)throw x.error}}return m},y=function(){for(var g=[],v=0;v<arguments.length;v++)g=g.concat(h(arguments[v]));return g},_=function(){for(var g=0,v=0,p=arguments.length;v<p;v++)g+=arguments[v].length;for(var A=Array(g),I=0,v=0;v<p;v++)for(var m=arguments[v],x=0,K=m.length;x<K;x++,I++)A[I]=m[x];return A},b=function(g){return this instanceof b?(this.v=g,this):new b(g)},E=function(g,v,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A=p.apply(g,v||[]),I,m=[];return I={},x("next"),x("throw"),x("return"),I[Symbol.asyncIterator]=function(){return this},I;function x(F){A[F]&&(I[F]=function($){return new Promise(function(Z,ae){m.push([F,$,Z,ae])>1||K(F,$)})})}function K(F,$){try{J(A[F]($))}catch(Z){H(m[0][3],Z)}}function J(F){F.value instanceof b?Promise.resolve(F.value.v).then(U,k):H(m[0][2],F)}function U(F){K("next",F)}function k(F){K("throw",F)}function H(F,$){F($),m.shift(),m.length&&K(m[0][0],m[0][1])}},C=function(g){var v,p;return v={},A("next"),A("throw",function(I){throw I}),A("return"),v[Symbol.iterator]=function(){return this},v;function A(I,m){v[I]=g[I]?function(x){return(p=!p)?{value:b(g[I](x)),done:I==="return"}:m?m(x):x}:m}},O=function(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=g[Symbol.asyncIterator],p;return v?v.call(g):(g=typeof c=="function"?c(g):g[Symbol.iterator](),p={},A("next"),A("throw"),A("return"),p[Symbol.asyncIterator]=function(){return this},p);function A(m){p[m]=g[m]&&function(x){return new Promise(function(K,J){x=g[m](x),I(K,J,x.done,x.value)})}}function I(m,x,K,J){Promise.resolve(J).then(function(U){m({value:U,done:K})},x)}},T=function(g,v){return Object.defineProperty?Object.defineProperty(g,"raw",{value:v}):g.raw=v,g},M=function(g){if(g&&g.__esModule)return g;var v={};if(g!=null)for(var p in g)Object.hasOwnProperty.call(g,p)&&(v[p]=g[p]);return v.default=g,v},q=function(g){return g&&g.__esModule?g:{default:g}},z=function(g,v){if(!v.has(g))throw new TypeError("attempted to get private field on non-instance");return v.get(g)},V=function(g,v,p){if(!v.has(g))throw new TypeError("attempted to set private field on non-instance");return v.set(g,p),p},R("__extends",e),R("__assign",t),R("__rest",n),R("__decorate",o),R("__param",i),R("__metadata",s),R("__awaiter",u),R("__generator",f),R("__exportStar",a),R("__createBinding",Y),R("__values",c),R("__read",h),R("__spread",y),R("__spreadArrays",_),R("__await",b),R("__asyncGenerator",E),R("__asyncDelegator",C),R("__asyncValues",O),R("__makeTemplateObject",T),R("__importStar",M),R("__importDefault",q),R("__classPrivateFieldGet",z),R("__classPrivateFieldSet",V)})})(Da);var Tr={},Yn;function Fa(){return Yn||(Yn=1,Object.defineProperty(Tr,"__esModule",{value:!0})),Tr}var Pr={},Jn;function Ma(){return Jn||(Jn=1,Object.defineProperty(Pr,"__esModule",{value:!0})),Pr}var xr={},Zn;function ka(){return Zn||(Zn=1,Object.defineProperty(xr,"__esModule",{value:!0})),xr}var Ur={},Xn;function Na(){return Xn||(Xn=1,Object.defineProperty(Ur,"__esModule",{value:!0})),Ur}var Ft={},Qn;function ja(){if(Qn)return Ft;Qn=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.isMsWindow=void 0;var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function e(n){return"MSInputMethodContext"in n&&"msCrypto"in n}function t(n){if(e(n)&&n.msCrypto.subtle!==void 0){var o=n.msCrypto,i=o.getRandomValues,s=o.subtle;return r.map(function(u){return s[u]}).concat(i).every(function(u){return typeof u=="function"})}return!1}return Ft.isMsWindow=t,Ft}(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=sn;e.__exportStar(Fa(),r),e.__exportStar(Ma(),r),e.__exportStar(ka(),r),e.__exportStar(Na(),r),e.__exportStar(ja(),r)})(qo);Object.defineProperty(_r,"__esModule",{value:!0});_r.Sha256=void 0;var Ba=qt,La=Ht,Ka=it,qa=Ko,Ha=qo,ei=Fn,za=function(){function r(e){(0,qa.supportsWebCrypto)((0,ei.locateWindow)())?this.hash=new La.Sha256(e):(0,Ha.isMsWindow)((0,ei.locateWindow)())?this.hash=new Ba.Sha256(e):this.hash=new Ka.Sha256(e)}return r.prototype.update=function(e,t){this.hash.update(e,t)},r.prototype.digest=function(){return this.hash.digest()},r}();_r.Sha256=za;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebCryptoSha256=r.Ie11Sha256=void 0;var e=nn;(0,e.__exportStar)(_r,r);var t=qt;Object.defineProperty(r,"Ie11Sha256",{enumerable:!0,get:function(){return t.Sha256}});var n=Ht;Object.defineProperty(r,"WebCryptoSha256",{enumerable:!0,get:function(){return n.Sha256}})})(jo);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ho(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function zo(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Va(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ti=function(){function r(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return r.isInstance=function(e){if(!e)return!1;var t=e;return typeof t.statusCode=="number"&&typeof t.headers=="object"},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pt=function(){return pt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pt.apply(this,arguments)};function Ga(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}function $a(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Ga(arguments[e]));return r}var Tt=function(){function r(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.substr(-1)!==":"?e.protocol+":":e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?"/"+e.path:e.path:"/"}return r.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&typeof t.query=="object"&&typeof t.headers=="object"},r.prototype.clone=function(){var e=new r(pt(pt({},this),{headers:pt({},this.headers)}));return e.query&&(e.query=Wa(e.query)),e},r}();function Wa(r){return Object.keys(r).reduce(function(e,t){var n,o=r[t];return pt(pt({},e),(n={},n[t]=Array.isArray(o)?$a(o):o,n))},{})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ya(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var gt=function(r){return encodeURIComponent(r).replace(/[!'()*]/g,Ja)},Ja=function(r){return"%"+r.charCodeAt(0).toString(16).toUpperCase()};function Za(r){var e,t,n=[];try{for(var o=Ya(Object.keys(r).sort()),i=o.next();!i.done;i=o.next()){var s=i.value,u=r[s];if(s=gt(s),Array.isArray(u))for(var f=0,a=u.length;f<a;f++)n.push(s+"="+gt(u[f]));else{var c=s;(u||typeof u=="string")&&(c+="="+gt(u)),n.push(c)}}}catch(h){e={error:h}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n.join("&")}function Xa(r){return r===void 0&&(r=0),new Promise(function(e,t){r&&setTimeout(function(){var n=new Error("Request did not complete within "+r+" ms");n.name="TimeoutError",t(n)},r)})}var Qa=function(){function r(e){var t=e===void 0?{}:e,n=t.requestTimeout;this.requestTimeout=n}return r.prototype.destroy=function(){},r.prototype.handle=function(e,t){var n=t===void 0?{}:t,o=n.abortSignal,i=this.requestTimeout;if(o!=null&&o.aborted){var s=new Error("Request aborted");return s.name="AbortError",Promise.reject(s)}var u=e.path;if(e.query){var f=Za(e.query);f&&(u+="?"+f)}var a=e.port,c=e.method,h=e.protocol+"//"+e.hostname+(a?":"+a:"")+u,y=c==="GET"||c==="HEAD"?void 0:e.body,_={body:y,headers:new Headers(e.headers),method:c};typeof AbortController<"u"&&(_.signal=o);var b=new Request(h,_),E=[fetch(b).then(function(C){var O,T,M=C.headers,q={};try{for(var z=Va(M.entries()),V=z.next();!V.done;V=z.next()){var Y=V.value;q[Y[0]]=Y[1]}}catch(W){O={error:W}}finally{try{V&&!V.done&&(T=z.return)&&T.call(z)}finally{if(O)throw O.error}}var R=C.body!==void 0;return R?{response:new ti({headers:q,statusCode:C.status,body:C.body})}:C.blob().then(function(W){return{response:new ti({headers:q,statusCode:C.status,body:W})}})}),Xa(i)];return o&&E.push(new Promise(function(C,O){o.onabort=function(){var T=new Error("Request aborted");T.name="AbortError",O(T)}})),Promise.race(E)},r}(),yt={},Ut=new Array(64);for(var we=0,Bt="A".charCodeAt(0),Mn="Z".charCodeAt(0);we+Bt<=Mn;we++){var st=String.fromCharCode(we+Bt);yt[st]=we,Ut[we]=st}for(var we=0,Bt="a".charCodeAt(0),Mn="z".charCodeAt(0);we+Bt<=Mn;we++){var st=String.fromCharCode(we+Bt),Lt=we+26;yt[st]=Lt,Ut[Lt]=st}for(var we=0;we<10;we++){yt[we.toString(10)]=we+52;var st=we.toString(10),Lt=we+52;yt[st]=Lt,Ut[Lt]=st}yt["+"]=62;Ut[62]="+";yt["/"]=63;Ut[63]="/";var Ct=6,kt=8,eu=63;function Vo(r){var e=r.length/4*3;r.substr(-2)==="=="?e-=2:r.substr(-1)==="="&&e--;for(var t=new ArrayBuffer(e),n=new DataView(t),o=0;o<r.length;o+=4){for(var i=0,s=0,u=o,f=o+3;u<=f;u++)r[u]!=="="?(i|=yt[r[u]]<<(f-u)*Ct,s+=Ct):i>>=Ct;var a=o/4*3;i>>=s%kt;for(var c=Math.floor(s/kt),h=0;h<c;h++){var y=(c-h-1)*kt;n.setUint8(a+h,(i&255<<y)>>y)}}return new Uint8Array(t)}function tu(r){for(var e="",t=0;t<r.length;t+=3){for(var n=0,o=0,i=t,s=Math.min(t+3,r.length);i<s;i++)n|=r[i]<<(s-i-1)*kt,o+=kt;var u=Math.ceil(o/Ct);n<<=u*Ct-o;for(var f=1;f<=u;f++){var a=(u-f)*Ct;e+=Ut[(n&eu<<a)>>a]}e+="==".slice(0,4-u)}return e}var ru=function(r){return typeof Blob=="function"&&r instanceof Blob?nu(r):iu(r)};function nu(r){return Ho(this,void 0,void 0,function(){var e,t;return zo(this,function(n){switch(n.label){case 0:return[4,ou(r)];case 1:return e=n.sent(),t=Vo(e),[2,new Uint8Array(t)]}})})}function iu(r){return Ho(this,void 0,void 0,function(){var e,t,n,o,i,s,u;return zo(this,function(f){switch(f.label){case 0:e=new Uint8Array(0),t=r.getReader(),n=!1,f.label=1;case 1:return n?[3,3]:[4,t.read()];case 2:return o=f.sent(),i=o.done,s=o.value,s&&(u=e,e=new Uint8Array(u.length+s.length),e.set(u),e.set(s,u.length)),n=i,[3,1];case 3:return[2,e]}})})}function ou(r){return new Promise(function(e,t){var n=new FileReader;n.onloadend=function(){var o;if(n.readyState!==2)return t(new Error("Reader aborted too early"));var i=(o=n.result)!==null&&o!==void 0?o:"",s=i.indexOf(","),u=s>-1?s+1:i.length;e(i.substring(u))},n.onabort=function(){return t(new Error("Read aborted"))},n.onerror=function(){return t(n.error)},n.readAsDataURL(r)})}var su=function(r){return function(){return Promise.reject(r)}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ar=function(){return ar=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ar.apply(this,arguments)};function an(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function tr(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function au(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}function uu(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(au(arguments[e]));return r}var cu=function(r){return function(e,t){return function(n){return an(void 0,void 0,void 0,function(){var o;return tr(this,function(i){return!((o=r==null?void 0:r.retryStrategy)===null||o===void 0)&&o.mode&&(t.userAgent=uu(t.userAgent||[],[["cfg/retry-mode",r.retryStrategy.mode]])),[2,r.retryStrategy.retry(e,n)]})})}}},fu={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},lu=function(r){return{applyToStack:function(e){e.add(cu(r),fu)}}},du=100,hu=20*1e3,gu=500,vu=500,pu=5,yu=10,mu=1,wu="amz-sdk-invocation-id",_u="amz-sdk-request",bu=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Su=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Au=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Iu=[500,502,503,504],Eu=function(r){return r.$retryable!==void 0},Cu=function(r){return bu.includes(r.name)},Go=function(r){var e,t;return((e=r.$metadata)===null||e===void 0?void 0:e.httpStatusCode)===429||Su.includes(r.name)||((t=r.$retryable)===null||t===void 0?void 0:t.throttling)==!0},Tu=function(r){var e;return Au.includes(r.name)||Iu.includes(((e=r.$metadata)===null||e===void 0?void 0:e.httpStatusCode)||0)},ur={},ri={get exports(){return ur},set exports(r){ur=r}},ni=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(ni){var ii=new Uint8Array(16);ri.exports=function(){return ni(ii),ii}}else{var oi=new Array(16);ri.exports=function(){for(var e=0,t;e<16;e++)e&3||(t=Math.random()*4294967296),oi[e]=t>>>((e&3)<<3)&255;return oi}}var $o=[];for(var Jt=0;Jt<256;++Jt)$o[Jt]=(Jt+256).toString(16).substr(1);function Pu(r,e){var t=e||0,n=$o;return[n[r[t++]],n[r[t++]],n[r[t++]],n[r[t++]],"-",n[r[t++]],n[r[t++]],"-",n[r[t++]],n[r[t++]],"-",n[r[t++]],n[r[t++]],"-",n[r[t++]],n[r[t++]],n[r[t++]],n[r[t++]],n[r[t++]],n[r[t++]]].join("")}var Wo=Pu,xu=ur,Uu=Wo,si,Rr,Or=0,Dr=0;function Ru(r,e,t){var n=e&&t||0,o=e||[];r=r||{};var i=r.node||si,s=r.clockseq!==void 0?r.clockseq:Rr;if(i==null||s==null){var u=xu();i==null&&(i=si=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),s==null&&(s=Rr=(u[6]<<8|u[7])&16383)}var f=r.msecs!==void 0?r.msecs:new Date().getTime(),a=r.nsecs!==void 0?r.nsecs:Dr+1,c=f-Or+(a-Dr)/1e4;if(c<0&&r.clockseq===void 0&&(s=s+1&16383),(c<0||f>Or)&&r.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Or=f,Dr=a,Rr=s,f+=122192928e5;var h=((f&268435455)*1e4+a)%4294967296;o[n++]=h>>>24&255,o[n++]=h>>>16&255,o[n++]=h>>>8&255,o[n++]=h&255;var y=f/4294967296*1e4&268435455;o[n++]=y>>>8&255,o[n++]=y&255,o[n++]=y>>>24&15|16,o[n++]=y>>>16&255,o[n++]=s>>>8|128,o[n++]=s&255;for(var _=0;_<6;++_)o[n+_]=i[_];return e||Uu(o)}var Ou=Ru,Du=ur,Fu=Wo;function Mu(r,e,t){var n=e&&t||0;typeof r=="string"&&(e=r==="binary"?new Array(16):null,r=null),r=r||{};var o=r.random||(r.rng||Du)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e)for(var i=0;i<16;++i)e[n+i]=o[i];return e||Fu(o)}var ku=Mu,Nu=Ou,Yo=ku,kn=Yo;kn.v1=Nu;kn.v4=Yo;var ju=kn,Bu=function(r){var e=r,t=r,n=function(u){return u.name==="TimeoutError"?yu:pu},o=function(u){return n(u)<=t},i=function(u){if(!o(u))throw new Error("No retry token available");var f=n(u);return t-=f,f},s=function(u){t+=u??mu,t=Math.min(t,e)};return Object.freeze({hasRetryTokens:o,retrieveRetryTokens:i,releaseRetryTokens:s})},Lu=function(r,e){return Math.floor(Math.min(hu,Math.random()*Math.pow(2,e)*r))},Ku=function(r){return r?Eu(r)||Cu(r)||Go(r)||Tu(r):!1},Nn=3,qu="standard",Hu=function(){function r(e,t){var n,o,i;this.maxAttemptsProvider=e,this.mode=qu,this.retryDecider=(n=t==null?void 0:t.retryDecider)!==null&&n!==void 0?n:Ku,this.delayDecider=(o=t==null?void 0:t.delayDecider)!==null&&o!==void 0?o:Lu,this.retryQuota=(i=t==null?void 0:t.retryQuota)!==null&&i!==void 0?i:Bu(vu)}return r.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},r.prototype.getMaxAttempts=function(){return an(this,void 0,void 0,function(){var e;return tr(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=Nn,[3,3];case 3:return[2,e]}})})},r.prototype.retry=function(e,t){return an(this,void 0,void 0,function(){var n,o,i,s,u,f,a,c;return tr(this,function(h){switch(h.label){case 0:return o=0,i=0,[4,this.getMaxAttempts()];case 1:s=h.sent(),u=t.request,Tt.isInstance(u)&&(u.headers[wu]=ju.v4()),f=function(){var y,_,b,E,C;return tr(this,function(O){switch(O.label){case 0:return O.trys.push([0,2,,5]),Tt.isInstance(u)&&(u.headers[_u]="attempt="+(o+1)+"; max="+s),[4,e(t)];case 1:return y=O.sent(),_=y.response,b=y.output,a.retryQuota.releaseRetryTokens(n),b.$metadata.attempts=o+1,b.$metadata.totalRetryDelay=i,[2,{value:{response:_,output:b}}];case 2:return E=O.sent(),o++,a.shouldRetry(E,o,s)?(n=a.retryQuota.retrieveRetryTokens(E),C=a.delayDecider(Go(E)?gu:du,o),i+=C,[4,new Promise(function(T){return setTimeout(T,C)})]):[3,4];case 3:return O.sent(),[2,"continue"];case 4:throw E.$metadata||(E.$metadata={}),E.$metadata.attempts=o,E.$metadata.totalRetryDelay=i,E;case 5:return[2]}})},a=this,h.label=2;case 2:return[5,f()];case 3:return c=h.sent(),typeof c=="object"?[2,c.value]:[3,2];case 4:return[2]}})})},r}(),zu=function(r){var e=Vu(r.maxAttempts);return ar(ar({},r),{maxAttempts:e,retryStrategy:r.retryStrategy||new Hu(e)})},Vu=function(r){if(r===void 0&&(r=Nn),typeof r=="number"){var e=Promise.resolve(r);return function(){return e}}return r};function Gu(r){if(typeof r=="string"){for(var e=r.length,t=e-1;t>=0;t--){var n=r.charCodeAt(t);n>127&&n<=2047?e++:n>2047&&n<=65535&&(e+=2)}return e}else{if(typeof r.byteLength=="number")return r.byteLength;if(typeof r.size=="number")return r.size}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function $u(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function Wu(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}const Yu={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Jo={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},le={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Ie={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Qe={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class N{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(t.push(0),t[0]===10)switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(t.push(0),!(t[0]===1&&t[1]<5)){if(t[0]===1&&t[1]<6)return"Cupcake";if(t[0]===1&&t[1]>=6)return"Donut";if(t[0]===2&&t[1]<2)return"Eclair";if(t[0]===2&&t[1]===2)return"Froyo";if(t[0]===2&&t[1]>2)return"Gingerbread";if(t[0]===3)return"Honeycomb";if(t[0]===4&&t[1]<1)return"Ice Cream Sandwich";if(t[0]===4&&t[1]<4)return"Jelly Bean";if(t[0]===4&&t[1]>=4)return"KitKat";if(t[0]===5)return"Lollipop";if(t[0]===6)return"Marshmallow";if(t[0]===7)return"Nougat";if(t[0]===8)return"Oreo";if(t[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const o=N.getVersionPrecision(e),i=N.getVersionPrecision(t);let s=Math.max(o,i),u=0;const f=N.map([e,t],a=>{const c=s-N.getVersionPrecision(a),h=a+new Array(c+1).join(".0");return N.map(h.split("."),y=>new Array(20-y.length).join("0")+y).reverse()});for(n&&(u=s-Math.min(o,i)),s-=1;s>=u;){if(f[0][s]>f[1][s])return 1;if(f[0][s]===f[1][s]){if(s===u)return 0;s-=1}else if(f[0][s]<f[1][s])return-1}}static map(e,t){const n=[];let o;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(o=0;o<e.length;o+=1)n.push(t(e[o]));return n}static find(e,t){let n,o;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,o=e.length;n<o;n+=1){const i=e[n];if(t(i,n))return i}}static assign(e,...t){const n=e;let o,i;if(Object.assign)return Object.assign(e,...t);for(o=0,i=t.length;o<i;o+=1){const s=t[o];typeof s=="object"&&s!==null&&Object.keys(s).forEach(f=>{n[f]=s[f]})}return e}static getBrowserAlias(e){return Yu[e]}static getBrowserTypeByAlias(e){return Jo[e]||""}}const oe=/version\/(\d+(\.?_?\d+)+)/i,Ju=[{test:[/googlebot/i],describe(r){const e={name:"Googlebot"},t=N.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/opera/i],describe(r){const e={name:"Opera"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opr\/|opios/i],describe(r){const e={name:"Opera"},t=N.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/SamsungBrowser/i],describe(r){const e={name:"Samsung Internet for Android"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Whale/i],describe(r){const e={name:"NAVER Whale Browser"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MZBrowser/i],describe(r){const e={name:"MZ Browser"},t=N.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/focus/i],describe(r){const e={name:"Focus"},t=N.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/swing/i],describe(r){const e={name:"Swing"},t=N.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/coast/i],describe(r){const e={name:"Opera Coast"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(r){const e={name:"Opera Touch"},t=N.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/yabrowser/i],describe(r){const e={name:"Yandex Browser"},t=N.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/ucbrowser/i],describe(r){const e={name:"UC Browser"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Maxthon|mxios/i],describe(r){const e={name:"Maxthon"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/epiphany/i],describe(r){const e={name:"Epiphany"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/puffin/i],describe(r){const e={name:"Puffin"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sleipnir/i],describe(r){const e={name:"Sleipnir"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/k-meleon/i],describe(r){const e={name:"K-Meleon"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/micromessenger/i],describe(r){const e={name:"WeChat"},t=N.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/qqbrowser/i],describe(r){const e={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},t=N.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/msie|trident/i],describe(r){const e={name:"Internet Explorer"},t=N.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/\sedg\//i],describe(r){const e={name:"Microsoft Edge"},t=N.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/edg([ea]|ios)/i],describe(r){const e={name:"Microsoft Edge"},t=N.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/vivaldi/i],describe(r){const e={name:"Vivaldi"},t=N.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/seamonkey/i],describe(r){const e={name:"SeaMonkey"},t=N.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sailfish/i],describe(r){const e={name:"Sailfish"},t=N.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return t&&(e.version=t),e}},{test:[/silk/i],describe(r){const e={name:"Amazon Silk"},t=N.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/phantom/i],describe(r){const e={name:"PhantomJS"},t=N.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/slimerjs/i],describe(r){const e={name:"SlimerJS"},t=N.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e={name:"BlackBerry"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(web|hpw)[o0]s/i],describe(r){const e={name:"WebOS Browser"},t=N.getFirstMatch(oe,r)||N.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/bada/i],describe(r){const e={name:"Bada"},t=N.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/tizen/i],describe(r){const e={name:"Tizen"},t=N.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/qupzilla/i],describe(r){const e={name:"QupZilla"},t=N.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/firefox|iceweasel|fxios/i],describe(r){const e={name:"Firefox"},t=N.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/electron/i],describe(r){const e={name:"Electron"},t=N.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MiuiBrowser/i],describe(r){const e={name:"Miui"},t=N.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/chromium/i],describe(r){const e={name:"Chromium"},t=N.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/chrome|crios|crmo/i],describe(r){const e={name:"Chrome"},t=N.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/GSA/i],describe(r){const e={name:"Google Search"},t=N.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e={name:"Android Browser"},t=N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/playstation 4/i],describe(r){const e={name:"PlayStation 4"},t=N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/safari|applewebkit/i],describe(r){const e={name:"Safari"},t=N.getFirstMatch(oe,r);return t&&(e.version=t),e}},{test:[/.*/i],describe(r){const e=/^(.*)\/(.*) /,t=/^(.*)\/(.*)[ \t]\((.*)/,o=r.search("\\(")!==-1?t:e;return{name:N.getFirstMatch(o,r),version:N.getSecondMatch(o,r)}}}],Zu=[{test:[/Roku\/DVP/],describe(r){const e=N.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:Ie.Roku,version:e}}},{test:[/windows phone/i],describe(r){const e=N.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:Ie.WindowsPhone,version:e}}},{test:[/windows /i],describe(r){const e=N.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),t=N.getWindowsVersionName(e);return{name:Ie.Windows,version:e,versionName:t}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(r){const e={name:Ie.iOS},t=N.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return t&&(e.version=t),e}},{test:[/macintosh/i],describe(r){const e=N.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),t=N.getMacOSVersionName(e),n={name:Ie.MacOS,version:e};return t&&(n.versionName=t),n}},{test:[/(ipod|iphone|ipad)/i],describe(r){const e=N.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:Ie.iOS,version:e}}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e=N.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),t=N.getAndroidVersionName(e),n={name:Ie.Android,version:e};return t&&(n.versionName=t),n}},{test:[/(web|hpw)[o0]s/i],describe(r){const e=N.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),t={name:Ie.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e=N.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||N.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||N.getFirstMatch(/\bbb(\d+)/i,r);return{name:Ie.BlackBerry,version:e}}},{test:[/bada/i],describe(r){const e=N.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:Ie.Bada,version:e}}},{test:[/tizen/i],describe(r){const e=N.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:Ie.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:Ie.Linux}}},{test:[/CrOS/],describe(){return{name:Ie.ChromeOS}}},{test:[/PlayStation 4/],describe(r){const e=N.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:Ie.PlayStation4,version:e}}}],Xu=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(r){const e=N.getFirstMatch(/(can-l01)/i,r)&&"Nova",t={type:le.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:le.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:le.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:le.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:le.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:le.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:le.tablet}}},{test(r){const e=r.test(/ipod|iphone/i),t=r.test(/like (ipod|iphone)/i);return e&&!t},describe(r){const e=N.getFirstMatch(/(ipod|iphone)/i,r);return{type:le.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:le.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:le.mobile}}},{test(r){return r.getBrowserName(!0)==="blackberry"},describe(){return{type:le.mobile,vendor:"BlackBerry"}}},{test(r){return r.getBrowserName(!0)==="bada"},describe(){return{type:le.mobile}}},{test(r){return r.getBrowserName()==="windows phone"},describe(){return{type:le.mobile,vendor:"Microsoft"}}},{test(r){const e=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&e>=3},describe(){return{type:le.tablet}}},{test(r){return r.getOSName(!0)==="android"},describe(){return{type:le.mobile}}},{test(r){return r.getOSName(!0)==="macos"},describe(){return{type:le.desktop,vendor:"Apple"}}},{test(r){return r.getOSName(!0)==="windows"},describe(){return{type:le.desktop}}},{test(r){return r.getOSName(!0)==="linux"},describe(){return{type:le.desktop}}},{test(r){return r.getOSName(!0)==="playstation 4"},describe(){return{type:le.tv}}},{test(r){return r.getOSName(!0)==="roku"},describe(){return{type:le.tv}}}],Qu=[{test(r){return r.getBrowserName(!0)==="microsoft edge"},describe(r){if(/\sedg\//i.test(r))return{name:Qe.Blink};const t=N.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:Qe.EdgeHTML,version:t}}},{test:[/trident/i],describe(r){const e={name:Qe.Trident},t=N.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){return r.test(/presto/i)},describe(r){const e={name:Qe.Presto},t=N.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=r.test(/gecko/i),t=r.test(/like gecko/i);return e&&!t},describe(r){const e={name:Qe.Gecko},t=N.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Qe.Blink}}},{test:[/(apple)?webkit/i],describe(r){const e={name:Qe.WebKit},t=N.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}}];class ai{constructor(e,t=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},t!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=N.find(Ju,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=N.find(Zu,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=N.find(Xu,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=N.find(Qu,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return N.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const o={};let i=0;if(Object.keys(e).forEach(u=>{const f=e[u];typeof f=="string"?(o[u]=f,i+=1):typeof f=="object"&&(t[u]=f,n+=1)}),n>0){const u=Object.keys(t),f=N.find(u,c=>this.isOS(c));if(f){const c=this.satisfies(t[f]);if(c!==void 0)return c}const a=N.find(u,c=>this.isPlatform(c));if(a){const c=this.satisfies(t[a]);if(c!==void 0)return c}}if(i>0){const u=Object.keys(o),f=N.find(u,a=>this.isBrowser(a,!0));if(f!==void 0)return this.compareVersion(o[f])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let o=e.toLowerCase();const i=N.getBrowserTypeByAlias(o);return t&&i&&(o=i.toLowerCase()),o===n}compareVersion(e){let t=[0],n=e,o=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(n=e.substr(1),e[1]==="="?(o=!0,n=e.substr(2)):t=[],e[0]===">"?t.push(1):t.push(-1)):e[0]==="="?n=e.substr(1):e[0]==="~"&&(o=!0,n=e.substr(1)),t.indexOf(N.compareVersions(i,n,o))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(t=>this.is(t))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class ec{static getParser(e,t=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new ai(e,t)}static parse(e){return new ai(e).getResult()}static get BROWSER_MAP(){return Jo}static get ENGINE_MAP(){return Qe}static get OS_MAP(){return Ie}static get PLATFORMS_MAP(){return le}}var tc=function(r){var e=r.serviceId,t=r.clientVersion;return function(){return $u(void 0,void 0,void 0,function(){var n,o,i,s,u,f,a,c,h;return Wu(this,function(y){return n=!((i=window==null?void 0:window.navigator)===null||i===void 0)&&i.userAgent?ec.parse(window.navigator.userAgent):void 0,o=[["aws-sdk-js",t],["os/"+(((s=n==null?void 0:n.os)===null||s===void 0?void 0:s.name)||"other"),(u=n==null?void 0:n.os)===null||u===void 0?void 0:u.version],["lang/js"],["md/browser",((a=(f=n==null?void 0:n.browser)===null||f===void 0?void 0:f.name)!==null&&a!==void 0?a:"unknown")+"_"+((h=(c=n==null?void 0:n.browser)===null||c===void 0?void 0:c.version)!==null&&h!==void 0?h:"unknown")]],e&&o.push(["api/"+e,t]),[2,o]})})}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function rc(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nc(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}function ic(r){var e,t,n={};if(r=r.replace(/^\?/,""),r)try{for(var o=rc(r.split("&")),i=o.next();!i.done;i=o.next()){var s=i.value,u=nc(s.split("="),2),f=u[0],a=u[1],c=a===void 0?null:a;f=decodeURIComponent(f),c&&(c=decodeURIComponent(c)),f in n?Array.isArray(n[f])?n[f].push(c):n[f]=[n[f],c]:n[f]=c}}catch(h){e={error:h}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n}var oc=function(r){var e=new URL(r),t=e.hostname,n=e.pathname,o=e.port,i=e.protocol,s=e.search,u;return s&&(u=ic(s)),{hostname:t,port:o?parseInt(o):void 0,protocol:i,path:n,query:u}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pt=function(){return Pt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pt.apply(this,arguments)};function sc(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function ac(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var uc=function(r){var e;return Pt(Pt({},r),{tls:(e=r.tls)!==null&&e!==void 0?e:!0,endpoint:r.endpoint?cc(r):function(){return fc(r)},isCustomEndpoint:!!r.endpoint})},cc=function(r){var e=r.endpoint,t=r.urlParser;if(typeof e=="string"){var n=Promise.resolve(t(e));return function(){return n}}else if(typeof e=="object"){var o=Promise.resolve(e);return function(){return o}}return e},fc=function(r){return sc(void 0,void 0,void 0,function(){var e,t,n,o,i,s;return ac(this,function(u){switch(u.label){case 0:return e=r.tls,t=e===void 0?!0:e,[4,r.region()];case 1:if(n=u.sent(),o=new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/),!o.test(n))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(n)];case 2:if(i=((s=u.sent())!==null&&s!==void 0?s:{}).hostname,!i)throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+i)]}})})},lc=function(r){if(!r.region)throw new Error("Region is missing");return Pt(Pt({},r),{region:dc(r.region)})},dc=function(r){if(typeof r=="string"){var e=Promise.resolve(r);return function(){return e}}return r};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var It=function(){return It=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},It.apply(this,arguments)};function hc(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function gc(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var ui="content-length";function vc(r){var e=this;return function(t){return function(n){return hc(e,void 0,void 0,function(){var o,i,s,u,f;return gc(this,function(a){return o=n.request,Tt.isInstance(o)&&(i=o.body,s=o.headers,i&&Object.keys(s).map(function(c){return c.toLowerCase()}).indexOf(ui)===-1&&(u=r(i),u!==void 0&&(o.headers=It(It({},o.headers),(f={},f[ui]=String(u),f))))),[2,t(It(It({},n),{request:o}))]})})}}}var pc={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},yc=function(r){return{applyToStack:function(e){e.add(vc(r.bodyLengthChecker),pc)}}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function mc(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function wc(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var _c=function(r){return function(e){return function(t){return mc(void 0,void 0,void 0,function(){var n,o,i;return wc(this,function(s){return Tt.isInstance(t.request)?(n=t.request,o=(r.requestHandler.metadata||{}).handlerProtocol,i=o===void 0?"":o,i.indexOf("h2")>=0&&!n.headers[":authority"]?(delete n.headers.host,n.headers[":authority"]=""):n.headers.host||(n.headers.host=n.hostname),[2,e(t)]):[2,e(t)]})})}}},bc={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Sc=function(r){return{applyToStack:function(e){e.add(_c(r),bc)}}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ac(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(r);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(t[n[o]]=r[n[o]]);return t}function Ic(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function Ec(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var Cc=function(){return function(r,e){return function(t){return Ic(void 0,void 0,void 0,function(){var n,o,i,s,u,f,a,c,h;return Ec(this,function(y){switch(y.label){case 0:return n=e.clientName,o=e.commandName,i=e.inputFilterSensitiveLog,s=e.logger,u=e.outputFilterSensitiveLog,[4,r(t)];case 1:return f=y.sent(),s?(typeof s.info=="function"&&(a=f.output,c=a.$metadata,h=Ac(a,["$metadata"]),s.info({clientName:n,commandName:o,input:i(t.input),output:u(h),metadata:c})),[2,f]):[2,f]}})})}}},Tc={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Pc=function(r){return{applyToStack:function(e){e.add(Cc(),Tc)}}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cr=function(){return cr=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cr.apply(this,arguments)};function xc(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function Uc(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Rc(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ye=function(){return Ye=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ye.apply(this,arguments)};function Oc(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(r);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(t[n[o]]=r[n[o]]);return t}function He(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function ze(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function mt(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dc(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}function Fc(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Dc(arguments[e]));return r}var Mc="X-Amz-Algorithm",kc="X-Amz-Credential",Zo="X-Amz-Date",Nc="X-Amz-SignedHeaders",jc="X-Amz-Expires",Xo="X-Amz-Signature",Qo="X-Amz-Security-Token",es="authorization",ts=Zo.toLowerCase(),Bc="date",Lc=[es,ts,Bc],Kc=Xo.toLowerCase(),un="x-amz-content-sha256",qc=Qo.toLowerCase(),Hc={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},zc=/^proxy-/,Vc=/^sec-/,Fr="AWS4-HMAC-SHA256",Gc="AWS4-HMAC-SHA256-PAYLOAD",$c="UNSIGNED-PAYLOAD",Wc=50,rs="aws4_request",Yc=60*60*24*7,Zt={},Mr=[];function kr(r,e,t){return r+"/"+e+"/"+t+"/"+rs}var Jc=function(r,e,t,n,o){return He(void 0,void 0,void 0,function(){var i,s,u,f,a,c,h,y,_;return ze(this,function(b){switch(b.label){case 0:return[4,ci(r,e.secretAccessKey,e.accessKeyId)];case 1:if(i=b.sent(),s=t+":"+n+":"+o+":"+At(i)+":"+e.sessionToken,s in Zt)return[2,Zt[s]];for(Mr.push(s);Mr.length>Wc;)delete Zt[Mr.shift()];u="AWS4"+e.secretAccessKey,b.label=2;case 2:b.trys.push([2,7,8,9]),f=mt([t,n,o,rs]),a=f.next(),b.label=3;case 3:return a.done?[3,6]:(c=a.value,[4,ci(r,u,c)]);case 4:u=b.sent(),b.label=5;case 5:return a=f.next(),[3,3];case 6:return[3,9];case 7:return h=b.sent(),y={error:h},[3,9];case 8:try{a&&!a.done&&(_=f.return)&&_.call(f)}finally{if(y)throw y.error}return[7];case 9:return[2,Zt[s]=u]}})})};function ci(r,e,t){var n=new r(e);return n.update(t),n.digest()}function fi(r,e,t){var n,o,i=r.headers,s={};try{for(var u=mt(Object.keys(i).sort()),f=u.next();!f.done;f=u.next()){var a=f.value,c=a.toLowerCase();(c in Hc||e!=null&&e.has(c)||zc.test(c)||Vc.test(c))&&(!t||t&&!t.has(c))||(s[c]=i[a].trim().replace(/\s+/g," "))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return s}function Zc(r){var e,t,n=r.query,o=n===void 0?{}:n,i=[],s={},u=function(h){if(h.toLowerCase()===Kc)return"continue";i.push(h);var y=o[h];typeof y=="string"?s[h]=gt(h)+"="+gt(y):Array.isArray(y)&&(s[h]=y.slice(0).sort().reduce(function(_,b){return _.concat([gt(h)+"="+gt(b)])},[]).join("&"))};try{for(var f=mt(Object.keys(o).sort()),a=f.next();!a.done;a=f.next()){var c=a.value;u(c)}}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}return i.map(function(h){return s[h]}).filter(function(h){return h}).join("&")}var Xc=function(r){return typeof ArrayBuffer=="function"&&r instanceof ArrayBuffer||Object.prototype.toString.call(r)==="[object ArrayBuffer]"};function Nr(r,e){var t=r.headers,n=r.body;return He(this,void 0,void 0,function(){var o,i,s,u,f,a,c;return ze(this,function(h){switch(h.label){case 0:try{for(o=mt(Object.keys(t)),i=o.next();!i.done;i=o.next())if(s=i.value,s.toLowerCase()===un)return[2,t[s]]}catch(y){a={error:y}}finally{try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(a)throw a.error}}return n!=null?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return typeof n=="string"||ArrayBuffer.isView(n)||Xc(n)?(u=new e,u.update(n),f=At,[4,u.digest()]):[3,3];case 2:return[2,f.apply(void 0,[h.sent()])];case 3:return[2,$c]}})})}function Qc(r,e){var t,n;r=r.toLowerCase();try{for(var o=mt(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s=i.value;if(r===s.toLowerCase())return!0}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!1}function ns(r){var e=r.headers,t=r.query,n=Oc(r,["headers","query"]);return Ye(Ye({},n),{headers:Ye({},e),query:t?ef(t):void 0})}function ef(r){return Object.keys(r).reduce(function(e,t){var n,o=r[t];return Ye(Ye({},e),(n={},n[t]=Array.isArray(o)?Fc(o):o,n))},{})}function tf(r,e){var t,n,o;e===void 0&&(e={});var i=typeof r.clone=="function"?r.clone():ns(r),s=i.headers,u=i.query,f=u===void 0?{}:u;try{for(var a=mt(Object.keys(s)),c=a.next();!c.done;c=a.next()){var h=c.value,y=h.toLowerCase();y.substr(0,6)==="x-amz-"&&!(!((o=e.unhoistableHeaders)===null||o===void 0)&&o.has(y))&&(f[h]=s[h],delete s[h])}}catch(_){t={error:_}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return Ye(Ye({},r),{headers:s,query:f})}function li(r){var e,t;r=typeof r.clone=="function"?r.clone():ns(r);try{for(var n=mt(Object.keys(r.headers)),o=n.next();!o.done;o=n.next()){var i=o.value;Lc.indexOf(i.toLowerCase())>-1&&delete r.headers[i]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r}function rf(r){return nf(r).toISOString().replace(/\.\d{3}Z$/,"Z")}function nf(r){return typeof r=="number"?new Date(r*1e3):typeof r=="string"?Number(r)?new Date(Number(r)*1e3):new Date(r):r}var of=function(){function r(e){var t=e.applyChecksum,n=e.credentials,o=e.region,i=e.service,s=e.sha256,u=e.uriEscapePath,f=u===void 0?!0:u;this.service=i,this.sha256=s,this.uriEscapePath=f,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=sf(o),this.credentialProvider=af(n)}return r.prototype.presign=function(e,t){return t===void 0&&(t={}),He(this,void 0,void 0,function(){var n,o,i,s,u,f,a,c,h,y,_,b,E,C,O,T,M,q,z,V,Y,R,W,g;return ze(this,function(v){switch(v.label){case 0:return n=t.signingDate,o=n===void 0?new Date:n,i=t.expiresIn,s=i===void 0?3600:i,u=t.unsignableHeaders,f=t.unhoistableHeaders,a=t.signableHeaders,c=t.signingRegion,h=t.signingService,[4,this.credentialProvider()];case 1:return y=v.sent(),c==null?[3,2]:(b=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:b=v.sent(),v.label=4;case 4:return _=b,E=Xt(o),C=E.longDate,O=E.shortDate,s>Yc?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(T=kr(O,_,h??this.service),M=tf(li(e),{unhoistableHeaders:f}),y.sessionToken&&(M.query[Qo]=y.sessionToken),M.query[Mc]=Fr,M.query[kc]=y.accessKeyId+"/"+T,M.query[Zo]=C,M.query[jc]=s.toString(10),q=fi(M,u,a),M.query[Nc]=di(q),z=M.query,V=Xo,Y=this.getSignature,R=[C,T,this.getSigningKey(y,_,O,h)],W=this.createCanonicalRequest,g=[M,q],[4,Nr(e,this.sha256)]);case 5:return[4,Y.apply(this,R.concat([W.apply(this,g.concat([v.sent()]))]))];case 6:return z[V]=v.sent(),[2,M]}})})},r.prototype.sign=function(e,t){return He(this,void 0,void 0,function(){return ze(this,function(n){return typeof e=="string"?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]})})},r.prototype.signEvent=function(e,t){var n=e.headers,o=e.payload,i=t.signingDate,s=i===void 0?new Date:i,u=t.priorSignature,f=t.signingRegion,a=t.signingService;return He(this,void 0,void 0,function(){var c,h,y,_,b,E,C,O,T,M,q;return ze(this,function(z){switch(z.label){case 0:return f==null?[3,1]:(h=f,[3,3]);case 1:return[4,this.regionProvider()];case 2:h=z.sent(),z.label=3;case 3:return c=h,y=Xt(s),_=y.shortDate,b=y.longDate,E=kr(_,c,a??this.service),[4,Nr({headers:{},body:o},this.sha256)];case 4:return C=z.sent(),O=new this.sha256,O.update(n),M=At,[4,O.digest()];case 5:return T=M.apply(void 0,[z.sent()]),q=[Gc,b,E,u,T,C].join(`
`),[2,this.signString(q,{signingDate:s,signingRegion:c,signingService:a})]}})})},r.prototype.signString=function(e,t){var n=t===void 0?{}:t,o=n.signingDate,i=o===void 0?new Date:o,s=n.signingRegion,u=n.signingService;return He(this,void 0,void 0,function(){var f,a,c,h,y,_,b,E;return ze(this,function(C){switch(C.label){case 0:return[4,this.credentialProvider()];case 1:return f=C.sent(),s==null?[3,2]:(c=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:c=C.sent(),C.label=4;case 4:return a=c,h=Xt(i).shortDate,b=(_=this.sha256).bind,[4,this.getSigningKey(f,a,h,u)];case 5:return y=new(b.apply(_,[void 0,C.sent()])),y.update(e),E=At,[4,y.digest()];case 6:return[2,E.apply(void 0,[C.sent()])]}})})},r.prototype.signRequest=function(e,t){var n=t===void 0?{}:t,o=n.signingDate,i=o===void 0?new Date:o,s=n.signableHeaders,u=n.unsignableHeaders,f=n.signingRegion,a=n.signingService;return He(this,void 0,void 0,function(){var c,h,y,_,b,E,C,O,T,M,q;return ze(this,function(z){switch(z.label){case 0:return[4,this.credentialProvider()];case 1:return c=z.sent(),f==null?[3,2]:(y=f,[3,4]);case 2:return[4,this.regionProvider()];case 3:y=z.sent(),z.label=4;case 4:return h=y,_=li(e),b=Xt(i),E=b.longDate,C=b.shortDate,O=kr(C,h,a??this.service),_.headers[ts]=E,c.sessionToken&&(_.headers[qc]=c.sessionToken),[4,Nr(_,this.sha256)];case 5:return T=z.sent(),!Qc(un,_.headers)&&this.applyChecksum&&(_.headers[un]=T),M=fi(_,u,s),[4,this.getSignature(E,O,this.getSigningKey(c,h,C,a),this.createCanonicalRequest(_,M,T))];case 6:return q=z.sent(),_.headers[es]=Fr+" "+("Credential="+c.accessKeyId+"/"+O+", ")+("SignedHeaders="+di(M)+", ")+("Signature="+q),[2,_]}})})},r.prototype.createCanonicalRequest=function(e,t,n){var o=Object.keys(t).sort();return e.method+`
`+this.getCanonicalPath(e)+`
`+Zc(e)+`
`+o.map(function(i){return i+":"+t[i]}).join(`
`)+`

`+o.join(";")+`
`+n},r.prototype.createStringToSign=function(e,t,n){return He(this,void 0,void 0,function(){var o,i;return ze(this,function(s){switch(s.label){case 0:return o=new this.sha256,o.update(n),[4,o.digest()];case 1:return i=s.sent(),[2,Fr+`
`+e+`
`+t+`
`+At(i)]}})})},r.prototype.getCanonicalPath=function(e){var t=e.path;if(this.uriEscapePath){var n=encodeURIComponent(t.replace(/^\//,""));return"/"+n.replace(/%2F/g,"/")}return t},r.prototype.getSignature=function(e,t,n,o){return He(this,void 0,void 0,function(){var i,s,u,f,a;return ze(this,function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,o)];case 1:return i=c.sent(),f=(u=this.sha256).bind,[4,n];case 2:return s=new(f.apply(u,[void 0,c.sent()])),s.update(i),a=At,[4,s.digest()];case 3:return[2,a.apply(void 0,[c.sent()])]}})})},r.prototype.getSigningKey=function(e,t,n,o){return Jc(this.sha256,e,n,t,o||this.service)},r}(),Xt=function(r){var e=rf(r).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.substr(0,8)}},di=function(r){return Object.keys(r).sort().join(";")},sf=function(r){if(typeof r=="string"){var e=Promise.resolve(r);return function(){return e}}else return r},af=function(r){if(typeof r=="object"){var e=Promise.resolve(r);return function(){return e}}else return r};function uf(r){var e=this,t=r.credentials||r.credentialDefaultProvider(r),n=jr(t),o=r.signingEscapePath,i=o===void 0?!0:o,s=r.systemClockOffset,u=s===void 0?r.systemClockOffset||0:s,f=r.sha256,a;return r.signer?a=jr(r.signer):a=function(){return jr(r.region)().then(function(c){return xc(e,void 0,void 0,function(){return Uc(this,function(h){switch(h.label){case 0:return[4,r.regionInfoProvider(c)];case 1:return[2,[h.sent()||{},c]]}})})}).then(function(c){var h=Rc(c,2),y=h[0],_=h[1],b=y.signingRegion,E=y.signingService;return r.signingRegion=r.signingRegion||b||_,r.signingName=r.signingName||E||r.serviceId,new of({credentials:n,region:r.signingRegion,service:r.signingName,sha256:f,uriEscapePath:i})})},cr(cr({},r),{systemClockOffset:u,signingEscapePath:i,credentials:n,signer:a})}function jr(r){if(typeof r=="object"){var e=Promise.resolve(r);return function(){return e}}return r}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xt=function(){return xt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xt.apply(this,arguments)};function cf(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function ff(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function is(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}function hi(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(is(arguments[e]));return r}function lf(r){return xt(xt({},r),{customUserAgent:typeof r.customUserAgent=="string"?[[r.customUserAgent]]:r.customUserAgent})}var Br="user-agent",df="x-amz-user-agent",gi=" ",hf=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,gf=function(r){return function(e,t){return function(n){return cf(void 0,void 0,void 0,function(){var o,i,s,u,f,a,c,h;return ff(this,function(y){switch(y.label){case 0:return o=n.request,Tt.isInstance(o)?(i=o.headers,s=((c=t==null?void 0:t.userAgent)===null||c===void 0?void 0:c.map(Lr))||[],[4,r.defaultUserAgentProvider()]):[2,e(n)];case 1:return u=y.sent().map(Lr),f=((h=r==null?void 0:r.customUserAgent)===null||h===void 0?void 0:h.map(Lr))||[],i[df]=hi(u,s,f).join(gi),a=hi(u.filter(function(_){return _.startsWith("aws-sdk-")}),f).join(gi),r.runtime!=="browser"&&a&&(i[Br]=i[Br]?i[Br]+" "+a:a),[2,e(xt(xt({},n),{request:o}))]}})})}}},Lr=function(r){var e=is(r,2),t=e[0],n=e[1],o=t.indexOf("/"),i=t.substring(0,o),s=t.substring(o+1);return i==="api"&&(s=s.toLowerCase()),[i,s,n].filter(function(u){return u&&u.length>0}).map(function(u){return u==null?void 0:u.replace(hf,"_")}).join("/")},vf={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},pf=function(r){return{applyToStack:function(e){e.add(gf(r),vf)}}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Le=function(){return Le=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Le.apply(this,arguments)};function yf(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mf(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}function Kr(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(mf(arguments[e]));return r}var fr=function(){var r=[],e=[],t=new Set,n=function(c){return c.sort(function(h,y){return vi[y.step]-vi[h.step]||pi[y.priority||"normal"]-pi[h.priority||"normal"]})},o=function(c){var h=!1,y=function(_){return _.name&&_.name===c?(h=!0,t.delete(c),!1):!0};return r=r.filter(y),e=e.filter(y),h},i=function(c){var h=!1,y=function(_){return _.middleware===c?(h=!0,_.name&&t.delete(_.name),!1):!0};return r=r.filter(y),e=e.filter(y),h},s=function(c){return r.forEach(function(h){c.add(h.middleware,Le({},h))}),e.forEach(function(h){c.addRelativeTo(h.middleware,Le({},h))}),c},u=function(c){var h=[];return c.before.forEach(function(y){y.before.length===0&&y.after.length===0?h.push(y):h.push.apply(h,Kr(u(y)))}),h.push(c),c.after.reverse().forEach(function(y){y.before.length===0&&y.after.length===0?h.push(y):h.push.apply(h,Kr(u(y)))}),h},f=function(){var c=[],h=[],y={};r.forEach(function(b){var E=Le(Le({},b),{before:[],after:[]});E.name&&(y[E.name]=E),c.push(E)}),e.forEach(function(b){var E=Le(Le({},b),{before:[],after:[]});E.name&&(y[E.name]=E),h.push(E)}),h.forEach(function(b){if(b.toMiddleware){var E=y[b.toMiddleware];if(E===void 0)throw new Error(b.toMiddleware+" is not found when adding "+(b.name||"anonymous")+" middleware "+b.relation+" "+b.toMiddleware);b.relation==="after"&&E.after.push(b),b.relation==="before"&&E.before.push(b)}});var _=n(c).map(u).reduce(function(b,E){return b.push.apply(b,Kr(E)),b},[]);return _.map(function(b){return b.middleware})},a={add:function(c,h){h===void 0&&(h={});var y=h.name,_=h.override,b=Le({step:"initialize",priority:"normal",middleware:c},h);if(y){if(t.has(y)){if(!_)throw new Error("Duplicate middleware name '"+y+"'");var E=r.findIndex(function(O){return O.name===y}),C=r[E];if(C.step!==b.step||C.priority!==b.priority)throw new Error('"'+y+'" middleware with '+C.priority+" priority in "+C.step+" step cannot be "+("overridden by same-name middleware with "+b.priority+" priority in "+b.step+" step."));r.splice(E,1)}t.add(y)}r.push(b)},addRelativeTo:function(c,h){var y=h.name,_=h.override,b=Le({middleware:c},h);if(y){if(t.has(y)){if(!_)throw new Error("Duplicate middleware name '"+y+"'");var E=e.findIndex(function(O){return O.name===y}),C=e[E];if(C.toMiddleware!==b.toMiddleware||C.relation!==b.relation)throw new Error('"'+y+'" middleware '+C.relation+' "'+C.toMiddleware+'" middleware cannot be overridden '+("by same-name middleware "+b.relation+' "'+b.toMiddleware+'" middleware.'));e.splice(E,1)}t.add(y)}e.push(b)},clone:function(){return s(fr())},use:function(c){c.applyToStack(a)},remove:function(c){return typeof c=="string"?o(c):i(c)},removeByTag:function(c){var h=!1,y=function(_){var b=_.tags,E=_.name;return b&&b.includes(c)?(E&&t.delete(E),h=!0,!1):!0};return r=r.filter(y),e=e.filter(y),h},concat:function(c){var h=s(fr());return h.use(c),h},applyToStack:s,resolve:function(c,h){var y,_;try{for(var b=yf(f().reverse()),E=b.next();!E.done;E=b.next()){var C=E.value;c=C(c,h)}}catch(O){y={error:O}}finally{try{E&&!E.done&&(_=b.return)&&_.call(b)}finally{if(y)throw y.error}}return c}};return a},vi={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},pi={high:3,normal:2,low:1},wf=function(){function r(e){this.middlewareStack=fr(),this.config=e}return r.prototype.send=function(e,t,n){var o=typeof t!="function"?t:void 0,i=typeof t=="function"?t:n,s=e.resolveMiddleware(this.middlewareStack,this.config,o);if(i)s(e).then(function(u){return i(null,u.output)},function(u){return i(u)}).catch(function(){});else return s(e).then(function(u){return u.output})},r.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},r}(),os=function(){function r(){this.middlewareStack=fr()}return r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cn=function(r,e){return cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},cn(r,e)};function _f(r,e){cn(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function bf(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}function Sf(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(bf(arguments[e]));return r}var lr=function(){var r=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,Sf([null],arguments)),t=new e;return Object.setPrototypeOf(t,r.prototype),t};lr.prototype=Object.create(String.prototype,{constructor:{value:lr,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(lr,String);(function(r){_f(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.deserializeJSON=function(){return JSON.parse(r.prototype.toString.call(this))},e.prototype.toJSON=function(){return r.prototype.toString.call(this)},e.fromObject=function(t){return t instanceof e?t:t instanceof String||typeof t=="string"?new e(t):new e(JSON.stringify(t))},e})(lr);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dr=function(){return dr=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dr.apply(this,arguments)};function ss(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function as(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var Af=function(r,e){return function(t,n){return function(o){return ss(void 0,void 0,void 0,function(){var i,s;return as(this,function(u){switch(u.label){case 0:return[4,t(o)];case 1:return i=u.sent().response,[4,e(i,r)];case 2:return s=u.sent(),[2,{response:i,output:s}]}})})}}},If=function(r,e){return function(t,n){return function(o){return ss(void 0,void 0,void 0,function(){var i;return as(this,function(s){switch(s.label){case 0:return[4,e(o.input,r)];case 1:return i=s.sent(),[2,t(dr(dr({},o),{request:i}))]}})})}}},Ef={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Cf={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function us(r,e,t){return{applyToStack:function(n){n.add(Af(r,t),Ef),n.add(If(r,e),Cf)}}}var rt=new Ze("CognitoCredentials"),Tf=new Promise(function(r,e){if(!Je().isBrowser)return rt.debug("not in the browser, directly resolved"),r();var t=window.gapi&&window.gapi.auth2?window.gapi.auth2:null;if(t)return rt.debug("google api already loaded"),r();setTimeout(function(){return r()},2e3)}),Pf=function(){function r(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return r.prototype.refreshGoogleToken=function(){return ve(this,void 0,void 0,function(){return he(this,function(e){switch(e.label){case 0:return this.initialized?[3,2]:(rt.debug("need to wait for the Google SDK loaded"),[4,Tf]);case 1:e.sent(),this.initialized=!0,rt.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})})},r.prototype._refreshGoogleTokenImpl=function(){var e=null;return Je().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise(function(t,n){e.getAuthInstance().then(function(o){o||(rt.debug("google Auth undefined"),n(new ht("google Auth undefined")));var i=o.currentUser.get();i.isSignedIn()?(rt.debug("refreshing the google access token"),i.reloadAuthResponse().then(function(s){var u=s.id_token,f=s.expires_at;t({token:u,expires_at:f})}).catch(function(s){s&&s.error==="network_error"?n("Network error reloading google auth response"):n(new ht("Failed to reload google auth response"))})):n(new ht("User is not signed in with Google"))}).catch(function(o){rt.debug("Failed to refresh google token",o),n(new ht("Failed to refresh google token"))})}):(rt.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},r}(),ft=new Ze("CognitoCredentials"),xf=new Promise(function(r,e){if(!Je().isBrowser)return ft.debug("not in the browser, directly resolved"),r();var t=window.FB;if(t)return ft.debug("FB SDK already loaded"),r();setTimeout(function(){return r()},2e3)}),Uf=function(){function r(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return r.prototype.refreshFacebookToken=function(){return ve(this,void 0,void 0,function(){return he(this,function(e){switch(e.label){case 0:return this.initialized?[3,2]:(ft.debug("need to wait for the Facebook SDK loaded"),[4,xf]);case 1:e.sent(),this.initialized=!0,ft.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})})},r.prototype._refreshFacebookTokenImpl=function(){var e=null;if(Je().isBrowser&&(e=window.FB),!e){var t="no fb sdk available";return ft.debug(t),Promise.reject(new ht(t))}return new Promise(function(n,o){e.getLoginStatus(function(i){if(!i||!i.authResponse){var s="no response from facebook when refreshing the jwt token";ft.debug(s),o(new ht(s))}else{var u=i.authResponse,f=u.accessToken,a=u.expiresIn,c=new Date,h=a*1e3+c.getTime();if(!f){var s="the jwtToken is undefined";ft.debug(s),o(new ht(s))}n({token:f,expires_at:h})}},{scope:"public_profile,email"})})},r}(),Rf=new Pf,Of=new Uf,at={},Df=function(){function r(){}return r.setItem=function(e,t){return at[e]=t,at[e]},r.getItem=function(e){return Object.prototype.hasOwnProperty.call(at,e)?at[e]:void 0},r.removeItem=function(e){return delete at[e]},r.clear=function(){return at={},at},r}(),cs=function(){function r(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch{this.storageWindow=Df}}return r.prototype.getStorage=function(){return this.storageWindow},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fn(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function ln(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Ff(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}const Mf="@aws-sdk/client-cognito-identity",kf="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",Nf="3.6.1",jf={clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js",test:"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},Bf="./dist/cjs/index.js",Lf="./types/index.d.ts",Kf="./dist/es/index.js",qf={"./runtimeConfig":"./runtimeConfig.browser"},Hf=!1,zf={"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1",tslib:"^2.0.0"},Vf={"@aws-sdk/client-documentation-generator":"3.6.1","@aws-sdk/client-iam":"3.6.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},Gf={node:">=10.0.0"},$f={"<4.0":{"types/*":["types/ts3.4/*"]}},Wf={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},Yf="Apache-2.0",Jf="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",Zf={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},Xf={name:Mf,description:kf,version:Nf,scripts:jf,main:Bf,types:Lf,module:Kf,browser:qf,"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:Hf,dependencies:zf,devDependencies:Vf,engines:Gf,typesVersions:$f,author:Wf,license:Yf,homepage:Jf,repository:Zf};var yi="cognito-identity.{region}.amazonaws.com",Qf="cognito-identity.{region}.amazonaws.com.cn",el="cognito-identity.{region}.c2s.ic.gov",tl="cognito-identity.{region}.sc2s.sgov.gov",rl="cognito-identity.{region}.amazonaws.com",nl=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),il=new Set(["cn-north-1","cn-northwest-1"]),ol=new Set(["us-iso-east-1"]),sl=new Set(["us-isob-east-1"]),al=new Set(["us-gov-east-1","us-gov-west-1"]),ul=function(r,e){var t=void 0;switch(r){case"ap-northeast-1":t={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":t={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":t={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":t={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":t={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":t={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":t={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":t={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":t={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":t={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":t={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":t={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":t={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":t={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":t={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":t={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":t={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":t={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":t={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":t={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":t={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":t={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:nl.has(r)&&(t={hostname:yi.replace("{region}",r),partition:"aws"}),il.has(r)&&(t={hostname:Qf.replace("{region}",r),partition:"aws-cn"}),ol.has(r)&&(t={hostname:el.replace("{region}",r),partition:"aws-iso"}),sl.has(r)&&(t={hostname:tl.replace("{region}",r),partition:"aws-iso-b"}),al.has(r)&&(t={hostname:rl.replace("{region}",r),partition:"aws-us-gov"}),t===void 0&&(t={hostname:yi.replace("{region}",r),partition:"aws"})}return Promise.resolve(D({signingService:"cognito-identity"},t))},mi={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:ul,serviceId:"Cognito Identity",urlParser:oc},cl=D(D({},mi),{runtime:"browser",base64Decoder:Vo,base64Encoder:tu,bodyLengthChecker:Gu,credentialDefaultProvider:function(r){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:tc({serviceId:mi.serviceId,clientVersion:Xf.version}),maxAttempts:Nn,region:su("Region is missing"),requestHandler:new Qa,sha256:jo.Sha256,streamCollector:ru,utf8Decoder:Ro,utf8Encoder:Oo}),fl=function(r){On(e,r);function e(t){var n=this,o=D(D({},cl),t),i=lc(o),s=uc(i),u=uf(s),f=zu(u),a=f,c=lf(a);return n=r.call(this,c)||this,n.config=c,n.middlewareStack.use(lu(n.config)),n.middlewareStack.use(yc(n.config)),n.middlewareStack.use(Sc(n.config)),n.middlewareStack.use(Pc(n.config)),n.middlewareStack.use(pf(n.config)),n}return e.prototype.destroy=function(){r.prototype.destroy.call(this)},e}(wf),wi;(function(r){r.AUTHENTICATED_ROLE="AuthenticatedRole",r.DENY="Deny"})(wi||(wi={}));var _i;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(_i||(_i={}));var bi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(bi||(bi={}));var Si;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Si||(Si={}));var Ai;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Ai||(Ai={}));var Ii;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Ii||(Ii={}));var Ei;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Ei||(Ei={}));var Ci;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Ci||(Ci={}));var Ti;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Ti||(Ti={}));var Pi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Pi||(Pi={}));var xi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(xi||(xi={}));var Ui;(function(r){r.ACCESS_DENIED="AccessDenied",r.INTERNAL_SERVER_ERROR="InternalServerError"})(Ui||(Ui={}));var Ri;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Ri||(Ri={}));var Oi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Oi||(Oi={}));var Di;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Di||(Di={}));var Fi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Fi||(Fi={}));var Mi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Mi||(Mi={}));var ki;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(ki||(ki={}));var Ni;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Ni||(Ni={}));var ji;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(ji||(ji={}));var dn;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(dn||(dn={}));var Bi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Bi||(Bi={}));var hn;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(hn||(hn={}));var Li;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Li||(Li={}));var gn;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(gn||(gn={}));var vn;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(vn||(vn={}));var Ki;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Ki||(Ki={}));var qi;(function(r){r.CONTAINS="Contains",r.EQUALS="Equals",r.NOT_EQUAL="NotEqual",r.STARTS_WITH="StartsWith"})(qi||(qi={}));var Hi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Hi||(Hi={}));var zi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(zi||(zi={}));var Vi;(function(r){r.RULES="Rules",r.TOKEN="Token"})(Vi||(Vi={}));var Gi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Gi||(Gi={}));var $i;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})($i||($i={}));var Wi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Wi||(Wi={}));var Yi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Yi||(Yi={}));var Ji;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Ji||(Ji={}));var Zi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Zi||(Zi={}));var Xi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Xi||(Xi={}));var Qi;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(Qi||(Qi={}));var eo;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(eo||(eo={}));var to;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(to||(to={}));var ro;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(ro||(ro={}));var no;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(no||(no={}));var io;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(io||(io={}));var oo;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(oo||(oo={}));var so;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(so||(so={}));var ao;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(ao||(ao={}));var uo;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(uo||(uo={}));var co;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(co||(co={}));var fo;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(fo||(fo={}));var lo;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(lo||(lo={}));var ho;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(ho||(ho={}));var go;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(go||(go={}));var vo;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(vo||(vo={}));var po;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(po||(po={}));var yo;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(yo||(yo={}));var mo;(function(r){r.filterSensitiveLog=function(e){return D({},e)}})(mo||(mo={}));var ll=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n;return Ae(this,function(o){return t={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},n=JSON.stringify(wl(r)),[2,ms(e,t,"/",void 0,n)]})})},dl=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n;return Ae(this,function(o){return t={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},n=JSON.stringify(_l(r)),[2,ms(e,t,"/",void 0,n)]})})},hl=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){switch(i.label){case 0:return r.statusCode>=300?[2,gl(r,e)]:[4,Sr(r.body,e)];case 1:return t=i.sent(),n={},n=Al(t),o=D({$metadata:ie(r)},n),[2,Promise.resolve(o)]}})})},gl=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o,i,s,u,f,a,c,h,y,_,b,E,C,O;return Ae(this,function(T){switch(T.label){case 0:return n=[D({},r)],O={},[4,Sr(r.body,e)];case 1:switch(t=D.apply(void 0,n.concat([(O.body=T.sent(),O)])),i="UnknownError",i=ws(r,t.body),s=i,s){case"ExternalServiceException":return[3,2];case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":return[3,4];case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":return[3,6];case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":return[3,8];case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":return[3,10];case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":return[3,12];case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":return[3,14];case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":return[3,16];case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return u=[{}],[4,fs(t)];case 3:return o=D.apply(void 0,[D.apply(void 0,u.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 4:return f=[{}],[4,ls(t)];case 5:return o=D.apply(void 0,[D.apply(void 0,f.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 6:return a=[{}],[4,yl(t)];case 7:return o=D.apply(void 0,[D.apply(void 0,a.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 8:return c=[{}],[4,ds(t)];case 9:return o=D.apply(void 0,[D.apply(void 0,c.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 10:return h=[{}],[4,hs(t)];case 11:return o=D.apply(void 0,[D.apply(void 0,h.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 12:return y=[{}],[4,gs(t)];case 13:return o=D.apply(void 0,[D.apply(void 0,y.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 14:return _=[{}],[4,vs(t)];case 15:return o=D.apply(void 0,[D.apply(void 0,_.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 16:return b=[{}],[4,ps(t)];case 17:return o=D.apply(void 0,[D.apply(void 0,b.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 18:E=t.body,i=E.code||E.Code||i,o=D(D({},E),{name:""+i,message:E.message||E.Message||i,$fault:"client",$metadata:ie(r)}),T.label=19;case 19:return C=o.message||o.Message||i,o.message=C,delete o.Message,[2,Promise.reject(Object.assign(new Error(C),o))]}})})},vl=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){switch(i.label){case 0:return r.statusCode>=300?[2,pl(r,e)]:[4,Sr(r.body,e)];case 1:return t=i.sent(),n={},n=Il(t),o=D({$metadata:ie(r)},n),[2,Promise.resolve(o)]}})})},pl=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o,i,s,u,f,a,c,h,y,_,b,E,C,O;return Ae(this,function(T){switch(T.label){case 0:return n=[D({},r)],O={},[4,Sr(r.body,e)];case 1:switch(t=D.apply(void 0,n.concat([(O.body=T.sent(),O)])),i="UnknownError",i=ws(r,t.body),s=i,s){case"ExternalServiceException":return[3,2];case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":return[3,4];case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":return[3,6];case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":return[3,8];case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":return[3,10];case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":return[3,12];case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":return[3,14];case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":return[3,16];case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return u=[{}],[4,fs(t)];case 3:return o=D.apply(void 0,[D.apply(void 0,u.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 4:return f=[{}],[4,ls(t)];case 5:return o=D.apply(void 0,[D.apply(void 0,f.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 6:return a=[{}],[4,ds(t)];case 7:return o=D.apply(void 0,[D.apply(void 0,a.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 8:return c=[{}],[4,ml(t)];case 9:return o=D.apply(void 0,[D.apply(void 0,c.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 10:return h=[{}],[4,hs(t)];case 11:return o=D.apply(void 0,[D.apply(void 0,h.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 12:return y=[{}],[4,gs(t)];case 13:return o=D.apply(void 0,[D.apply(void 0,y.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 14:return _=[{}],[4,vs(t)];case 15:return o=D.apply(void 0,[D.apply(void 0,_.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 16:return b=[{}],[4,ps(t)];case 17:return o=D.apply(void 0,[D.apply(void 0,b.concat([T.sent()])),{name:i,$metadata:ie(r)}]),[3,19];case 18:E=t.body,i=E.code||E.Code||i,o=D(D({},E),{name:""+i,message:E.message||E.Message||i,$fault:"client",$metadata:ie(r)}),T.label=19;case 19:return C=o.message||o.Message||i,o.message=C,delete o.Message,[2,Promise.reject(Object.assign(new Error(C),o))]}})})},fs=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){return t=r.body,n=Sl(t),o=D({name:"ExternalServiceException",$fault:"client",$metadata:ie(r)},n),[2,o]})})},ls=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){return t=r.body,n=El(t),o=D({name:"InternalErrorException",$fault:"server",$metadata:ie(r)},n),[2,o]})})},yl=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){return t=r.body,n=Cl(t),o=D({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:ie(r)},n),[2,o]})})},ds=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){return t=r.body,n=Tl(t),o=D({name:"InvalidParameterException",$fault:"client",$metadata:ie(r)},n),[2,o]})})},ml=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){return t=r.body,n=Pl(t),o=D({name:"LimitExceededException",$fault:"client",$metadata:ie(r)},n),[2,o]})})},hs=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){return t=r.body,n=xl(t),o=D({name:"NotAuthorizedException",$fault:"client",$metadata:ie(r)},n),[2,o]})})},gs=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){return t=r.body,n=Ul(t),o=D({name:"ResourceConflictException",$fault:"client",$metadata:ie(r)},n),[2,o]})})},vs=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){return t=r.body,n=Rl(t),o=D({name:"ResourceNotFoundException",$fault:"client",$metadata:ie(r)},n),[2,o]})})},ps=function(r,e){return Se(void 0,void 0,void 0,function(){var t,n,o;return Ae(this,function(i){return t=r.body,n=Ol(t),o=D({name:"TooManyRequestsException",$fault:"client",$metadata:ie(r)},n),[2,o]})})},wl=function(r,e){return D(D(D({},r.CustomRoleArn!==void 0&&r.CustomRoleArn!==null&&{CustomRoleArn:r.CustomRoleArn}),r.IdentityId!==void 0&&r.IdentityId!==null&&{IdentityId:r.IdentityId}),r.Logins!==void 0&&r.Logins!==null&&{Logins:ys(r.Logins)})},_l=function(r,e){return D(D(D({},r.AccountId!==void 0&&r.AccountId!==null&&{AccountId:r.AccountId}),r.IdentityPoolId!==void 0&&r.IdentityPoolId!==null&&{IdentityPoolId:r.IdentityPoolId}),r.Logins!==void 0&&r.Logins!==null&&{Logins:ys(r.Logins)})},ys=function(r,e){return Object.entries(r).reduce(function(t,n){var o,i=_a(n,2),s=i[0],u=i[1];return u===null?t:D(D({},t),(o={},o[s]=u,o))},{})},bl=function(r,e){return{AccessKeyId:r.AccessKeyId!==void 0&&r.AccessKeyId!==null?r.AccessKeyId:void 0,Expiration:r.Expiration!==void 0&&r.Expiration!==null?new Date(Math.round(r.Expiration*1e3)):void 0,SecretKey:r.SecretKey!==void 0&&r.SecretKey!==null?r.SecretKey:void 0,SessionToken:r.SessionToken!==void 0&&r.SessionToken!==null?r.SessionToken:void 0}},Sl=function(r,e){return{message:r.message!==void 0&&r.message!==null?r.message:void 0}},Al=function(r,e){return{Credentials:r.Credentials!==void 0&&r.Credentials!==null?bl(r.Credentials):void 0,IdentityId:r.IdentityId!==void 0&&r.IdentityId!==null?r.IdentityId:void 0}},Il=function(r,e){return{IdentityId:r.IdentityId!==void 0&&r.IdentityId!==null?r.IdentityId:void 0}},El=function(r,e){return{message:r.message!==void 0&&r.message!==null?r.message:void 0}},Cl=function(r,e){return{message:r.message!==void 0&&r.message!==null?r.message:void 0}},Tl=function(r,e){return{message:r.message!==void 0&&r.message!==null?r.message:void 0}},Pl=function(r,e){return{message:r.message!==void 0&&r.message!==null?r.message:void 0}},xl=function(r,e){return{message:r.message!==void 0&&r.message!==null?r.message:void 0}},Ul=function(r,e){return{message:r.message!==void 0&&r.message!==null?r.message:void 0}},Rl=function(r,e){return{message:r.message!==void 0&&r.message!==null?r.message:void 0}},Ol=function(r,e){return{message:r.message!==void 0&&r.message!==null?r.message:void 0}},ie=function(r){var e;return{httpStatusCode:r.statusCode,requestId:(e=r.headers["x-amzn-requestid"])!==null&&e!==void 0?e:r.headers["x-amzn-request-id"],extendedRequestId:r.headers["x-amz-id-2"],cfId:r.headers["x-amz-cf-id"]}},Dl=function(r,e){return r===void 0&&(r=new Uint8Array),r instanceof Uint8Array?Promise.resolve(r):e.streamCollector(r)||Promise.resolve(new Uint8Array)},Fl=function(r,e){return Dl(r,e).then(function(t){return e.utf8Encoder(t)})},ms=function(r,e,t,n,o){return Se(void 0,void 0,void 0,function(){var i,s,u,f,a,c;return Ae(this,function(h){switch(h.label){case 0:return[4,r.endpoint()];case 1:return i=h.sent(),s=i.hostname,u=i.protocol,f=u===void 0?"https":u,a=i.port,c={protocol:f,hostname:s,port:a,method:"POST",path:t,headers:e},n!==void 0&&(c.hostname=n),o!==void 0&&(c.body=o),[2,new Tt(c)]}})})},Sr=function(r,e){return Fl(r,e).then(function(t){return t.length?JSON.parse(t):{}})},ws=function(r,e){var t=function(i,s){return Object.keys(i).find(function(u){return u.toLowerCase()===s.toLowerCase()})},n=function(i){var s=i;return s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},o=t(r.headers,"x-amzn-errortype");return o!==void 0?n(r.headers[o]):e.code!==void 0?n(e.code):e.__type!==void 0?n(e.__type):""},pn=function(r){On(e,r);function e(t){var n=r.call(this)||this;return n.input=t,n}return e.prototype.resolveMiddleware=function(t,n,o){this.middlewareStack.use(us(n,this.serialize,this.deserialize));var i=t.concat(this.middlewareStack),s=n.logger,u="CognitoIdentityClient",f="GetCredentialsForIdentityCommand",a={logger:s,clientName:u,commandName:f,inputFilterSensitiveLog:dn.filterSensitiveLog,outputFilterSensitiveLog:hn.filterSensitiveLog},c=n.requestHandler;return i.resolve(function(h){return c.handle(h.request,o||{})},a)},e.prototype.serialize=function(t,n){return ll(t,n)},e.prototype.deserialize=function(t,n){return hl(t,n)},e}(os),Nt=function(r){On(e,r);function e(t){var n=r.call(this)||this;return n.input=t,n}return e.prototype.resolveMiddleware=function(t,n,o){this.middlewareStack.use(us(n,this.serialize,this.deserialize));var i=t.concat(this.middlewareStack),s=n.logger,u="CognitoIdentityClient",f="GetIdCommand",a={logger:s,clientName:u,commandName:f,inputFilterSensitiveLog:gn.filterSensitiveLog,outputFilterSensitiveLog:vn.filterSensitiveLog},c=n.requestHandler;return i.resolve(function(h){return c.handle(h.request,o||{})},a)},e.prototype.serialize=function(t,n){return dl(t,n)},e.prototype.deserialize=function(t,n){return vl(t,n)},e}(os);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yn=function(r,e){return yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},yn(r,e)};function Ml(r,e){yn(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ar=function(r){Ml(e,r);function e(t,n){n===void 0&&(n=!0);var o=r.call(this,t)||this;return o.tryNextLink=n,o}return e}(Error);function _s(r){return Promise.all(Object.keys(r).reduce(function(e,t){var n=r[t];return typeof n=="string"?e.push([t,n]):e.push(n().then(function(o){return[t,o]})),e},[])).then(function(e){return e.reduce(function(t,n){var o=Ff(n,2),i=o[0],s=o[1];return t[i]=s,t},{})})}function Mt(r){var e=this;return function(){return fn(e,void 0,void 0,function(){var t,n,o,i,s,u,f,a,c,h,y,_,b;return ln(this,function(E){switch(E.label){case 0:return h=(c=r.client).send,y=pn.bind,b={CustomRoleArn:r.customRoleArn,IdentityId:r.identityId},r.logins?[4,_s(r.logins)]:[3,2];case 1:return _=E.sent(),[3,3];case 2:_=void 0,E.label=3;case 3:return[4,h.apply(c,[new(y.apply(pn,[void 0,(b.Logins=_,b)]))])];case 4:return t=E.sent().Credentials,n=t===void 0?Nl():t,o=n.AccessKeyId,i=o===void 0?kl():o,s=n.Expiration,u=n.SecretKey,f=u===void 0?jl():u,a=n.SessionToken,[2,{identityId:r.identityId,accessKeyId:i,secretAccessKey:f,sessionToken:a,expiration:s}]}})})}}function kl(){throw new Ar("Response from Amazon Cognito contained no access key ID")}function Nl(){throw new Ar("Response from Amazon Cognito contained no credentials")}function jl(){throw new Ar("Response from Amazon Cognito contained no secret key")}var qr="IdentityIds",Bl=function(){function r(e){e===void 0&&(e="aws:cognito-identity-ids"),this.dbName=e}return r.prototype.getItem=function(e){return this.withObjectStore("readonly",function(t){var n=t.get(e);return new Promise(function(o){n.onerror=function(){return o(null)},n.onsuccess=function(){return o(n.result?n.result.value:null)}})}).catch(function(){return null})},r.prototype.removeItem=function(e){return this.withObjectStore("readwrite",function(t){var n=t.delete(e);return new Promise(function(o,i){n.onerror=function(){return i(n.error)},n.onsuccess=function(){return o()}})})},r.prototype.setItem=function(e,t){return this.withObjectStore("readwrite",function(n){var o=n.put({id:e,value:t});return new Promise(function(i,s){o.onerror=function(){return s(o.error)},o.onsuccess=function(){return i()}})})},r.prototype.getDb=function(){var e=self.indexedDB.open(this.dbName,1);return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)},e.onblocked=function(){n(new Error("Unable to access DB"))},e.onupgradeneeded=function(){var o=e.result;o.onerror=function(){n(new Error("Failed to create object store"))},o.createObjectStore(qr,{keyPath:"id"})}})},r.prototype.withObjectStore=function(e,t){return this.getDb().then(function(n){var o=n.transaction(qr,e);return o.oncomplete=function(){return n.close()},new Promise(function(i,s){o.onerror=function(){return s(o.error)},i(t(o.objectStore(qr)))}).catch(function(i){throw n.close(),i})})},r}(),Ll=function(){function r(e){e===void 0&&(e={}),this.store=e}return r.prototype.getItem=function(e){return e in this.store?this.store[e]:null},r.prototype.removeItem=function(e){delete this.store[e]},r.prototype.setItem=function(e,t){this.store[e]=t},r}(),Kl=new Ll;function ql(){return typeof self=="object"&&self.indexedDB?new Bl:typeof window=="object"&&window.localStorage?window.localStorage:Kl}function Hl(r){var e=this,t=r.accountId,n=r.cache,o=n===void 0?ql():n,i=r.client,s=r.customRoleArn,u=r.identityPoolId,f=r.logins,a=r.userIdentifier,c=a===void 0?!f||Object.keys(f).length===0?"ANONYMOUS":void 0:a,h=c?"aws:cognito-identity-credentials:"+u+":"+c:void 0,y=function(){return fn(e,void 0,void 0,function(){var _,b,E,C,O,T,M,q,z;return ln(this,function(V){switch(V.label){case 0:return b=h,b?[4,o.getItem(h)]:[3,2];case 1:b=V.sent(),V.label=2;case 2:return _=b,_?[3,7]:(T=(O=i).send,M=Nt.bind,z={AccountId:t,IdentityPoolId:u},f?[4,_s(f)]:[3,4]);case 3:return q=V.sent(),[3,5];case 4:q=void 0,V.label=5;case 5:return[4,T.apply(O,[new(M.apply(Nt,[void 0,(z.Logins=q,z)]))])];case 6:E=V.sent().IdentityId,C=E===void 0?zl():E,_=C,h&&Promise.resolve(o.setItem(h,_)).catch(function(){}),V.label=7;case 7:return y=Mt({client:i,customRoleArn:s,logins:f,identityId:_}),[2,y()]}})})};return function(){return y().catch(function(_){return fn(e,void 0,void 0,function(){return ln(this,function(b){throw h&&Promise.resolve(o.removeItem(h)).catch(function(){}),_})})})}}function zl(){throw new Ar("Response from Amazon Cognito contained no identity ID")}function Hr(r){var e=new fl({region:r.region,customUserAgent:Ds()});return e.middlewareStack.add(function(t,n){return function(o){return t(Vl(o))}},{step:"build",name:"cacheControlMiddleWare"}),e}function Vl(r){return Ee(Ee({},r),{request:Ee(Ee({},r.request),{headers:Ee(Ee({},r.request.headers),{"cache-control":"no-store"})})})}var X=new Ze("Credentials"),Gl=50*60*1e3,$l="CognitoIdentityId-",Wl=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",Yl=function(r,e,t){Ge.dispatch("core",{event:r,data:e,message:t},"Credentials",Wl)},Jl=function(){function r(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=Rf.refreshGoogleToken,this._refreshHandlers.facebook=Of.refreshFacebookToken}return r.prototype.getModuleName=function(){return"Credentials"},r.prototype.getCredSource=function(){return this._credentials_source},r.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=Ee(Ee({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=new cs().getStorage()),this._storageSync=Promise.resolve(),typeof this._storage.sync=="function"&&(this._storageSync=this._storage.sync()),Yl("credentials_configured",null,"Credentials has been configured successfully"),this._config},r.prototype.get=function(){return X.debug("getting credentials"),this._pickupCredentials()},r.prototype._getCognitoIdentityIdStorageKey=function(e){return""+$l+e},r.prototype._pickupCredentials=function(){return X.debug("picking up credentials"),!this._gettingCredPromise||!this._gettingCredPromise.isPending()?(X.debug("getting new cred promise"),this._gettingCredPromise=Ns(this._keepAlive())):X.debug("getting old cred promise"),this._gettingCredPromise},r.prototype._keepAlive=function(){return ve(this,void 0,void 0,function(){var e,t,n,o,i,s,u,f;return he(this,function(a){switch(a.label){case 0:if(X.debug("checking if credentials exists and not expired"),e=this._credentials,e&&!this._isExpired(e)&&!this._isPastTTL())return X.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(X.debug("need to get a new credential or refresh the existing one"),t=this.Auth,n=t===void 0?xn.Auth:t,!n||typeof n.currentUserCredentials!="function")return[2,this._setCredentialsForGuest()];if(!(!this._isExpired(e)&&this._isPastTTL()))return[3,6];X.debug("ttl has passed but token is not yet expired"),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,n.currentUserPoolUser()];case 2:return o=a.sent(),[4,n.currentSession()];case 3:return i=a.sent(),s=i.refreshToken,u=new Promise(function(c,h){o.refreshSession(s,function(y,_){return y?h(y):c(_)})}),[4,u];case 4:return a.sent(),[3,6];case 5:return f=a.sent(),X.debug("Error attempting to refreshing the session",f),[3,6];case 6:return[2,n.currentUserCredentials()]}})})},r.prototype.refreshFederatedToken=function(e){X.debug("Getting federated credentials");var t=e.provider,n=e.user,o=e.token,i=e.identity_id,s=e.expires_at;s=new Date(s).getFullYear()===1970?s*1e3:s;var u=this;return X.debug("checking if federated jwt token expired"),s>new Date().getTime()?(X.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:o,user:n,identity_id:i,expires_at:s})):u._refreshHandlers[t]&&typeof u._refreshHandlers[t]=="function"?(X.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:u._refreshHandlers[t],provider:t,user:n})):(X.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},r.prototype._providerRefreshWithRetry=function(e){var t=this,n=e.refreshHandler,o=e.provider,i=e.user,s=10*1e3;return pa(n,[],s).then(function(u){return X.debug("refresh federated token sucessfully",u),t._setCredentialsFromFederation({provider:o,token:u.token,user:i,identity_id:u.identity_id,expires_at:u.expires_at})}).catch(function(u){var f=typeof u=="string"&&u.toLowerCase().lastIndexOf("network error",u.length)===0;return f||t.clear(),X.debug("refresh federated token failed",u),Promise.reject("refreshing federation token failed: "+u)})},r.prototype._isExpired=function(e){if(!e)return X.debug("no credentials for expiration check"),!0;X.debug("are these credentials expired?",e);var t=Date.now(),n=e.expiration;return n.getTime()<=t},r.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},r.prototype._setCredentialsForGuest=function(){var e;return ve(this,void 0,void 0,function(){var t,n,o,i,s,u,f,a,c,h,y,_=this;return he(this,function(b){switch(b.label){case 0:return X.debug("setting credentials for guest"),!((e=this._config)===null||e===void 0)&&e.identityPoolId||(this._config=Object.assign({},this._config,No(this._config||{}).Auth)),t=this._config,n=t.identityPoolId,o=t.region,i=t.mandatorySignIn,s=t.identityPoolRegion,i?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:n?!s&&!o?(X.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(f=this,[4,this._getGuestIdentityId()]):(X.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return u=f._identityId=b.sent(),a=Hr({region:s||o}),c=void 0,u?(h={identityId:u,client:a},c=Mt(h)()):(y=function(){return ve(_,void 0,void 0,function(){var E,C,O;return he(this,function(T){switch(T.label){case 0:return[4,a.send(new Nt({IdentityPoolId:n}))];case 1:return E=T.sent().IdentityId,this._identityId=E,C={client:a,identityId:E},O=Mt(C),[2,O()]}})})},c=y().catch(function(E){return ve(_,void 0,void 0,function(){return he(this,function(C){throw E})})})),[2,this._loadCredentials(c,"guest",!1,null).then(function(E){return E}).catch(function(E){return ve(_,void 0,void 0,function(){var C,O=this;return he(this,function(T){switch(T.label){case 0:return E.name==="ResourceNotFoundException"&&E.message==="Identity '"+u+"' not found."?(X.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]):[3,2];case 1:return T.sent(),C=function(){return ve(O,void 0,void 0,function(){var M,q,z;return he(this,function(V){switch(V.label){case 0:return[4,a.send(new Nt({IdentityPoolId:n}))];case 1:return M=V.sent().IdentityId,this._identityId=M,q={client:a,identityId:M},z=Mt(q),[2,z()]}})})},c=C().catch(function(M){return ve(O,void 0,void 0,function(){return he(this,function(q){throw M})})}),[2,this._loadCredentials(c,"guest",!1,null)];case 2:return[2,E]}})})})]}})})},r.prototype._setCredentialsFromFederation=function(e){var t=e.provider,n=e.token,o=e.identity_id,i={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"},s=i[t]||t;if(!s)return Promise.reject("You must specify a federated provider");var u={};u[s]=n;var f=this._config,a=f.identityPoolId,c=f.region,h=f.identityPoolRegion;if(!a)return X.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!h&&!c)return X.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var y=Hr({region:h||c}),_=void 0;if(o){var b={identityId:o,logins:u,client:y};_=Mt(b)()}else{var b={logins:u,identityPoolId:a,client:y};_=Hl(b)()}return this._loadCredentials(_,"federated",!0,e)},r.prototype._setCredentialsFromSession=function(e){var t=this;X.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),o=this._config,i=o.region,s=o.userPoolId,u=o.identityPoolId,f=o.identityPoolRegion;if(!u)return X.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!f&&!i)return X.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var a="cognito-idp."+i+".amazonaws.com/"+s,c={};c[a]=n;var h=Hr({region:f||i}),y=function(){return ve(t,void 0,void 0,function(){var b,E,C,O,T,M,q,z,V,Y;return he(this,function(R){switch(R.label){case 0:return[4,this._getGuestIdentityId()];case 1:return b=R.sent(),b?[3,3]:[4,h.send(new Nt({IdentityPoolId:u,Logins:c}))];case 2:C=R.sent().IdentityId,E=C,R.label=3;case 3:return[4,h.send(new pn({IdentityId:b||E,Logins:c}))];case 4:return O=R.sent(),T=O.Credentials,M=T.AccessKeyId,q=T.Expiration,z=T.SecretKey,V=T.SessionToken,Y=O.IdentityId,this._identityId=Y,b?(X.debug("The guest identity "+b+" has been successfully linked to the logins"),b===Y&&X.debug("The guest identity "+b+" has become the primary identity"),[4,this._removeGuestIdentityId()]):[3,6];case 5:R.sent(),R.label=6;case 6:return[2,{accessKeyId:M,secretAccessKey:z,sessionToken:V,expiration:q,identityId:Y}]}})})},_=y().catch(function(b){return ve(t,void 0,void 0,function(){return he(this,function(E){throw b})})});return this._loadCredentials(_,"userPool",!0,null)},r.prototype._loadCredentials=function(e,t,n,o){var i=this,s=this;return new Promise(function(u,f){e.then(function(a){return ve(i,void 0,void 0,function(){var c,h,y,_,b;return he(this,function(E){switch(E.label){case 0:if(X.debug("Load credentials successfully",a),this._identityId&&!a.identityId&&(a.identityId=this._identityId),s._credentials=a,s._credentials.authenticated=n,s._credentials_source=t,s._nextCredentialsRefresh=new Date().getTime()+Gl,t==="federated"){c=Object.assign({id:this._credentials.identityId},o.user),h=o.provider,y=o.token,_=o.expires_at,b=o.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:h,token:y,user:c,expires_at:_,identity_id:b}))}catch(C){X.debug("Failed to put federated info into auth storage",C)}}return t!=="guest"?[3,2]:[4,this._setGuestIdentityId(a.identityId)];case 1:E.sent(),E.label=2;case 2:return u(s._credentials),[2]}})})}).catch(function(a){if(a){X.debug("Failed to load credentials",e),X.debug("Error loading credentials",a),f(a);return}})})},r.prototype.set=function(e,t){return t==="session"?this._setCredentialsFromSession(e):t==="federation"?this._setCredentialsFromFederation(e):t==="guest"?this._setCredentialsForGuest():(X.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},r.prototype.clear=function(){return ve(this,void 0,void 0,function(){return he(this,function(e){return this._credentials=null,this._credentials_source=null,X.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},r.prototype._getGuestIdentityId=function(){return ve(this,void 0,void 0,function(){var e,t;return he(this,function(n){switch(n.label){case 0:e=this._config.identityPoolId,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._storageSync];case 2:return n.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(e))];case 3:return t=n.sent(),X.debug("Failed to get the cached guest identityId",t),[3,4];case 4:return[2]}})})},r.prototype._setGuestIdentityId=function(e){return ve(this,void 0,void 0,function(){var t,n;return he(this,function(o){switch(o.label){case 0:t=this._config.identityPoolId,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._storageSync];case 2:return o.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(t),e),[3,4];case 3:return n=o.sent(),X.debug("Failed to cache guest identityId",n),[3,4];case 4:return[2]}})})},r.prototype._removeGuestIdentityId=function(){return ve(this,void 0,void 0,function(){var e;return he(this,function(t){return e=this._config.identityPoolId,X.debug("removing "+this._getCognitoIdentityIdStorageKey(e)+" from storage"),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(e)),[2]})})},r.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},r}(),bs=new Jl(null);xn.register(bs);/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Ss=Ql,wo=ed,Zl=decodeURIComponent,Xl=encodeURIComponent,Qt=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Ql(r,e){if(typeof r!="string")throw new TypeError("argument str must be a string");for(var t={},n=e||{},o=r.split(";"),i=n.decode||Zl,s=0;s<o.length;s++){var u=o[s],f=u.indexOf("=");if(!(f<0)){var a=u.substring(0,f).trim();if(t[a]==null){var c=u.substring(f+1,u.length).trim();c[0]==='"'&&(c=c.slice(1,-1)),t[a]=td(c,i)}}}return t}function ed(r,e,t){var n=t||{},o=n.encode||Xl;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!Qt.test(r))throw new TypeError("argument name is invalid");var i=o(e);if(i&&!Qt.test(i))throw new TypeError("argument val is invalid");var s=r+"="+i;if(n.maxAge!=null){var u=n.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(u)}if(n.domain){if(!Qt.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain="+n.domain}if(n.path){if(!Qt.test(n.path))throw new TypeError("option path is invalid");s+="; Path="+n.path}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.sameSite){var f=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(f){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s}function td(r,e){try{return e(r)}catch{return r}}function rd(){return typeof document=="object"&&typeof document.cookie=="string"}function nd(r,e){return typeof r=="string"?Ss(r,e):typeof r=="object"&&r!==null?r:{}}function id(r,e){return typeof e>"u"&&(e=!r||r[0]!=="{"&&r[0]!=="["&&r[0]!=='"'),!e}function _o(r,e){e===void 0&&(e={});var t=od(r);if(id(t,e.doNotParse))try{return JSON.parse(t)}catch{}return r}function od(r){return r&&r[0]==="j"&&r[1]===":"?r.substr(2):r}var lt=globalThis&&globalThis.__assign||function(){return lt=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},lt.apply(this,arguments)},sd=function(){function r(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=nd(e,t),new Promise(function(){n.HAS_DOCUMENT_COOKIE=rd()}).catch(function(){})}return r.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=Ss(document.cookie,e))},r.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},r.prototype.get=function(e,t,n){return t===void 0&&(t={}),this._updateBrowserValues(n),_o(this.cookies[e],t)},r.prototype.getAll=function(e,t){e===void 0&&(e={}),this._updateBrowserValues(t);var n={};for(var o in this.cookies)n[o]=_o(this.cookies[o],e);return n},r.prototype.set=function(e,t,n){var o;typeof t=="object"&&(t=JSON.stringify(t)),this.cookies=lt(lt({},this.cookies),(o={},o[e]=t,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=wo(e,t,n)),this._emitChange({name:e,value:t,options:n})},r.prototype.remove=function(e,t){var n=t=lt(lt({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=lt({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=wo(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},r.prototype.addChangeListener=function(e){this.changeListeners.push(e)},r.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},r}();const zr=sd;var bo=Je().isBrowser,ad=365*24*60*60*1e3,ud=function(){function r(e){e===void 0&&(e={}),this.cookies=new zr,this.store=bo?window.localStorage:Object.create(null),this.cookies=e.req?new zr(e.req.headers.cookie):new zr,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(r.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),r.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map(function(t,n){return e.key(n)}).forEach(function(t){return e.removeItem(t)})},r.prototype.getItem=function(e){return this.getLocalItem(e)},r.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},r.prototype.getUniversalItem=function(e){return this.cookies.get(e)},r.prototype.key=function(e){return Object.keys(this.store)[e]},r.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},r.prototype.removeLocalItem=function(e){delete this.store[e]},r.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},r.prototype.setItem=function(e,t){this.setLocalItem(e,t);var n=e.split(".").pop(),o=["LastAuthUser","accessToken","refreshToken","idToken"];o.includes(n??"")&&this.setUniversalItem(e,t,{expires:new Date(Date.now()+ad)})},r.prototype.setLocalItem=function(e,t){this.store[e]=t},r.prototype.setUniversalItem=function(e,t,n){n===void 0&&(n={}),this.cookies.set(e,t,Ee(Ee({},n),{path:"/",sameSite:!0,secure:!(bo&&window.location.hostname==="localhost")}))},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mn=function(r,e){return mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},mn(r,e)};function As(r,e){mn(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var me=function(){return me=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},me.apply(this,arguments)};function te(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(h){s(h)}}function f(c){try{a(n.throw(c))}catch(h){s(h)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function re(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Ve(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return i}var hr;(function(r){r.Cognito="COGNITO",r.Google="Google",r.Facebook="Facebook",r.Amazon="LoginWithAmazon",r.Apple="SignInWithApple"})(hr||(hr={}));function Vr(r){var e=["provider"];return r&&!!e.find(function(t){return r.hasOwnProperty(t)})}function cd(r){var e=["customProvider"];return r&&!!e.find(function(t){return r.hasOwnProperty(t)})}function fd(r){var e=["customState"];return r&&!!e.find(function(t){return r.hasOwnProperty(t)})}function vt(r){return r.redirectSignIn!==void 0}var ne;(function(r){r.NoConfig="noConfig",r.MissingAuthConfig="missingAuthConfig",r.EmptyUsername="emptyUsername",r.InvalidUsername="invalidUsername",r.EmptyPassword="emptyPassword",r.EmptyCode="emptyCode",r.SignUpError="signUpError",r.NoMFA="noMFA",r.InvalidMFA="invalidMFA",r.EmptyChallengeResponse="emptyChallengeResponse",r.NoUserSession="noUserSession",r.Default="default",r.DeviceConfig="deviceConfig",r.NetworkError="networkError",r.AutoSignInError="autoSignInError"})(ne||(ne={}));function ld(r){return!!r.username}var So;(function(r){r.API_KEY="API_KEY",r.AWS_IAM="AWS_IAM",r.OPENID_CONNECT="OPENID_CONNECT",r.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",r.AWS_LAMBDA="AWS_LAMBDA"})(So||(So={}));/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Ao=function(){function r(t){var n=t||{},o=n.ValidationData,i=n.Username,s=n.Password,u=n.AuthParameters,f=n.ClientMetadata;this.validationData=o||{},this.authParameters=u||{},this.clientMetadata=f||{},this.username=i,this.password=s}var e=r.prototype;return e.getUsername=function(){return this.username},e.getPassword=function(){return this.password},e.getValidationData=function(){return this.validationData},e.getAuthParameters=function(){return this.authParameters},e.getClientMetadata=function(){return this.clientMetadata},r}(),se={},Ir={};Ir.byteLength=gd;Ir.toByteArray=pd;Ir.fromByteArray=wd;var Ke=[],De=[],dd=typeof Uint8Array<"u"?Uint8Array:Array,Gr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var wt=0,hd=Gr.length;wt<hd;++wt)Ke[wt]=Gr[wt],De[Gr.charCodeAt(wt)]=wt;De["-".charCodeAt(0)]=62;De["_".charCodeAt(0)]=63;function Is(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function gd(r){var e=Is(r),t=e[0],n=e[1];return(t+n)*3/4-n}function vd(r,e,t){return(e+t)*3/4-t}function pd(r){var e,t=Is(r),n=t[0],o=t[1],i=new dd(vd(r,n,o)),s=0,u=o>0?n-4:n,f;for(f=0;f<u;f+=4)e=De[r.charCodeAt(f)]<<18|De[r.charCodeAt(f+1)]<<12|De[r.charCodeAt(f+2)]<<6|De[r.charCodeAt(f+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=e&255;return o===2&&(e=De[r.charCodeAt(f)]<<2|De[r.charCodeAt(f+1)]>>4,i[s++]=e&255),o===1&&(e=De[r.charCodeAt(f)]<<10|De[r.charCodeAt(f+1)]<<4|De[r.charCodeAt(f+2)]>>2,i[s++]=e>>8&255,i[s++]=e&255),i}function yd(r){return Ke[r>>18&63]+Ke[r>>12&63]+Ke[r>>6&63]+Ke[r&63]}function md(r,e,t){for(var n,o=[],i=e;i<t;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),o.push(yd(n));return o.join("")}function wd(r){for(var e,t=r.length,n=t%3,o=[],i=16383,s=0,u=t-n;s<u;s+=i)o.push(md(r,s,s+i>u?u:s+i));return n===1?(e=r[t-1],o.push(Ke[e>>2]+Ke[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],o.push(Ke[e>>10]+Ke[e>>4&63]+Ke[e<<2&63]+"=")),o.join("")}var jn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */jn.read=function(r,e,t,n,o){var i,s,u=o*8-n-1,f=(1<<u)-1,a=f>>1,c=-7,h=t?o-1:0,y=t?-1:1,_=r[e+h];for(h+=y,i=_&(1<<-c)-1,_>>=-c,c+=u;c>0;i=i*256+r[e+h],h+=y,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=s*256+r[e+h],h+=y,c-=8);if(i===0)i=1-a;else{if(i===f)return s?NaN:(_?-1:1)*(1/0);s=s+Math.pow(2,n),i=i-a}return(_?-1:1)*s*Math.pow(2,i-n)};jn.write=function(r,e,t,n,o,i){var s,u,f,a=i*8-o-1,c=(1<<a)-1,h=c>>1,y=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:i-1,b=n?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+h>=1?e+=y/f:e+=y*Math.pow(2,1-h),e*f>=2&&(s++,f/=2),s+h>=c?(u=0,s=c):s+h>=1?(u=(e*f-1)*Math.pow(2,o),s=s+h):(u=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;r[t+_]=u&255,_+=b,u/=256,o-=8);for(s=s<<o|u,a+=o;a>0;r[t+_]=s&255,_+=b,s/=256,a-=8);r[t+_-b]|=E*128};var _d={}.toString,bd=Array.isArray||function(r){return _d.call(r)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */(function(r){var e=Ir,t=jn,n=bd;r.Buffer=u,r.SlowBuffer=O,r.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=Ue.TYPED_ARRAY_SUPPORT!==void 0?Ue.TYPED_ARRAY_SUPPORT:o(),r.kMaxLength=i();function o(){try{var w=new Uint8Array(1);return w.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},w.foo()===42&&typeof w.subarray=="function"&&w.subarray(1,1).byteLength===0}catch{return!1}}function i(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(w,l){if(i()<l)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(w=new Uint8Array(l),w.__proto__=u.prototype):(w===null&&(w=new u(l)),w.length=l),w}function u(w,l,d){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(w,l,d);if(typeof w=="number"){if(typeof l=="string")throw new Error("If encoding is specified then the first argument must be a string");return h(this,w)}return f(this,w,l,d)}u.poolSize=8192,u._augment=function(w){return w.__proto__=u.prototype,w};function f(w,l,d,S){if(typeof l=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&l instanceof ArrayBuffer?b(w,l,d,S):typeof l=="string"?y(w,l,d):E(w,l)}u.from=function(w,l,d){return f(null,w,l,d)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}));function a(w){if(typeof w!="number")throw new TypeError('"size" argument must be a number');if(w<0)throw new RangeError('"size" argument must not be negative')}function c(w,l,d,S){return a(l),l<=0?s(w,l):d!==void 0?typeof S=="string"?s(w,l).fill(d,S):s(w,l).fill(d):s(w,l)}u.alloc=function(w,l,d){return c(null,w,l,d)};function h(w,l){if(a(l),w=s(w,l<0?0:C(l)|0),!u.TYPED_ARRAY_SUPPORT)for(var d=0;d<l;++d)w[d]=0;return w}u.allocUnsafe=function(w){return h(null,w)},u.allocUnsafeSlow=function(w){return h(null,w)};function y(w,l,d){if((typeof d!="string"||d==="")&&(d="utf8"),!u.isEncoding(d))throw new TypeError('"encoding" must be a valid string encoding');var S=T(l,d)|0;w=s(w,S);var P=w.write(l,d);return P!==S&&(w=w.slice(0,P)),w}function _(w,l){var d=l.length<0?0:C(l.length)|0;w=s(w,d);for(var S=0;S<d;S+=1)w[S]=l[S]&255;return w}function b(w,l,d,S){if(l.byteLength,d<0||l.byteLength<d)throw new RangeError("'offset' is out of bounds");if(l.byteLength<d+(S||0))throw new RangeError("'length' is out of bounds");return d===void 0&&S===void 0?l=new Uint8Array(l):S===void 0?l=new Uint8Array(l,d):l=new Uint8Array(l,d,S),u.TYPED_ARRAY_SUPPORT?(w=l,w.__proto__=u.prototype):w=_(w,l),w}function E(w,l){if(u.isBuffer(l)){var d=C(l.length)|0;return w=s(w,d),w.length===0||l.copy(w,0,0,d),w}if(l){if(typeof ArrayBuffer<"u"&&l.buffer instanceof ArrayBuffer||"length"in l)return typeof l.length!="number"||xs(l.length)?s(w,0):_(w,l);if(l.type==="Buffer"&&n(l.data))return _(w,l.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function C(w){if(w>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return w|0}function O(w){return+w!=w&&(w=0),u.alloc(+w)}u.isBuffer=function(l){return!!(l!=null&&l._isBuffer)},u.compare=function(l,d){if(!u.isBuffer(l)||!u.isBuffer(d))throw new TypeError("Arguments must be Buffers");if(l===d)return 0;for(var S=l.length,P=d.length,j=0,L=Math.min(S,P);j<L;++j)if(l[j]!==d[j]){S=l[j],P=d[j];break}return S<P?-1:P<S?1:0},u.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(l,d){if(!n(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return u.alloc(0);var S;if(d===void 0)for(d=0,S=0;S<l.length;++S)d+=l[S].length;var P=u.allocUnsafe(d),j=0;for(S=0;S<l.length;++S){var L=l[S];if(!u.isBuffer(L))throw new TypeError('"list" argument must be an Array of Buffers');L.copy(P,j),j+=L.length}return P};function T(w,l){if(u.isBuffer(w))return w.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(w)||w instanceof ArrayBuffer))return w.byteLength;typeof w!="string"&&(w=""+w);var d=w.length;if(d===0)return 0;for(var S=!1;;)switch(l){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":case void 0:return pe(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return Be(w).length;default:if(S)return pe(w).length;l=(""+l).toLowerCase(),S=!0}}u.byteLength=T;function M(w,l,d){var S=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,l>>>=0,d<=l))return"";for(w||(w="utf8");;)switch(w){case"hex":return U(this,l,d);case"utf8":case"utf-8":return I(this,l,d);case"ascii":return K(this,l,d);case"latin1":case"binary":return J(this,l,d);case"base64":return A(this,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,l,d);default:if(S)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),S=!0}}u.prototype._isBuffer=!0;function q(w,l,d){var S=w[l];w[l]=w[d],w[d]=S}u.prototype.swap16=function(){var l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<l;d+=2)q(this,d,d+1);return this},u.prototype.swap32=function(){var l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<l;d+=4)q(this,d,d+3),q(this,d+1,d+2);return this},u.prototype.swap64=function(){var l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<l;d+=8)q(this,d,d+7),q(this,d+1,d+6),q(this,d+2,d+5),q(this,d+3,d+4);return this},u.prototype.toString=function(){var l=this.length|0;return l===0?"":arguments.length===0?I(this,0,l):M.apply(this,arguments)},u.prototype.equals=function(l){if(!u.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:u.compare(this,l)===0},u.prototype.inspect=function(){var l="",d=r.INSPECT_MAX_BYTES;return this.length>0&&(l=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(l+=" ... ")),"<Buffer "+l+">"},u.prototype.compare=function(l,d,S,P,j){if(!u.isBuffer(l))throw new TypeError("Argument must be a Buffer");if(d===void 0&&(d=0),S===void 0&&(S=l?l.length:0),P===void 0&&(P=0),j===void 0&&(j=this.length),d<0||S>l.length||P<0||j>this.length)throw new RangeError("out of range index");if(P>=j&&d>=S)return 0;if(P>=j)return-1;if(d>=S)return 1;if(d>>>=0,S>>>=0,P>>>=0,j>>>=0,this===l)return 0;for(var L=j-P,ee=S-d,ue=Math.min(L,ee),ce=this.slice(P,j),be=l.slice(d,S),fe=0;fe<ue;++fe)if(ce[fe]!==be[fe]){L=ce[fe],ee=be[fe];break}return L<ee?-1:ee<L?1:0};function z(w,l,d,S,P){if(w.length===0)return-1;if(typeof d=="string"?(S=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,isNaN(d)&&(d=P?0:w.length-1),d<0&&(d=w.length+d),d>=w.length){if(P)return-1;d=w.length-1}else if(d<0)if(P)d=0;else return-1;if(typeof l=="string"&&(l=u.from(l,S)),u.isBuffer(l))return l.length===0?-1:V(w,l,d,S,P);if(typeof l=="number")return l=l&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(w,l,d):Uint8Array.prototype.lastIndexOf.call(w,l,d):V(w,[l],d,S,P);throw new TypeError("val must be string, number or Buffer")}function V(w,l,d,S,P){var j=1,L=w.length,ee=l.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(w.length<2||l.length<2)return-1;j=2,L/=2,ee/=2,d/=2}function ue(qn,Hn){return j===1?qn[Hn]:qn.readUInt16BE(Hn*j)}var ce;if(P){var be=-1;for(ce=d;ce<L;ce++)if(ue(w,ce)===ue(l,be===-1?0:ce-be)){if(be===-1&&(be=ce),ce-be+1===ee)return be*j}else be!==-1&&(ce-=ce-be),be=-1}else for(d+ee>L&&(d=L-ee),ce=d;ce>=0;ce--){for(var fe=!0,zt=0;zt<ee;zt++)if(ue(w,ce+zt)!==ue(l,zt)){fe=!1;break}if(fe)return ce}return-1}u.prototype.includes=function(l,d,S){return this.indexOf(l,d,S)!==-1},u.prototype.indexOf=function(l,d,S){return z(this,l,d,S,!0)},u.prototype.lastIndexOf=function(l,d,S){return z(this,l,d,S,!1)};function Y(w,l,d,S){d=Number(d)||0;var P=w.length-d;S?(S=Number(S),S>P&&(S=P)):S=P;var j=l.length;if(j%2!==0)throw new TypeError("Invalid hex string");S>j/2&&(S=j/2);for(var L=0;L<S;++L){var ee=parseInt(l.substr(L*2,2),16);if(isNaN(ee))return L;w[d+L]=ee}return L}function R(w,l,d,S){return Xe(pe(l,w.length-d),w,d,S)}function W(w,l,d,S){return Xe(Pe(l),w,d,S)}function g(w,l,d,S){return W(w,l,d,S)}function v(w,l,d,S){return Xe(Be(l),w,d,S)}function p(w,l,d,S){return Xe(je(l,w.length-d),w,d,S)}u.prototype.write=function(l,d,S,P){if(d===void 0)P="utf8",S=this.length,d=0;else if(S===void 0&&typeof d=="string")P=d,S=this.length,d=0;else if(isFinite(d))d=d|0,isFinite(S)?(S=S|0,P===void 0&&(P="utf8")):(P=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var j=this.length-d;if((S===void 0||S>j)&&(S=j),l.length>0&&(S<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");for(var L=!1;;)switch(P){case"hex":return Y(this,l,d,S);case"utf8":case"utf-8":return R(this,l,d,S);case"ascii":return W(this,l,d,S);case"latin1":case"binary":return g(this,l,d,S);case"base64":return v(this,l,d,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p(this,l,d,S);default:if(L)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),L=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(w,l,d){return l===0&&d===w.length?e.fromByteArray(w):e.fromByteArray(w.slice(l,d))}function I(w,l,d){d=Math.min(w.length,d);for(var S=[],P=l;P<d;){var j=w[P],L=null,ee=j>239?4:j>223?3:j>191?2:1;if(P+ee<=d){var ue,ce,be,fe;switch(ee){case 1:j<128&&(L=j);break;case 2:ue=w[P+1],(ue&192)===128&&(fe=(j&31)<<6|ue&63,fe>127&&(L=fe));break;case 3:ue=w[P+1],ce=w[P+2],(ue&192)===128&&(ce&192)===128&&(fe=(j&15)<<12|(ue&63)<<6|ce&63,fe>2047&&(fe<55296||fe>57343)&&(L=fe));break;case 4:ue=w[P+1],ce=w[P+2],be=w[P+3],(ue&192)===128&&(ce&192)===128&&(be&192)===128&&(fe=(j&15)<<18|(ue&63)<<12|(ce&63)<<6|be&63,fe>65535&&fe<1114112&&(L=fe))}}L===null?(L=65533,ee=1):L>65535&&(L-=65536,S.push(L>>>10&1023|55296),L=56320|L&1023),S.push(L),P+=ee}return x(S)}var m=4096;function x(w){var l=w.length;if(l<=m)return String.fromCharCode.apply(String,w);for(var d="",S=0;S<l;)d+=String.fromCharCode.apply(String,w.slice(S,S+=m));return d}function K(w,l,d){var S="";d=Math.min(w.length,d);for(var P=l;P<d;++P)S+=String.fromCharCode(w[P]&127);return S}function J(w,l,d){var S="";d=Math.min(w.length,d);for(var P=l;P<d;++P)S+=String.fromCharCode(w[P]);return S}function U(w,l,d){var S=w.length;(!l||l<0)&&(l=0),(!d||d<0||d>S)&&(d=S);for(var P="",j=l;j<d;++j)P+=ge(w[j]);return P}function k(w,l,d){for(var S=w.slice(l,d),P="",j=0;j<S.length;j+=2)P+=String.fromCharCode(S[j]+S[j+1]*256);return P}u.prototype.slice=function(l,d){var S=this.length;l=~~l,d=d===void 0?S:~~d,l<0?(l+=S,l<0&&(l=0)):l>S&&(l=S),d<0?(d+=S,d<0&&(d=0)):d>S&&(d=S),d<l&&(d=l);var P;if(u.TYPED_ARRAY_SUPPORT)P=this.subarray(l,d),P.__proto__=u.prototype;else{var j=d-l;P=new u(j,void 0);for(var L=0;L<j;++L)P[L]=this[L+l]}return P};function H(w,l,d){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+l>d)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(l,d,S){l=l|0,d=d|0,S||H(l,d,this.length);for(var P=this[l],j=1,L=0;++L<d&&(j*=256);)P+=this[l+L]*j;return P},u.prototype.readUIntBE=function(l,d,S){l=l|0,d=d|0,S||H(l,d,this.length);for(var P=this[l+--d],j=1;d>0&&(j*=256);)P+=this[l+--d]*j;return P},u.prototype.readUInt8=function(l,d){return d||H(l,1,this.length),this[l]},u.prototype.readUInt16LE=function(l,d){return d||H(l,2,this.length),this[l]|this[l+1]<<8},u.prototype.readUInt16BE=function(l,d){return d||H(l,2,this.length),this[l]<<8|this[l+1]},u.prototype.readUInt32LE=function(l,d){return d||H(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},u.prototype.readUInt32BE=function(l,d){return d||H(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},u.prototype.readIntLE=function(l,d,S){l=l|0,d=d|0,S||H(l,d,this.length);for(var P=this[l],j=1,L=0;++L<d&&(j*=256);)P+=this[l+L]*j;return j*=128,P>=j&&(P-=Math.pow(2,8*d)),P},u.prototype.readIntBE=function(l,d,S){l=l|0,d=d|0,S||H(l,d,this.length);for(var P=d,j=1,L=this[l+--P];P>0&&(j*=256);)L+=this[l+--P]*j;return j*=128,L>=j&&(L-=Math.pow(2,8*d)),L},u.prototype.readInt8=function(l,d){return d||H(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},u.prototype.readInt16LE=function(l,d){d||H(l,2,this.length);var S=this[l]|this[l+1]<<8;return S&32768?S|4294901760:S},u.prototype.readInt16BE=function(l,d){d||H(l,2,this.length);var S=this[l+1]|this[l]<<8;return S&32768?S|4294901760:S},u.prototype.readInt32LE=function(l,d){return d||H(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},u.prototype.readInt32BE=function(l,d){return d||H(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},u.prototype.readFloatLE=function(l,d){return d||H(l,4,this.length),t.read(this,l,!0,23,4)},u.prototype.readFloatBE=function(l,d){return d||H(l,4,this.length),t.read(this,l,!1,23,4)},u.prototype.readDoubleLE=function(l,d){return d||H(l,8,this.length),t.read(this,l,!0,52,8)},u.prototype.readDoubleBE=function(l,d){return d||H(l,8,this.length),t.read(this,l,!1,52,8)};function F(w,l,d,S,P,j){if(!u.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>P||l<j)throw new RangeError('"value" argument is out of bounds');if(d+S>w.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(l,d,S,P){if(l=+l,d=d|0,S=S|0,!P){var j=Math.pow(2,8*S)-1;F(this,l,d,S,j,0)}var L=1,ee=0;for(this[d]=l&255;++ee<S&&(L*=256);)this[d+ee]=l/L&255;return d+S},u.prototype.writeUIntBE=function(l,d,S,P){if(l=+l,d=d|0,S=S|0,!P){var j=Math.pow(2,8*S)-1;F(this,l,d,S,j,0)}var L=S-1,ee=1;for(this[d+L]=l&255;--L>=0&&(ee*=256);)this[d+L]=l/ee&255;return d+S},u.prototype.writeUInt8=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,1,255,0),u.TYPED_ARRAY_SUPPORT||(l=Math.floor(l)),this[d]=l&255,d+1};function $(w,l,d,S){l<0&&(l=65535+l+1);for(var P=0,j=Math.min(w.length-d,2);P<j;++P)w[d+P]=(l&255<<8*(S?P:1-P))>>>(S?P:1-P)*8}u.prototype.writeUInt16LE=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[d]=l&255,this[d+1]=l>>>8):$(this,l,d,!0),d+2},u.prototype.writeUInt16BE=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[d]=l>>>8,this[d+1]=l&255):$(this,l,d,!1),d+2};function Z(w,l,d,S){l<0&&(l=4294967295+l+1);for(var P=0,j=Math.min(w.length-d,4);P<j;++P)w[d+P]=l>>>(S?P:3-P)*8&255}u.prototype.writeUInt32LE=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[d+3]=l>>>24,this[d+2]=l>>>16,this[d+1]=l>>>8,this[d]=l&255):Z(this,l,d,!0),d+4},u.prototype.writeUInt32BE=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255):Z(this,l,d,!1),d+4},u.prototype.writeIntLE=function(l,d,S,P){if(l=+l,d=d|0,!P){var j=Math.pow(2,8*S-1);F(this,l,d,S,j-1,-j)}var L=0,ee=1,ue=0;for(this[d]=l&255;++L<S&&(ee*=256);)l<0&&ue===0&&this[d+L-1]!==0&&(ue=1),this[d+L]=(l/ee>>0)-ue&255;return d+S},u.prototype.writeIntBE=function(l,d,S,P){if(l=+l,d=d|0,!P){var j=Math.pow(2,8*S-1);F(this,l,d,S,j-1,-j)}var L=S-1,ee=1,ue=0;for(this[d+L]=l&255;--L>=0&&(ee*=256);)l<0&&ue===0&&this[d+L+1]!==0&&(ue=1),this[d+L]=(l/ee>>0)-ue&255;return d+S},u.prototype.writeInt8=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,1,127,-128),u.TYPED_ARRAY_SUPPORT||(l=Math.floor(l)),l<0&&(l=255+l+1),this[d]=l&255,d+1},u.prototype.writeInt16LE=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[d]=l&255,this[d+1]=l>>>8):$(this,l,d,!0),d+2},u.prototype.writeInt16BE=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[d]=l>>>8,this[d+1]=l&255):$(this,l,d,!1),d+2},u.prototype.writeInt32LE=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[d]=l&255,this[d+1]=l>>>8,this[d+2]=l>>>16,this[d+3]=l>>>24):Z(this,l,d,!0),d+4},u.prototype.writeInt32BE=function(l,d,S){return l=+l,d=d|0,S||F(this,l,d,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),u.TYPED_ARRAY_SUPPORT?(this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255):Z(this,l,d,!1),d+4};function ae(w,l,d,S,P,j){if(d+S>w.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function de(w,l,d,S,P){return P||ae(w,l,d,4),t.write(w,l,d,S,23,4),d+4}u.prototype.writeFloatLE=function(l,d,S){return de(this,l,d,!0,S)},u.prototype.writeFloatBE=function(l,d,S){return de(this,l,d,!1,S)};function _e(w,l,d,S,P){return P||ae(w,l,d,8),t.write(w,l,d,S,52,8),d+8}u.prototype.writeDoubleLE=function(l,d,S){return _e(this,l,d,!0,S)},u.prototype.writeDoubleBE=function(l,d,S){return _e(this,l,d,!1,S)},u.prototype.copy=function(l,d,S,P){if(S||(S=0),!P&&P!==0&&(P=this.length),d>=l.length&&(d=l.length),d||(d=0),P>0&&P<S&&(P=S),P===S||l.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("sourceStart out of bounds");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),l.length-d<P-S&&(P=l.length-d+S);var j=P-S,L;if(this===l&&S<d&&d<P)for(L=j-1;L>=0;--L)l[L+d]=this[L+S];else if(j<1e3||!u.TYPED_ARRAY_SUPPORT)for(L=0;L<j;++L)l[L+d]=this[L+S];else Uint8Array.prototype.set.call(l,this.subarray(S,S+j),d);return j},u.prototype.fill=function(l,d,S,P){if(typeof l=="string"){if(typeof d=="string"?(P=d,d=0,S=this.length):typeof S=="string"&&(P=S,S=this.length),l.length===1){var j=l.charCodeAt(0);j<256&&(l=j)}if(P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!u.isEncoding(P))throw new TypeError("Unknown encoding: "+P)}else typeof l=="number"&&(l=l&255);if(d<0||this.length<d||this.length<S)throw new RangeError("Out of range index");if(S<=d)return this;d=d>>>0,S=S===void 0?this.length:S>>>0,l||(l=0);var L;if(typeof l=="number")for(L=d;L<S;++L)this[L]=l;else{var ee=u.isBuffer(l)?l:pe(new u(l,P).toString()),ue=ee.length;for(L=0;L<S-d;++L)this[L+d]=ee[L%ue]}return this};var Te=/[^+\/0-9A-Za-z-_]/g;function Re(w){if(w=ke(w).replace(Te,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function ke(w){return w.trim?w.trim():w.replace(/^\s+|\s+$/g,"")}function ge(w){return w<16?"0"+w.toString(16):w.toString(16)}function pe(w,l){l=l||1/0;for(var d,S=w.length,P=null,j=[],L=0;L<S;++L){if(d=w.charCodeAt(L),d>55295&&d<57344){if(!P){if(d>56319){(l-=3)>-1&&j.push(239,191,189);continue}else if(L+1===S){(l-=3)>-1&&j.push(239,191,189);continue}P=d;continue}if(d<56320){(l-=3)>-1&&j.push(239,191,189),P=d;continue}d=(P-55296<<10|d-56320)+65536}else P&&(l-=3)>-1&&j.push(239,191,189);if(P=null,d<128){if((l-=1)<0)break;j.push(d)}else if(d<2048){if((l-=2)<0)break;j.push(d>>6|192,d&63|128)}else if(d<65536){if((l-=3)<0)break;j.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((l-=4)<0)break;j.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return j}function Pe(w){for(var l=[],d=0;d<w.length;++d)l.push(w.charCodeAt(d)&255);return l}function je(w,l){for(var d,S,P,j=[],L=0;L<w.length&&!((l-=2)<0);++L)d=w.charCodeAt(L),S=d>>8,P=d%256,j.push(P),j.push(S);return j}function Be(w){return e.toByteArray(Re(w))}function Xe(w,l,d,S){for(var P=0;P<S&&!(P+d>=l.length||P>=w.length);++P)l[P+d]=w[P];return P}function xs(w){return w!==w}})(se);var Fe;typeof window<"u"&&window.crypto&&(Fe=window.crypto);!Fe&&typeof window<"u"&&window.msCrypto&&(Fe=window.msCrypto);!Fe&&typeof global<"u"&&global.crypto&&(Fe=global.crypto);if(!Fe&&typeof require=="function")try{Fe=require("crypto")}catch{}function Sd(){if(Fe){if(typeof Fe.getRandomValues=="function")try{return Fe.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof Fe.randomBytes=="function")try{return Fe.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function Ad(r){for(var e=r.words,t=r.sigBytes,n=[],o=0;o<t;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((i&15).toString(16))}return n.join("")}var Id=function(){function r(t,n){t=this.words=t||[],n!=null?this.sigBytes=n:this.sigBytes=t.length*4}var e=r.prototype;return e.random=function(n){for(var o=[],i=0;i<n;i+=4)o.push(Sd());return new r(o,n)},e.toString=function(){return Ad(this)},r}();function G(r,e){r!=null&&this.fromString(r,e)}function Ce(){return new G(null)}var ot,Ed=0xdeadbeefcafe,Io=(Ed&16777215)==15715070;function Cd(r,e,t,n,o,i){for(;--i>=0;){var s=e*this[r++]+t[n]+o;o=Math.floor(s/67108864),t[n++]=s&67108863}return o}function Td(r,e,t,n,o,i){for(var s=e&32767,u=e>>15;--i>=0;){var f=this[r]&32767,a=this[r++]>>15,c=u*f+a*s;f=s*f+((c&32767)<<15)+t[n]+(o&1073741823),o=(f>>>30)+(c>>>15)+u*a+(o>>>30),t[n++]=f&1073741823}return o}function Pd(r,e,t,n,o,i){for(var s=e&16383,u=e>>14;--i>=0;){var f=this[r]&16383,a=this[r++]>>14,c=u*f+a*s;f=s*f+((c&16383)<<14)+t[n]+o,o=(f>>28)+(c>>14)+u*a,t[n++]=f&268435455}return o}var Eo=typeof navigator<"u";Eo&&Io&&navigator.appName=="Microsoft Internet Explorer"?(G.prototype.am=Td,ot=30):Eo&&Io&&navigator.appName!="Netscape"?(G.prototype.am=Cd,ot=26):(G.prototype.am=Pd,ot=28);G.prototype.DB=ot;G.prototype.DM=(1<<ot)-1;G.prototype.DV=1<<ot;var Bn=52;G.prototype.FV=Math.pow(2,Bn);G.prototype.F1=Bn-ot;G.prototype.F2=2*ot-Bn;var xd="0123456789abcdefghijklmnopqrstuvwxyz",Er=new Array,Rt,Me;Rt="0".charCodeAt(0);for(Me=0;Me<=9;++Me)Er[Rt++]=Me;Rt="a".charCodeAt(0);for(Me=10;Me<36;++Me)Er[Rt++]=Me;Rt="A".charCodeAt(0);for(Me=10;Me<36;++Me)Er[Rt++]=Me;function Co(r){return xd.charAt(r)}function Ud(r,e){var t=Er[r.charCodeAt(e)];return t??-1}function Rd(r){for(var e=this.t-1;e>=0;--e)r[e]=this[e];r.t=this.t,r.s=this.s}function Od(r){this.t=1,this.s=r<0?-1:0,r>0?this[0]=r:r<-1?this[0]=r+this.DV:this.t=0}function Ln(r){var e=Ce();return e.fromInt(r),e}function Dd(r,e){var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var n=r.length,o=!1,i=0;--n>=0;){var s=Ud(r,n);if(s<0){r.charAt(n)=="-"&&(o=!0);continue}o=!1,i==0?this[this.t++]=s:i+t>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,i+=t,i>=this.DB&&(i-=this.DB)}this.clamp(),o&&G.ZERO.subTo(this,this)}function Fd(){for(var r=this.s&this.DM;this.t>0&&this[this.t-1]==r;)--this.t}function Md(r){if(this.s<0)return"-"+this.negate().toString(r);var e;if(r==16)e=4;else if(r==8)e=3;else if(r==2)e=1;else if(r==32)e=5;else if(r==4)e=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var t=(1<<e)-1,n,o=!1,i="",s=this.t,u=this.DB-s*this.DB%e;if(s-- >0)for(u<this.DB&&(n=this[s]>>u)>0&&(o=!0,i=Co(n));s>=0;)u<e?(n=(this[s]&(1<<u)-1)<<e-u,n|=this[--s]>>(u+=this.DB-e)):(n=this[s]>>(u-=e)&t,u<=0&&(u+=this.DB,--s)),n>0&&(o=!0),o&&(i+=Co(n));return o?i:"0"}function kd(){var r=Ce();return G.ZERO.subTo(this,r),r}function Nd(){return this.s<0?this.negate():this}function jd(r){var e=this.s-r.s;if(e!=0)return e;var t=this.t;if(e=t-r.t,e!=0)return this.s<0?-e:e;for(;--t>=0;)if((e=this[t]-r[t])!=0)return e;return 0}function Kn(r){var e=1,t;return(t=r>>>16)!=0&&(r=t,e+=16),(t=r>>8)!=0&&(r=t,e+=8),(t=r>>4)!=0&&(r=t,e+=4),(t=r>>2)!=0&&(r=t,e+=2),(t=r>>1)!=0&&(r=t,e+=1),e}function Bd(){return this.t<=0?0:this.DB*(this.t-1)+Kn(this[this.t-1]^this.s&this.DM)}function Ld(r,e){var t;for(t=this.t-1;t>=0;--t)e[t+r]=this[t];for(t=r-1;t>=0;--t)e[t]=0;e.t=this.t+r,e.s=this.s}function Kd(r,e){for(var t=r;t<this.t;++t)e[t-r]=this[t];e.t=Math.max(this.t-r,0),e.s=this.s}function qd(r,e){var t=r%this.DB,n=this.DB-t,o=(1<<n)-1,i=Math.floor(r/this.DB),s=this.s<<t&this.DM,u;for(u=this.t-1;u>=0;--u)e[u+i+1]=this[u]>>n|s,s=(this[u]&o)<<t;for(u=i-1;u>=0;--u)e[u]=0;e[i]=s,e.t=this.t+i+1,e.s=this.s,e.clamp()}function Hd(r,e){e.s=this.s;var t=Math.floor(r/this.DB);if(t>=this.t){e.t=0;return}var n=r%this.DB,o=this.DB-n,i=(1<<n)-1;e[0]=this[t]>>n;for(var s=t+1;s<this.t;++s)e[s-t-1]|=(this[s]&i)<<o,e[s-t]=this[s]>>n;n>0&&(e[this.t-t-1]|=(this.s&i)<<o),e.t=this.t-t,e.clamp()}function zd(r,e){for(var t=0,n=0,o=Math.min(r.t,this.t);t<o;)n+=this[t]-r[t],e[t++]=n&this.DM,n>>=this.DB;if(r.t<this.t){for(n-=r.s;t<this.t;)n+=this[t],e[t++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;t<r.t;)n-=r[t],e[t++]=n&this.DM,n>>=this.DB;n-=r.s}e.s=n<0?-1:0,n<-1?e[t++]=this.DV+n:n>0&&(e[t++]=n),e.t=t,e.clamp()}function Vd(r,e){var t=this.abs(),n=r.abs(),o=t.t;for(e.t=o+n.t;--o>=0;)e[o]=0;for(o=0;o<n.t;++o)e[o+t.t]=t.am(0,n[o],e,o,0,t.t);e.s=0,e.clamp(),this.s!=r.s&&G.ZERO.subTo(e,e)}function Gd(r){for(var e=this.abs(),t=r.t=2*e.t;--t>=0;)r[t]=0;for(t=0;t<e.t-1;++t){var n=e.am(t,e[t],r,2*t,0,1);(r[t+e.t]+=e.am(t+1,2*e[t],r,2*t+1,n,e.t-t-1))>=e.DV&&(r[t+e.t]-=e.DV,r[t+e.t+1]=1)}r.t>0&&(r[r.t-1]+=e.am(t,e[t],r,2*t,0,1)),r.s=0,r.clamp()}function $d(r,e,t){var n=r.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t){e!=null&&e.fromInt(0),t!=null&&this.copyTo(t);return}t==null&&(t=Ce());var i=Ce(),s=this.s,u=r.s,f=this.DB-Kn(n[n.t-1]);f>0?(n.lShiftTo(f,i),o.lShiftTo(f,t)):(n.copyTo(i),o.copyTo(t));var a=i.t,c=i[a-1];if(c!=0){var h=c*(1<<this.F1)+(a>1?i[a-2]>>this.F2:0),y=this.FV/h,_=(1<<this.F1)/h,b=1<<this.F2,E=t.t,C=E-a,O=e??Ce();for(i.dlShiftTo(C,O),t.compareTo(O)>=0&&(t[t.t++]=1,t.subTo(O,t)),G.ONE.dlShiftTo(a,O),O.subTo(i,i);i.t<a;)i[i.t++]=0;for(;--C>=0;){var T=t[--E]==c?this.DM:Math.floor(t[E]*y+(t[E-1]+b)*_);if((t[E]+=i.am(0,T,t,C,0,a))<T)for(i.dlShiftTo(C,O),t.subTo(O,t);t[E]<--T;)t.subTo(O,t)}e!=null&&(t.drShiftTo(a,e),s!=u&&G.ZERO.subTo(e,e)),t.t=a,t.clamp(),f>0&&t.rShiftTo(f,t),s<0&&G.ZERO.subTo(t,t)}}}function Wd(r){var e=Ce();return this.abs().divRemTo(r,null,e),this.s<0&&e.compareTo(G.ZERO)>0&&r.subTo(e,e),e}function Yd(){if(this.t<1)return 0;var r=this[0];if(!(r&1))return 0;var e=r&3;return e=e*(2-(r&15)*e)&15,e=e*(2-(r&255)*e)&255,e=e*(2-((r&65535)*e&65535))&65535,e=e*(2-r*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Jd(r){return this.compareTo(r)==0}function Zd(r,e){for(var t=0,n=0,o=Math.min(r.t,this.t);t<o;)n+=this[t]+r[t],e[t++]=n&this.DM,n>>=this.DB;if(r.t<this.t){for(n+=r.s;t<this.t;)n+=this[t],e[t++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;t<r.t;)n+=r[t],e[t++]=n&this.DM,n>>=this.DB;n+=r.s}e.s=n<0?-1:0,n>0?e[t++]=n:n<-1&&(e[t++]=this.DV+n),e.t=t,e.clamp()}function Xd(r){var e=Ce();return this.addTo(r,e),e}function Qd(r){var e=Ce();return this.subTo(r,e),e}function eh(r){var e=Ce();return this.multiplyTo(r,e),e}function th(r){var e=Ce();return this.divRemTo(r,e,null),e}function Ot(r){this.m=r,this.mp=r.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<r.DB-15)-1,this.mt2=2*r.t}function rh(r){var e=Ce();return r.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),r.s<0&&e.compareTo(G.ZERO)>0&&this.m.subTo(e,e),e}function nh(r){var e=Ce();return r.copyTo(e),this.reduce(e),e}function ih(r){for(;r.t<=this.mt2;)r[r.t++]=0;for(var e=0;e<this.m.t;++e){var t=r[e]&32767,n=t*this.mpl+((t*this.mph+(r[e]>>15)*this.mpl&this.um)<<15)&r.DM;for(t=e+this.m.t,r[t]+=this.m.am(0,n,r,e,0,this.m.t);r[t]>=r.DV;)r[t]-=r.DV,r[++t]++}r.clamp(),r.drShiftTo(this.m.t,r),r.compareTo(this.m)>=0&&r.subTo(this.m,r)}function oh(r,e){r.squareTo(e),this.reduce(e)}function sh(r,e,t){r.multiplyTo(e,t),this.reduce(t)}Ot.prototype.convert=rh;Ot.prototype.revert=nh;Ot.prototype.reduce=ih;Ot.prototype.mulTo=sh;Ot.prototype.sqrTo=oh;function ah(r,e,t){var n=r.bitLength(),o,i=Ln(1),s=new Ot(e);if(n<=0)return i;n<18?o=1:n<48?o=3:n<144?o=4:n<768?o=5:o=6;var u=new Array,f=3,a=o-1,c=(1<<o)-1;if(u[1]=s.convert(this),o>1){var h=Ce();for(s.sqrTo(u[1],h);f<=c;)u[f]=Ce(),s.mulTo(h,u[f-2],u[f]),f+=2}var y=r.t-1,_,b=!0,E=Ce(),C;for(n=Kn(r[y])-1;y>=0;){for(n>=a?_=r[y]>>n-a&c:(_=(r[y]&(1<<n+1)-1)<<a-n,y>0&&(_|=r[y-1]>>this.DB+n-a)),f=o;!(_&1);)_>>=1,--f;if((n-=f)<0&&(n+=this.DB,--y),b)u[_].copyTo(i),b=!1;else{for(;f>1;)s.sqrTo(i,E),s.sqrTo(E,i),f-=2;f>0?s.sqrTo(i,E):(C=i,i=E,E=C),s.mulTo(E,u[_],i)}for(;y>=0&&!(r[y]&1<<n);)s.sqrTo(i,E),C=i,i=E,E=C,--n<0&&(n=this.DB-1,--y)}var O=s.revert(i);return t(null,O),O}G.prototype.copyTo=Rd;G.prototype.fromInt=Od;G.prototype.fromString=Dd;G.prototype.clamp=Fd;G.prototype.dlShiftTo=Ld;G.prototype.drShiftTo=Kd;G.prototype.lShiftTo=qd;G.prototype.rShiftTo=Hd;G.prototype.subTo=zd;G.prototype.multiplyTo=Vd;G.prototype.squareTo=Gd;G.prototype.divRemTo=$d;G.prototype.invDigit=Yd;G.prototype.addTo=Zd;G.prototype.toString=Md;G.prototype.negate=kd;G.prototype.abs=Nd;G.prototype.compareTo=jd;G.prototype.bitLength=Bd;G.prototype.mod=Wd;G.prototype.equals=Jd;G.prototype.add=Xd;G.prototype.subtract=Qd;G.prototype.multiply=eh;G.prototype.divide=th;G.prototype.modPow=ah;G.ZERO=Ln(0);G.ONE=Ln(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function $r(r){return se.Buffer.from(new Id().random(r).toString(),"hex")}var uh=/^[89a-f]/i,ch="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",fh="userAttributes.",_t=function(){function r(t){this.N=new G(ch,16),this.g=new G("2",16),this.k=new G(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=se.Buffer.from("Caldera Derived Key","utf8"),this.poolName=t}var e=r.prototype;return e.getSmallAValue=function(){return this.smallAValue},e.getLargeAValue=function(n){var o=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(i,s){i&&n(i,null),o.largeAValue=s,n(null,o.largeAValue)})},e.generateRandomSmallA=function(){var n=$r(128).toString("hex"),o=new G(n,16);return o},e.generateRandomString=function(){return $r(40).toString("base64")},e.getRandomPassword=function(){return this.randomPassword},e.getSaltDevices=function(){return this.SaltToHashDevices},e.getVerifierDevices=function(){return this.verifierDevices},e.generateHashDevice=function(n,o,i){var s=this;this.randomPassword=this.generateRandomString();var u=""+n+o+":"+this.randomPassword,f=this.hash(u),a=$r(16).toString("hex");this.SaltToHashDevices=this.padHex(new G(a,16)),this.g.modPow(new G(this.hexHash(this.SaltToHashDevices+f),16),this.N,function(c,h){c&&i(c,null),s.verifierDevices=s.padHex(h),i(null,null)})},e.calculateA=function(n,o){var i=this;this.g.modPow(n,this.N,function(s,u){s&&o(s,null),u.mod(i.N).equals(G.ZERO)&&o(new Error("Illegal paramater. A mod N cannot be 0."),null),o(null,u)})},e.calculateU=function(n,o){this.UHexHash=this.hexHash(this.padHex(n)+this.padHex(o));var i=new G(this.UHexHash,16);return i},e.hash=function(n){var o=new it.Sha256;o.update(n);var i=o.digestSync(),s=se.Buffer.from(i).toString("hex");return new Array(64-s.length).join("0")+s},e.hexHash=function(n){return this.hash(se.Buffer.from(n,"hex"))},e.computehkdf=function(n,o){var i=se.Buffer.concat([this.infoBits,se.Buffer.from(String.fromCharCode(1),"utf8")]),s=new it.Sha256(o);s.update(n);var u=s.digestSync(),f=new it.Sha256(u);f.update(i);var a=f.digestSync(),c=a,h=c.slice(0,16);return h},e.getPasswordAuthenticationKey=function(n,o,i,s,u){var f=this;if(i.mod(this.N).equals(G.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,i),this.UValue.equals(G.ZERO))throw new Error("U cannot be zero.");var a=""+this.poolName+n+":"+o,c=this.hash(a),h=new G(this.hexHash(this.padHex(s)+c),16);this.calculateS(h,i,function(y,_){y&&u(y,null);var b=f.computehkdf(se.Buffer.from(f.padHex(_),"hex"),se.Buffer.from(f.padHex(f.UValue),"hex"));u(null,b)})},e.calculateS=function(n,o,i){var s=this;this.g.modPow(n,this.N,function(u,f){u&&i(u,null);var a=o.subtract(s.k.multiply(f));a.modPow(s.smallAValue.add(s.UValue.multiply(n)),s.N,function(c,h){c&&i(c,null),i(null,h.mod(s.N))})})},e.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return fh},e.padHex=function(n){if(!(n instanceof G))throw new Error("Not a BigInteger");var o=n.compareTo(G.ZERO)<0,i=n.abs().toString(16);if(i=i.length%2!==0?"0"+i:i,i=uh.test(i)?"00"+i:i,o){var s=i.split("").map(function(f){var a=~parseInt(f,16)&15;return"0123456789ABCDEF".charAt(a)}).join(""),u=new G(s,16).add(G.ONE);i=u.toString(16),i.toUpperCase().startsWith("FF8")&&(i=i.substring(2))}return i},r}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Es=function(){function r(t){this.jwtToken=t||"",this.payload=this.decodePayload()}var e=r.prototype;return e.getJwtToken=function(){return this.jwtToken},e.getExpiration=function(){return this.payload.exp},e.getIssuedAt=function(){return this.payload.iat},e.decodePayload=function(){var n=this.jwtToken.split(".")[1];try{return JSON.parse(se.Buffer.from(n,"base64").toString("utf8"))}catch{return{}}},r}();function lh(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,wn(r,e)}function wn(r,e){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},wn(r,e)}var _n=function(r){lh(e,r);function e(t){var n=t===void 0?{}:t,o=n.AccessToken;return r.call(this,o||"")||this}return e}(Es);function dh(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,bn(r,e)}function bn(r,e){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},bn(r,e)}var Sn=function(r){dh(e,r);function e(t){var n=t===void 0?{}:t,o=n.IdToken;return r.call(this,o||"")||this}return e}(Es);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var An=function(){function r(t){var n=t===void 0?{}:t,o=n.RefreshToken;this.token=o||""}var e=r.prototype;return e.getToken=function(){return this.token},r}(),hh="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var In="aws-amplify/"+hh,nt={userAgent:In+" js",product:"",navigator:null,isReactNative:!1};if(typeof navigator<"u"&&navigator.product)switch(nt.product=navigator.product||"",nt.navigator=navigator||null,navigator.product){case"ReactNative":nt.userAgent=In+" react-native",nt.isReactNative=!0;break;default:nt.userAgent=In+" js",nt.isReactNative=!1;break}var gh=function(){return nt.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var En=function(){function r(t){var n=t===void 0?{}:t,o=n.IdToken,i=n.RefreshToken,s=n.AccessToken,u=n.ClockDrift;if(s==null||o==null)throw new Error("Id token and Access Token must be present.");this.idToken=o,this.refreshToken=i,this.accessToken=s,this.clockDrift=u===void 0?this.calculateClockDrift():u}var e=r.prototype;return e.getIdToken=function(){return this.idToken},e.getRefreshToken=function(){return this.refreshToken},e.getAccessToken=function(){return this.accessToken},e.getClockDrift=function(){return this.clockDrift},e.calculateClockDrift=function(){var n=Math.floor(new Date/1e3),o=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return n-o},e.isValid=function(){var n=Math.floor(new Date/1e3),o=n-this.clockDrift;return o<this.accessToken.getExpiration()&&o<this.idToken.getExpiration()},r}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var vh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ph=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],To=function(){function r(){}var e=r.prototype;return e.getNowString=function(){var n=new Date,o=ph[n.getUTCDay()],i=vh[n.getUTCMonth()],s=n.getUTCDate(),u=n.getUTCHours();u<10&&(u="0"+u);var f=n.getUTCMinutes();f<10&&(f="0"+f);var a=n.getUTCSeconds();a<10&&(a="0"+a);var c=n.getUTCFullYear(),h=o+" "+i+" "+s+" "+u+":"+f+":"+a+" UTC "+c;return h},r}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var St=function(){function r(t){var n=t===void 0?{}:t,o=n.Name,i=n.Value;this.Name=o||"",this.Value=i||""}var e=r.prototype;return e.getValue=function(){return this.Value},e.setValue=function(n){return this.Value=n,this},e.getName=function(){return this.Name},e.setName=function(n){return this.Name=n,this},e.toString=function(){return JSON.stringify(this)},e.toJSON=function(){return{Name:this.Name,Value:this.Value}},r}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var ut={},yh=function(){function r(){}return r.setItem=function(t,n){return ut[t]=n,ut[t]},r.getItem=function(t){return Object.prototype.hasOwnProperty.call(ut,t)?ut[t]:void 0},r.removeItem=function(t){return delete ut[t]},r.clear=function(){return ut={},ut},r}(),Cs=function(){function r(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=yh}}var e=r.prototype;return e.getStorage=function(){return this.storageWindow},r}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var mh=typeof navigator<"u",Po=mh?nt.isReactNative?"react-native":navigator.userAgent:"nodejs",Cn=function(){function r(t){if(t==null||t.Username==null||t.Pool==null)throw new Error("Username and Pool information are required.");this.username=t.Username||"",this.pool=t.Pool,this.Session=null,this.client=t.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=t.Storage||new Cs().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var e=r.prototype;return e.setSignInUserSession=function(n){this.clearCachedUserData(),this.signInUserSession=n,this.cacheTokens()},e.getSignInUserSession=function(){return this.signInUserSession},e.getUsername=function(){return this.username},e.getAuthenticationFlowType=function(){return this.authenticationFlowType},e.setAuthenticationFlowType=function(n){this.authenticationFlowType=n},e.initiateAuth=function(n,o){var i=this,s=n.getAuthParameters();s.USERNAME=this.username;var u=Object.keys(n.getValidationData()).length!==0?n.getValidationData():n.getClientMetadata(),f={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:u};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",f,function(a,c){if(a)return o.onFailure(a);var h=c.ChallengeName,y=c.ChallengeParameters;return h==="CUSTOM_CHALLENGE"?(i.Session=c.Session,o.customChallenge(y)):(i.signInUserSession=i.getCognitoUserSession(c.AuthenticationResult),i.cacheTokens(),o.onSuccess(i.signInUserSession))})},e.authenticateUser=function(n,o){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(n,o):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(n,o):o.onFailure(new Error("Authentication flow type is invalid."))},e.authenticateUserDefaultAuth=function(n,o){var i=this,s=new _t(this.pool.getUserPoolName()),u=new To,f,a,c={};this.deviceKey!=null&&(c.DEVICE_KEY=this.deviceKey),c.USERNAME=this.username,s.getLargeAValue(function(h,y){h&&o.onFailure(h),c.SRP_A=y.toString(16),i.authenticationFlowType==="CUSTOM_AUTH"&&(c.CHALLENGE_NAME="SRP_A");var _=Object.keys(n.getValidationData()).length!==0?n.getValidationData():n.getClientMetadata(),b={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:c,ClientMetadata:_};i.getUserContextData(i.username)&&(b.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",b,function(E,C){if(E)return o.onFailure(E);var O=C.ChallengeParameters;i.username=O.USER_ID_FOR_SRP,i.userDataKey=i.keyPrefix+"."+i.username+".userData",f=new G(O.SRP_B,16),a=new G(O.SALT,16),i.getCachedDeviceKeyAndPassword(),s.getPasswordAuthenticationKey(i.username,n.getPassword(),f,a,function(T,M){T&&o.onFailure(T);var q=u.getNowString(),z=se.Buffer.concat([se.Buffer.from(i.pool.getUserPoolName(),"utf8"),se.Buffer.from(i.username,"utf8"),se.Buffer.from(O.SECRET_BLOCK,"base64"),se.Buffer.from(q,"utf8")]),V=new it.Sha256(M);V.update(z);var Y=V.digestSync(),R=se.Buffer.from(Y).toString("base64"),W={};W.USERNAME=i.username,W.PASSWORD_CLAIM_SECRET_BLOCK=O.SECRET_BLOCK,W.TIMESTAMP=q,W.PASSWORD_CLAIM_SIGNATURE=R,i.deviceKey!=null&&(W.DEVICE_KEY=i.deviceKey);var g=function p(A,I){return i.client.request("RespondToAuthChallenge",A,function(m,x){return m&&m.code==="ResourceNotFoundException"&&m.message.toLowerCase().indexOf("device")!==-1?(W.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),p(A,I)):I(m,x)})},v={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:W,Session:C.Session,ClientMetadata:_};i.getUserContextData()&&(v.UserContextData=i.getUserContextData()),g(v,function(p,A){return p?o.onFailure(p):i.authenticateUserInternal(A,s,o)})})})})},e.authenticateUserPlainUsernamePassword=function(n,o){var i=this,s={};if(s.USERNAME=this.username,s.PASSWORD=n.getPassword(),!s.PASSWORD){o.onFailure(new Error("PASSWORD parameter is required"));return}var u=new _t(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(s.DEVICE_KEY=this.deviceKey);var f=Object.keys(n.getValidationData()).length!==0?n.getValidationData():n.getClientMetadata(),a={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:f};this.getUserContextData(this.username)&&(a.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",a,function(c,h){return c?o.onFailure(c):i.authenticateUserInternal(h,u,o)})},e.authenticateUserInternal=function(n,o,i){var s=this,u=n.ChallengeName,f=n.ChallengeParameters;if(u==="SMS_MFA")return this.Session=n.Session,i.mfaRequired(u,f);if(u==="SELECT_MFA_TYPE")return this.Session=n.Session,i.selectMFAType(u,f);if(u==="MFA_SETUP")return this.Session=n.Session,i.mfaSetup(u,f);if(u==="SOFTWARE_TOKEN_MFA")return this.Session=n.Session,i.totpRequired(u,f);if(u==="CUSTOM_CHALLENGE")return this.Session=n.Session,i.customChallenge(f);if(u==="NEW_PASSWORD_REQUIRED"){this.Session=n.Session;var a=null,c=null,h=[],y=o.getNewPasswordRequiredChallengeUserAttributePrefix();if(f&&(a=JSON.parse(n.ChallengeParameters.userAttributes),c=JSON.parse(n.ChallengeParameters.requiredAttributes)),c)for(var _=0;_<c.length;_++)h[_]=c[_].substr(y.length);return i.newPasswordRequired(a,h)}if(u==="DEVICE_SRP_AUTH"){this.Session=n.Session,this.getDeviceResponse(i);return}this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=u,this.cacheTokens();var b=n.AuthenticationResult.NewDeviceMetadata;if(b==null)return i.onSuccess(this.signInUserSession);o.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(E){if(E)return i.onFailure(E);var C={Salt:se.Buffer.from(o.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:se.Buffer.from(o.getVerifierDevices(),"hex").toString("base64")};s.verifierDevices=C.PasswordVerifier,s.deviceGroupKey=b.DeviceGroupKey,s.randomPassword=o.getRandomPassword(),s.client.request("ConfirmDevice",{DeviceKey:b.DeviceKey,AccessToken:s.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:C,DeviceName:Po},function(O,T){return O?i.onFailure(O):(s.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,s.cacheDeviceKeyAndPassword(),T.UserConfirmationNecessary===!0?i.onSuccess(s.signInUserSession,T.UserConfirmationNecessary):i.onSuccess(s.signInUserSession))})})},e.completeNewPasswordChallenge=function(n,o,i,s){var u=this;if(!n)return i.onFailure(new Error("New password is required."));var f=new _t(this.pool.getUserPoolName()),a=f.getNewPasswordRequiredChallengeUserAttributePrefix(),c={};o&&Object.keys(o).forEach(function(y){c[a+y]=o[y]}),c.NEW_PASSWORD=n,c.USERNAME=this.username;var h={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:c,Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(h.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",h,function(y,_){return y?i.onFailure(y):u.authenticateUserInternal(_,f,i)})},e.getDeviceResponse=function(n,o){var i=this,s=new _t(this.deviceGroupKey),u=new To,f={};f.USERNAME=this.username,f.DEVICE_KEY=this.deviceKey,s.getLargeAValue(function(a,c){a&&n.onFailure(a),f.SRP_A=c.toString(16);var h={ChallengeName:"DEVICE_SRP_AUTH",ClientId:i.pool.getClientId(),ChallengeResponses:f,ClientMetadata:o,Session:i.Session};i.getUserContextData()&&(h.UserContextData=i.getUserContextData()),i.client.request("RespondToAuthChallenge",h,function(y,_){if(y)return n.onFailure(y);var b=_.ChallengeParameters,E=new G(b.SRP_B,16),C=new G(b.SALT,16);s.getPasswordAuthenticationKey(i.deviceKey,i.randomPassword,E,C,function(O,T){if(O)return n.onFailure(O);var M=u.getNowString(),q=se.Buffer.concat([se.Buffer.from(i.deviceGroupKey,"utf8"),se.Buffer.from(i.deviceKey,"utf8"),se.Buffer.from(b.SECRET_BLOCK,"base64"),se.Buffer.from(M,"utf8")]),z=new it.Sha256(T);z.update(q);var V=z.digestSync(),Y=se.Buffer.from(V).toString("base64"),R={};R.USERNAME=i.username,R.PASSWORD_CLAIM_SECRET_BLOCK=b.SECRET_BLOCK,R.TIMESTAMP=M,R.PASSWORD_CLAIM_SIGNATURE=Y,R.DEVICE_KEY=i.deviceKey;var W={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:R,Session:_.Session};i.getUserContextData()&&(W.UserContextData=i.getUserContextData()),i.client.request("RespondToAuthChallenge",W,function(g,v){return g?n.onFailure(g):(i.signInUserSession=i.getCognitoUserSession(v.AuthenticationResult),i.cacheTokens(),n.onSuccess(i.signInUserSession))})})})})},e.confirmRegistration=function(n,o,i,s){var u={ClientId:this.pool.getClientId(),ConfirmationCode:n,Username:this.username,ForceAliasCreation:o,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",u,function(f){return f?i(f,null):i(null,"SUCCESS")})},e.sendCustomChallengeAnswer=function(n,o,i){var s=this,u={};u.USERNAME=this.username,u.ANSWER=n;var f=new _t(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(u.DEVICE_KEY=this.deviceKey);var a={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:u,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:i};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(c,h){return c?o.onFailure(c):s.authenticateUserInternal(h,f,o)})},e.sendMFACode=function(n,o,i,s){var u=this,f={};f.USERNAME=this.username,f.SMS_MFA_CODE=n;var a=i||"SMS_MFA";a==="SOFTWARE_TOKEN_MFA"&&(f.SOFTWARE_TOKEN_MFA_CODE=n),this.deviceKey!=null&&(f.DEVICE_KEY=this.deviceKey);var c={ChallengeName:a,ChallengeResponses:f,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,function(h,y){if(h)return o.onFailure(h);var _=y.ChallengeName;if(_==="DEVICE_SRP_AUTH"){u.getDeviceResponse(o);return}if(u.signInUserSession=u.getCognitoUserSession(y.AuthenticationResult),u.cacheTokens(),y.AuthenticationResult.NewDeviceMetadata==null)return o.onSuccess(u.signInUserSession);var b=new _t(u.pool.getUserPoolName());b.generateHashDevice(y.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,y.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(E){if(E)return o.onFailure(E);var C={Salt:se.Buffer.from(b.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:se.Buffer.from(b.getVerifierDevices(),"hex").toString("base64")};u.verifierDevices=C.PasswordVerifier,u.deviceGroupKey=y.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,u.randomPassword=b.getRandomPassword(),u.client.request("ConfirmDevice",{DeviceKey:y.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:u.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:C,DeviceName:Po},function(O,T){return O?o.onFailure(O):(u.deviceKey=y.AuthenticationResult.NewDeviceMetadata.DeviceKey,u.cacheDeviceKeyAndPassword(),T.UserConfirmationNecessary===!0?o.onSuccess(u.signInUserSession,T.UserConfirmationNecessary):o.onSuccess(u.signInUserSession))})})})},e.changePassword=function(n,o,i,s){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:n,ProposedPassword:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:s},function(u){return u?i(u,null):i(null,"SUCCESS")})},e.enableMFA=function(n){if(this.signInUserSession==null||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);var o=[],i={DeliveryMedium:"SMS",AttributeName:"phone_number"};o.push(i),this.client.request("SetUserSettings",{MFAOptions:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?n(s,null):n(null,"SUCCESS")})},e.setUserMfaPreference=function(n,o,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:n,SoftwareTokenMfaSettings:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?i(s,null):i(null,"SUCCESS")})},e.disableMFA=function(n){if(this.signInUserSession==null||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);var o=[];this.client.request("SetUserSettings",{MFAOptions:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i){return i?n(i,null):n(null,"SUCCESS")})},e.deleteUser=function(n,o){var i=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:o},function(s){return s?n(s,null):(i.clearCachedUser(),n(null,"SUCCESS"))})},e.updateAttributes=function(n,o,i){var s=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:n,ClientMetadata:i},function(u,f){return u?o(u,null):s.getUserData(function(){return o(null,"SUCCESS",f)},{bypassCache:!0})})},e.getUserAttributes=function(n){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o,i){if(o)return n(o,null);for(var s=[],u=0;u<i.UserAttributes.length;u++){var f={Name:i.UserAttributes[u].Name,Value:i.UserAttributes[u].Value},a=new St(f);s.push(a)}return n(null,s)})},e.getMFAOptions=function(n){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o,i){return o?n(o,null):n(null,i.MFAOptions)})},e.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},e.refreshSessionIfPossible=function(n){var o=this;return n===void 0&&(n={}),new Promise(function(i){var s=o.signInUserSession.getRefreshToken();s&&s.getToken()?o.refreshSession(s,i,n.clientMetadata):i()})},e.getUserData=function(n,o){var i=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),n(new Error("User is not authenticated"),null);var s=this.getUserDataFromCache();if(!s){this.fetchUserData().then(function(u){n(null,u)}).catch(n);return}if(this.isFetchUserDataAndTokenRequired(o)){this.fetchUserData().then(function(u){return i.refreshSessionIfPossible(o).then(function(){return u})}).then(function(u){return n(null,u)}).catch(n);return}try{n(null,JSON.parse(s));return}catch(u){this.clearCachedUserData(),n(u,null);return}},e.getUserDataFromCache=function(){var n=this.storage.getItem(this.userDataKey);return n},e.isFetchUserDataAndTokenRequired=function(n){var o=n||{},i=o.bypassCache,s=i===void 0?!1:i;return s},e.fetchUserData=function(){var n=this;return this.createGetUserRequest().then(function(o){return n.cacheUserData(o),o})},e.deleteAttributes=function(n,o){var i=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return o(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:n,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?o(s,null):i.getUserData(function(){return o(null,"SUCCESS")},{bypassCache:!0})})},e.resendConfirmationCode=function(n,o){var i={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:o};this.client.request("ResendConfirmationCode",i,function(s,u){return s?n(s,null):n(null,u)})},e.getSession=function(n,o){if(o===void 0&&(o={}),this.username==null)return n(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return n(null,this.signInUserSession);var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=i+".idToken",u=i+".accessToken",f=i+".refreshToken",a=i+".clockDrift";if(this.storage.getItem(s)){var c=new Sn({IdToken:this.storage.getItem(s)}),h=new _n({AccessToken:this.storage.getItem(u)}),y=new An({RefreshToken:this.storage.getItem(f)}),_=parseInt(this.storage.getItem(a),0)||0,b={IdToken:c,AccessToken:h,RefreshToken:y,ClockDrift:_},E=new En(b);if(E.isValid())return this.signInUserSession=E,n(null,this.signInUserSession);if(!y.getToken())return n(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(y,n,o.clientMetadata)}else n(new Error("Local storage is missing an ID Token, Please authenticate"),null)},e.refreshSession=function(n,o,i){var s=this,u=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(o):o,f={};f.REFRESH_TOKEN=n.getToken();var a="CognitoIdentityServiceProvider."+this.pool.getClientId(),c=a+".LastAuthUser";if(this.storage.getItem(c)){this.username=this.storage.getItem(c);var h=a+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(h),f.DEVICE_KEY=this.deviceKey}var y={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:f,ClientMetadata:i};this.getUserContextData()&&(y.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",y,function(_,b){if(_)return _.code==="NotAuthorizedException"&&s.clearCachedUser(),u(_,null);if(b){var E=b.AuthenticationResult;return Object.prototype.hasOwnProperty.call(E,"RefreshToken")||(E.RefreshToken=n.getToken()),s.signInUserSession=s.getCognitoUserSession(E),s.cacheTokens(),u(null,s.signInUserSession)}})},e.cacheTokens=function(){var n="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=n+"."+this.username+".idToken",i=n+"."+this.username+".accessToken",s=n+"."+this.username+".refreshToken",u=n+"."+this.username+".clockDrift",f=n+".LastAuthUser";this.storage.setItem(o,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(i,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(s,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(u,""+this.signInUserSession.getClockDrift()),this.storage.setItem(f,this.username)},e.cacheUserData=function(n){this.storage.setItem(this.userDataKey,JSON.stringify(n))},e.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},e.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},e.cacheDeviceKeyAndPassword=function(){var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=n+".deviceKey",i=n+".randomPasswordKey",s=n+".deviceGroupKey";this.storage.setItem(o,this.deviceKey),this.storage.setItem(i,this.randomPassword),this.storage.setItem(s,this.deviceGroupKey)},e.getCachedDeviceKeyAndPassword=function(){var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=n+".deviceKey",i=n+".randomPasswordKey",s=n+".deviceGroupKey";this.storage.getItem(o)&&(this.deviceKey=this.storage.getItem(o),this.randomPassword=this.storage.getItem(i),this.deviceGroupKey=this.storage.getItem(s))},e.clearCachedDeviceKeyAndPassword=function(){var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=n+".deviceKey",i=n+".randomPasswordKey",s=n+".deviceGroupKey";this.storage.removeItem(o),this.storage.removeItem(i),this.storage.removeItem(s)},e.clearCachedTokens=function(){var n="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=n+"."+this.username+".idToken",i=n+"."+this.username+".accessToken",s=n+"."+this.username+".refreshToken",u=n+".LastAuthUser",f=n+"."+this.username+".clockDrift";this.storage.removeItem(o),this.storage.removeItem(i),this.storage.removeItem(s),this.storage.removeItem(u),this.storage.removeItem(f)},e.getCognitoUserSession=function(n){var o=new Sn(n),i=new _n(n),s=new An(n),u={IdToken:o,AccessToken:i,RefreshToken:s};return new En(u)},e.forgotPassword=function(n,o){var i={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:o};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",i,function(s,u){return s?n.onFailure(s):typeof n.inputVerificationCode=="function"?n.inputVerificationCode(u):n.onSuccess(u)})},e.confirmPassword=function(n,o,i,s){var u={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:n,Password:o,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",u,function(f){return f?i.onFailure(f):i.onSuccess("SUCCESS")})},e.getAttributeVerificationCode=function(n,o,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:n,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:i},function(s,u){return s?o.onFailure(s):typeof o.inputVerificationCode=="function"?o.inputVerificationCode(u):o.onSuccess("SUCCESS")})},e.verifyAttribute=function(n,o,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:n,Code:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?i.onFailure(s):i.onSuccess("SUCCESS")})},e.getDevice=function(n){if(this.signInUserSession==null||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(o,i){return o?n.onFailure(o):n.onSuccess(i)})},e.forgetSpecificDevice=function(n,o){if(this.signInUserSession==null||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:n},function(i){return i?o.onFailure(i):o.onSuccess("SUCCESS")})},e.forgetDevice=function(n){var o=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:n.onFailure,onSuccess:function(s){return o.deviceKey=null,o.deviceGroupKey=null,o.randomPassword=null,o.clearCachedDeviceKeyAndPassword(),n.onSuccess(s)}})},e.setDeviceStatusRemembered=function(n){if(this.signInUserSession==null||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(o){return o?n.onFailure(o):n.onSuccess("SUCCESS")})},e.setDeviceStatusNotRemembered=function(n){if(this.signInUserSession==null||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(o){return o?n.onFailure(o):n.onSuccess("SUCCESS")})},e.listDevices=function(n,o,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));var s={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:n};o&&(s.PaginationToken=o),this.client.request("ListDevices",s,function(u,f){return u?i.onFailure(u):i.onSuccess(f)})},e.globalSignOut=function(n){var o=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i){return i?n.onFailure(i):(o.clearCachedUser(),n.onSuccess("SUCCESS"))})},e.signOut=function(n){var o=this;if(!n||typeof n!="function"){this.cleanClientData();return}this.getSession(function(i,s){if(i)return n(i);o.revokeTokens(function(u){o.cleanClientData(),n(u)})})},e.revokeTokens=function(n){if(n===void 0&&(n=function(){}),typeof n!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var o=new Error("User is not authenticated");return n(o)}if(!this.signInUserSession.getAccessToken()){var i=new Error("No Access token available");return n(i)}var s=this.signInUserSession.getRefreshToken().getToken(),u=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(u)&&s)return this.revokeToken({token:s,callback:n});n()},e.isSessionRevocable=function(n){if(n&&typeof n.decodePayload=="function")try{var o=n.decodePayload(),i=o.origin_jti;return!!i}catch{}return!1},e.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},e.revokeToken=function(n){var o=n.token,i=n.callback;this.client.requestWithRetry("RevokeToken",{Token:o,ClientId:this.pool.getClientId()},function(s){if(s)return i(s);i()})},e.sendMFASelectionAnswer=function(n,o){var i=this,s={};s.USERNAME=this.username,s.ANSWER=n;var u={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(f,a){if(f)return o.onFailure(f);if(i.Session=a.Session,n==="SMS_MFA")return o.mfaRequired(a.ChallengeName,a.ChallengeParameters);if(n==="SOFTWARE_TOKEN_MFA")return o.totpRequired(a.ChallengeName,a.ChallengeParameters)})},e.getUserContextData=function(){var n=this.pool;return n.getUserContextData(this.username)},e.associateSoftwareToken=function(n){var o=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,s){return i?n.onFailure(i):n.associateSecretCode(s.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(i,s){return i?n.onFailure(i):(o.Session=s.Session,n.associateSecretCode(s.SecretCode))})},e.verifySoftwareToken=function(n,o,i){var s=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:n,FriendlyDeviceName:o},function(u,f){return u?i.onFailure(u):i.onSuccess(f)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:n,FriendlyDeviceName:o},function(u,f){if(u)return i.onFailure(u);s.Session=f.Session;var a={};a.USERNAME=s.username;var c={ChallengeName:"MFA_SETUP",ClientId:s.pool.getClientId(),ChallengeResponses:a,Session:s.Session};s.getUserContextData()&&(c.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",c,function(h,y){return h?i.onFailure(h):(s.signInUserSession=s.getCognitoUserSession(y.AuthenticationResult),s.cacheTokens(),i.onSuccess(s.signInUserSession))})})},r}();function wh(r,e){return e=e||{},new Promise(function(t,n){var o=new XMLHttpRequest,i=[],s=[],u={},f=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:f,headers:{keys:function(){return i},entries:function(){return s},get:function(c){return u[c.toLowerCase()]},has:function(c){return c.toLowerCase()in u}}}};for(var a in o.open(e.method||"get",r,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(c,h,y){i.push(h=h.toLowerCase()),s.push([h,y]),u[h]=u[h]?u[h]+","+y:y}),t(f())},o.onerror=n,o.withCredentials=e.credentials=="include",e.headers)o.setRequestHeader(a,e.headers[a]);o.send(e.body||null)})}const _h=Object.freeze(Object.defineProperty({__proto__:null,default:wh},Symbol.toStringTag,{value:"Module"})),xo=Un(_h);self.fetch||(self.fetch=xo.default||xo);function Ts(){}Ts.prototype.userAgent=gh();function bh(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,Kt(r,e)}function Tn(r){var e=typeof Map=="function"?new Map:void 0;return Tn=function(n){if(n===null||!Ah(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,o)}function o(){return rr(n,arguments,Pn(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Kt(o,n)},Tn(r)}function rr(r,e,t){return Sh()?rr=Reflect.construct.bind():rr=function(o,i,s){var u=[null];u.push.apply(u,i);var f=Function.bind.apply(o,u),a=new f;return s&&Kt(a,s.prototype),a},rr.apply(null,arguments)}function Sh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ah(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Kt(r,e){return Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Kt(r,e)}function Pn(r){return Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pn(r)}var Ih=function(r){bh(e,r);function e(t,n,o,i){var s;return s=r.call(this,t)||this,s.code=n,s.name=o,s.statusCode=i,s}return e}(Tn(Error)),Eh=function(){function r(t,n,o){this.endpoint=n||"https://cognito-idp."+t+".amazonaws.com/";var i=o||{},s=i.credentials;this.fetchOptions=s?{credentials:s}:{}}var e=r.prototype;return e.promisifyRequest=function(n,o){var i=this;return new Promise(function(s,u){i.request(n,o,function(f,a){f?u(new Ih(f.message,f.code,f.name,f.statusCode)):s(a)})})},e.requestWithRetry=function(n,o,i){var s=this,u=5*1e3;xh(function(f){return new Promise(function(a,c){s.request(n,f,function(h,y){h?c(h):a(y)})})},[o],u).then(function(f){return i(null,f)}).catch(function(f){return i(f)})},e.request=function(n,o,i){var s={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+n,"X-Amz-User-Agent":Ts.prototype.userAgent,"Cache-Control":"no-store"},u=Object.assign({},this.fetchOptions,{headers:s,method:"POST",mode:"cors",body:JSON.stringify(o)}),f;fetch(this.endpoint,u).then(function(a){return f=a,a},function(a){throw a instanceof TypeError?new Error("Network error"):a}).then(function(a){return a.json().catch(function(){return{}})}).then(function(a){if(f.ok)return i(null,a);var c=(a.__type||a.code).split("#").pop(),h=new Error(a.message||a.Message||null);return h.name=c,h.code=c,i(h)}).catch(function(a){if(f&&f.headers&&f.headers.get("x-amzn-errortype"))try{var c=f.headers.get("x-amzn-errortype").split(":")[0],h=new Error(f.status?f.status.toString():null);return h.code=c,h.name=c,h.statusCode=f.status,i(h)}catch{return i(a)}else a instanceof Error&&a.message==="Network error"&&(a.code="NetworkError");return i(a)})},r}(),er={debug:function(){}},Ch=function(e){var t="nonRetryable";return e&&e[t]};function Ps(r,e,t,n){if(n===void 0&&(n=1),typeof r!="function")throw Error("functionToRetry must be a function");return er.debug(r.name+" attempt #"+n+" with args: "+JSON.stringify(e)),r.apply(void 0,e).catch(function(o){if(er.debug("error on "+r.name,o),Ch(o))throw er.debug(r.name+" non retryable error",o),o;var i=t(n,e,o);if(er.debug(r.name+" retrying in "+i+" ms"),i!==!1)return new Promise(function(s){return setTimeout(s,i)}).then(function(){return Ps(r,e,t,n+1)});throw o})}function Th(r){var e=100,t=100;return function(n){var o=Math.pow(2,n)*e+t*Math.random();return o>r?!1:o}}var Ph=5*60*1e3;function xh(r,e,t){return t===void 0&&(t=Ph),Ps(r,e,Th(t))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Uh=55,Rh=function(){function r(t,n){var o=t||{},i=o.UserPoolId,s=o.ClientId,u=o.endpoint,f=o.fetchOptions,a=o.AdvancedSecurityDataCollectionFlag;if(!i||!s)throw new Error("Both UserPoolId and ClientId are required.");if(i.length>Uh||!/^[\w-]+_[0-9a-zA-Z]+$/.test(i))throw new Error("Invalid UserPoolId format.");var c=i.split("_")[0];this.userPoolId=i,this.clientId=s,this.client=new Eh(c,u,f),this.advancedSecurityDataCollectionFlag=a!==!1,this.storage=t.Storage||new Cs().getStorage(),n&&(this.wrapRefreshSessionCallback=n)}var e=r.prototype;return e.getUserPoolId=function(){return this.userPoolId},e.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},e.getClientId=function(){return this.clientId},e.signUp=function(n,o,i,s,u,f){var a=this,c={ClientId:this.clientId,Username:n,Password:o,UserAttributes:i,ValidationData:s,ClientMetadata:f};this.getUserContextData(n)&&(c.UserContextData=this.getUserContextData(n)),this.client.request("SignUp",c,function(h,y){if(h)return u(h,null);var _={Username:n,Pool:a,Storage:a.storage},b={user:new Cn(_),userConfirmed:y.UserConfirmed,userSub:y.UserSub,codeDeliveryDetails:y.CodeDeliveryDetails};return u(null,b)})},e.getCurrentUser=function(){var n="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",o=this.storage.getItem(n);if(o){var i={Username:o,Pool:this,Storage:this.storage};return new Cn(i)}return null},e.getUserContextData=function(n){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var o=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var i=o.getData(n,this.userPoolId,this.clientId);if(i){var s={EncodedData:i};return s}}return{}}},r}(),dt={},Oh={get exports(){return dt},set exports(r){dt=r}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(r,e){(function(t){var n;if(r.exports=t(),n=!0,!n){var o=window.Cookies,i=window.Cookies=t();i.noConflict=function(){return window.Cookies=o,i}}})(function(){function t(){for(var i=0,s={};i<arguments.length;i++){var u=arguments[i];for(var f in u)s[f]=u[f]}return s}function n(i){return i.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function o(i){function s(){}function u(a,c,h){if(!(typeof document>"u")){h=t({path:"/"},s.defaults,h),typeof h.expires=="number"&&(h.expires=new Date(new Date*1+h.expires*864e5)),h.expires=h.expires?h.expires.toUTCString():"";try{var y=JSON.stringify(c);/^[\{\[]/.test(y)&&(c=y)}catch{}c=i.write?i.write(c,a):encodeURIComponent(String(c)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),a=encodeURIComponent(String(a)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var _="";for(var b in h)h[b]&&(_+="; "+b,h[b]!==!0&&(_+="="+h[b].split(";")[0]));return document.cookie=a+"="+c+_}}function f(a,c){if(!(typeof document>"u")){for(var h={},y=document.cookie?document.cookie.split("; "):[],_=0;_<y.length;_++){var b=y[_].split("="),E=b.slice(1).join("=");!c&&E.charAt(0)==='"'&&(E=E.slice(1,-1));try{var C=n(b[0]);if(E=(i.read||i)(E,C)||n(E),c)try{E=JSON.parse(E)}catch{}if(h[C]=E,a===C)break}catch{}}return a?h[a]:h}}return s.set=u,s.get=function(a){return f(a,!1)},s.getJSON=function(a){return f(a,!0)},s.remove=function(a,c){u(a,"",t(c,{expires:-1}))},s.defaults={},s.withConverter=o,s}return o(function(){})})})(Oh);var Dh=function(){function r(t){if(t.domain)this.domain=t.domain;else throw new Error("The domain of cookieStorage can not be undefined.");if(t.path?this.path=t.path:this.path="/",Object.prototype.hasOwnProperty.call(t,"expires")?this.expires=t.expires:this.expires=365,Object.prototype.hasOwnProperty.call(t,"secure")?this.secure=t.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!["strict","lax","none"].includes(t.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(t.sameSite==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=t.sameSite}else this.sameSite=null}var e=r.prototype;return e.setItem=function(n,o){var i={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(i.sameSite=this.sameSite),dt.set(n,o,i),dt.get(n)},e.getItem=function(n){return dt.get(n)},e.removeItem=function(n){var o={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(o.sameSite=this.sameSite),dt.remove(n,o)},e.clear=function(){for(var n=dt.get(),o=Object.keys(n).length,i=0;i<o;++i)this.removeItem(Object.keys(n)[i]);return{}},r}(),Fh="_self",Mh=function(r){var e=window.open(r,Fh);return e?Promise.resolve(e):Promise.reject()},kh=function(r){window.sessionStorage.setItem("oauth_state",r)},Nh=function(){var r=window.sessionStorage.getItem("oauth_state");return window.sessionStorage.removeItem("oauth_state"),r},jh=function(r){window.sessionStorage.setItem("ouath_pkce_key",r)},Bh=function(){var r=window.sessionStorage.getItem("ouath_pkce_key");return window.sessionStorage.removeItem("ouath_pkce_key"),r},Lh=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",Wr=function(r,e,t){Ge.dispatch("auth",{event:r,data:e,message:t},"Auth",Lh)},bt=new Ze("OAuth"),Kh=function(){function r(e){var t=e.config,n=e.cognitoClientId,o=e.scopes,i=o===void 0?[]:o;if(this._urlOpener=t.urlOpener||Mh,this._config=t,this._cognitoClientId=n,!this.isValidScopes(i))throw Error("scopes must be a String Array");this._scopes=i}return r.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(t){return typeof t=="string"})},r.prototype.oauthSignIn=function(e,t,n,o,i,s){e===void 0&&(e="code"),i===void 0&&(i=hr.Cognito);var u=this._generateState(32),f=s?u+"-"+ya(s):u;kh(f);var a=this._generateRandom(128);jh(a);var c=this._generateChallenge(a),h="S256",y=this._scopes.join(" "),_=Object.entries(me(me({redirect_uri:n,response_type:e,client_id:o,identity_provider:i,scope:y,state:f},e==="code"?{code_challenge:c}:{}),e==="code"?{code_challenge_method:h}:{})).map(function(E){var C=Ve(E,2),O=C[0],T=C[1];return encodeURIComponent(O)+"="+encodeURIComponent(T)}).join("&"),b="https://"+t+"/oauth2/authorize?"+_;bt.debug("Redirecting to "+b),this._urlOpener(b,n)},r.prototype._handleCodeFlow=function(e){return te(this,void 0,void 0,function(){var t,n,o,i,s,u,f,a,c,h,y,_,b,E;return re(this,function(C){switch(C.label){case 0:return t=(tt(e).query||"").split("&").map(function(O){return O.split("=")}).reduce(function(O,T){var M,q=Ve(T,2),z=q[0],V=q[1];return me(me({},O),(M={},M[z]=V,M))},{code:void 0}).code,n=tt(e).pathname||"/",o=tt(this._config.redirectSignIn).pathname||"/",!t||n!==o?[2]:(i="https://"+this._config.domain+"/oauth2/token",Wr("codeFlow",{},"Retrieving tokens from "+i),s=vt(this._config)?this._cognitoClientId:this._config.clientID,u=vt(this._config)?this._config.redirectSignIn:this._config.redirectUri,f=Bh(),a=me({grant_type:"authorization_code",code:t,client_id:s,redirect_uri:u},f?{code_verifier:f}:{}),bt.debug("Calling token endpoint: "+i+" with",a),c=Object.entries(a).map(function(O){var T=Ve(O,2),M=T[0],q=T[1];return encodeURIComponent(M)+"="+encodeURIComponent(q)}).join("&"),[4,fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c})]);case 1:return[4,C.sent().json()];case 2:if(h=C.sent(),y=h.access_token,_=h.refresh_token,b=h.id_token,E=h.error,E)throw new Error(E);return[2,{accessToken:y,refreshToken:_,idToken:b}]}})})},r.prototype._handleImplicitFlow=function(e){return te(this,void 0,void 0,function(){var t,n,o;return re(this,function(i){return t=(tt(e).hash||"#").substr(1).split("&").map(function(s){return s.split("=")}).reduce(function(s,u){var f,a=Ve(u,2),c=a[0],h=a[1];return me(me({},s),(f={},f[c]=h,f))},{id_token:void 0,access_token:void 0}),n=t.id_token,o=t.access_token,Wr("implicitFlow",{},"Got tokens from "+e),bt.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:o,idToken:n,refreshToken:null}]})})},r.prototype.handleAuthResponse=function(e){return te(this,void 0,void 0,function(){var t,n,o,i,s,u,f;return re(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,,6]),t=e?me(me({},(tt(e).hash||"#").substr(1).split("&").map(function(c){return c.split("=")}).reduce(function(c,h){var y=Ve(h,2),_=y[0],b=y[1];return c[_]=b,c},{})),(tt(e).query||"").split("&").map(function(c){return c.split("=")}).reduce(function(c,h){var y=Ve(h,2),_=y[0],b=y[1];return c[_]=b,c},{})):{},n=t.error,o=t.error_description,n)throw new Error(o);return i=this._validateState(t),bt.debug("Starting "+this._config.responseType+" flow with "+e),this._config.responseType!=="code"?[3,2]:(s=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,me.apply(void 0,[me.apply(void 0,s.concat([a.sent()])),{state:i}])];case 2:return u=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,me.apply(void 0,[me.apply(void 0,u.concat([a.sent()])),{state:i}])];case 4:return[3,6];case 5:throw f=a.sent(),bt.error("Error handling auth response.",f),f;case 6:return[2]}})})},r.prototype._validateState=function(e){if(e){var t=Nh(),n=e.state;if(t&&t!==n)throw new Error("Invalid state in OAuth flow");return n}},r.prototype.signOut=function(){return te(this,void 0,void 0,function(){var e,t,n;return re(this,function(o){return e="https://"+this._config.domain+"/logout?",t=vt(this._config)?this._cognitoClientId:this._config.oauth.clientID,n=vt(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(n)}).map(function(i){var s=Ve(i,2),u=s[0],f=s[1];return u+"="+f}).join("&"),Wr("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),bt.debug("Signing out from "+e),[2,this._urlOpener(e,n)]})})},r.prototype._generateState=function(e){for(var t="",n=e,o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";n>0;--n)t+=o[Math.round(Math.random()*(o.length-1))];return t},r.prototype._generateChallenge=function(e){var t=new it.Sha256;t.update(e);var n=t.digestSync(),o=se.Buffer.from(n).toString("base64"),i=this._base64URL(o);return i},r.prototype._base64URL=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},r.prototype._generateRandom=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=new Uint8Array(e);if(typeof window<"u"&&window.crypto)window.crypto.getRandomValues(n);else for(var o=0;o<e;o+=1)n[o]=Math.random()*t.length|0;return this._bufferToString(n)},r.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],o=0;o<e.byteLength;o+=1){var i=e[o]%t.length;n.push(t[i])}return n.join("")},r}();const qh=Kh,Hh=function(r){if(Je().isBrowser&&window.location){var e=window.location.href;r({url:e})}else if(!Je().isNode)throw new Error("Not supported")};var ye;(function(r){r.DEFAULT_MSG="Authentication Error",r.EMPTY_EMAIL="Email cannot be empty",r.EMPTY_PHONE="Phone number cannot be empty",r.EMPTY_USERNAME="Username cannot be empty",r.INVALID_USERNAME="The username should either be a string or one of the sign in types",r.EMPTY_PASSWORD="Password cannot be empty",r.EMPTY_CODE="Confirmation code cannot be empty",r.SIGN_UP_ERROR="Error creating account",r.NO_MFA="No valid MFA method provided",r.INVALID_MFA="Invalid MFA type",r.EMPTY_CHALLENGE="Challenge response cannot be empty",r.NO_USER_SESSION="Failed to get the session because the user is empty",r.NETWORK_ERROR="Network Error",r.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",r.AUTOSIGNIN_ERROR="Please use your credentials to sign in"})(ye||(ye={}));var zh=new Ze("AuthError"),et=function(r){As(e,r);function e(t){var n=this,o=Gh[t],i=o.message,s=o.log;return n=r.call(this,i)||this,n.constructor=e,Object.setPrototypeOf(n,e.prototype),n.name="AuthError",n.log=s||i,zh.error(n.log),n}return e}(Error),Vh=function(r){As(e,r);function e(t){var n=r.call(this,t)||this;return n.constructor=e,Object.setPrototypeOf(n,e.prototype),n.name="NoUserPoolError",n}return e}(et),Gh={noConfig:{message:ye.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:ye.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:ye.EMPTY_USERNAME},invalidUsername:{message:ye.INVALID_USERNAME},emptyPassword:{message:ye.EMPTY_PASSWORD},emptyCode:{message:ye.EMPTY_CODE},signUpError:{message:ye.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:ye.NO_MFA},invalidMFA:{message:ye.INVALID_MFA},emptyChallengeResponse:{message:ye.EMPTY_CHALLENGE},noUserSession:{message:ye.NO_USER_SESSION},deviceConfig:{message:ye.DEVICE_CONFIG},networkError:{message:ye.NETWORK_ERROR},autoSignInError:{message:ye.AUTOSIGNIN_ERROR},default:{message:ye.DEFAULT_MSG}},B=new Ze("AuthClass"),Uo="aws.cognito.signin.user.admin",$h=10*1e3,Wh=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",Q=function(r,e,t){Ge.dispatch("auth",{event:r,data:e,message:t},"Auth",Wh)},Yh=60,Jh=3*60*1e3,Zh=function(){function r(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.autoSignInInitiated=!1,this.inflightSessionPromise=null,this.inflightSessionPromiseCounter=0,this.Credentials=bs,this.wrapRefreshSessionCallback=function(n){var o=function(i,s){return s?Q("tokenRefresh",void 0,"New token retrieved"):Q("tokenRefresh_failure",i,"Failed to retrieve new token"),n(i,s)};return o},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),Ge.listen("auth",function(n){var o=n.payload,i=o.event;switch(i){case"verify":case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true");break}})}return r.prototype.getModuleName=function(){return"Auth"},r.prototype.configure=function(e){var t=this;if(!e)return this._config||{};B.debug("configure Auth");var n=Object.assign({},this._config,No(e).Auth,e);this._config=n;var o=this._config,i=o.userPoolId,s=o.userPoolWebClientId,u=o.cookieStorage,f=o.oauth,a=o.region,c=o.identityPoolId,h=o.mandatorySignIn,y=o.refreshHandlers,_=o.identityPoolRegion,b=o.clientMetadata,E=o.endpoint;if(!this._config.storage)u?this._storage=new Dh(u):this._storage=e.ssr?new ud:new cs().getStorage();else{if(!this._isValidAuthStorage(this._config.storage))throw B.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}if(this._storageSync=Promise.resolve(),typeof this._storage.sync=="function"&&(this._storageSync=this._storage.sync()),i){var C={UserPoolId:i,ClientId:s,endpoint:E};C.Storage=this._storage,this.userPool=new Rh(C,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:h,region:a,userPoolId:i,identityPoolId:c,refreshHandlers:y,storage:this._storage,identityPoolRegion:_});var O=f?vt(this._config.oauth)?f:f.awsCognito:void 0;if(O){var T=Object.assign({cognitoClientId:s,UserPoolId:i,domain:O.domain,scopes:O.scope,redirectSignIn:O.redirectSignIn,redirectSignOut:O.redirectSignOut,responseType:O.responseType,Storage:this._storage,urlOpener:O.urlOpener,clientMetadata:b},O.options);this._oAuthHandler=new qh({scopes:T.scopes,config:T,cognitoClientId:T.cognitoClientId});var M={};Hh(function(z){var V=z.url;M[V]||(M[V]=!0,t._handleAuthResponse(V))})}if(Q("configured",null,"The Auth category has been configured successfully"),!this.autoSignInInitiated&&typeof this._storage.getItem=="function"){var q=this.isTrueStorageValue("amplify-polling-started");q&&(Q("autoSignIn_failure",null,ne.AutoSignInError),this._storage.removeItem("amplify-auto-sign-in")),this._storage.removeItem("amplify-polling-started")}return this._config},r.prototype.signUp=function(e){for(var t=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i,s,u;if(!this.userPool)return this.rejectNoUserPool();var f=null,a=null,c=[],h=null,y,_={enabled:!1},b={},E={};if(e&&typeof e=="string"){f=e,a=n?n[0]:null;var C=n?n[1]:null,O=n?n[2]:null;C&&c.push(new St({Name:"email",Value:C})),O&&c.push(new St({Name:"phone_number",Value:O}))}else if(e&&typeof e=="object"){f=e.username,a=e.password,e&&e.clientMetadata?y=e.clientMetadata:this._config.clientMetadata&&(y=this._config.clientMetadata);var T=e.attributes;T&&Object.keys(T).map(function(q){c.push(new St({Name:q,Value:T[q]}))});var M=e.validationData;M&&(h=[],Object.keys(M).map(function(q){h.push(new St({Name:q,Value:M[q]}))})),_=(i=e.autoSignIn)!==null&&i!==void 0?i:{enabled:!1},_.enabled&&(this._storage.setItem("amplify-auto-sign-in","true"),b=(s=_.validationData)!==null&&s!==void 0?s:{},E=(u=_.clientMetaData)!==null&&u!==void 0?u:{})}else return this.rejectAuthError(ne.SignUpError);return f?a?(B.debug("signUp attrs:",c),B.debug("signUp validation data:",h),new Promise(function(q,z){t.userPool.signUp(f,a,c,h,function(V,Y){V?(Q("signUp_failure",V,f+" failed to signup"),z(V)):(Q("signUp",Y,f+" has signed up successfully"),_.enabled&&t.handleAutoSignIn(f,a,b,E,Y),q(Y))},y)})):this.rejectAuthError(ne.EmptyPassword):this.rejectAuthError(ne.EmptyUsername)},r.prototype.handleAutoSignIn=function(e,t,n,o,i){this.autoSignInInitiated=!0;var s=new Ao({Username:e,Password:t,ValidationData:n,ClientMetadata:o});i.userConfirmed?this.signInAfterUserConfirmed(s):this._config.signUpVerificationMethod==="link"?this.handleLinkAutoSignIn(s):this.handleCodeAutoSignIn(s)},r.prototype.handleCodeAutoSignIn=function(e){var t=this,n=function(o){var i=o.payload;i.event==="confirmSignUp"&&t.signInAfterUserConfirmed(e,n)};Ge.listen("auth",n)},r.prototype.handleLinkAutoSignIn=function(e){var t=this;this._storage.setItem("amplify-polling-started","true");var n=Date.now(),o=setInterval(function(){Date.now()-n>Jh?(clearInterval(o),Q("autoSignIn_failure",null,"Please confirm your account and use your credentials to sign in."),t._storage.removeItem("amplify-auto-sign-in")):t.signInAfterUserConfirmed(e,null,o)},5e3)},r.prototype.signInAfterUserConfirmed=function(e,t,n){return te(this,void 0,void 0,function(){var o,i,s=this;return re(this,function(u){switch(u.label){case 0:o=this.createCognitoUser(e.getUsername()),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.authenticateUser(e,this.authCallbacks(o,function(f){Q("autoSignIn",f,e.getUsername()+" has signed in successfully"),t&&Ge.remove("auth",t),n&&(clearInterval(n),s._storage.removeItem("amplify-polling-started")),s._storage.removeItem("amplify-auto-sign-in")},function(f){B.error(f),s._storage.removeItem("amplify-auto-sign-in")}))];case 2:return u.sent(),[3,4];case 3:return i=u.sent(),B.error(i),[3,4];case 4:return[2]}})})},r.prototype.confirmSignUp=function(e,t,n){var o=this;if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(ne.EmptyUsername);if(!t)return this.rejectAuthError(ne.EmptyCode);var i=this.createCognitoUser(e),s=n&&typeof n.forceAliasCreation=="boolean"?n.forceAliasCreation:!0,u;return n&&n.clientMetadata?u=n.clientMetadata:this._config.clientMetadata&&(u=this._config.clientMetadata),new Promise(function(f,a){i.confirmRegistration(t,s,function(c,h){if(c)a(c);else{Q("confirmSignUp",h,e+" has been confirmed successfully");var y=o.isTrueStorageValue("amplify-auto-sign-in");y&&!o.autoSignInInitiated&&(Q("autoSignIn_failure",null,ne.AutoSignInError),o._storage.removeItem("amplify-auto-sign-in")),f(h)}},u)})},r.prototype.isTrueStorageValue=function(e){var t=this._storage.getItem(e);return t?t==="true":!1},r.prototype.resendSignUp=function(e,t){if(t===void 0&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(ne.EmptyUsername);var n=this.createCognitoUser(e);return new Promise(function(o,i){n.resendConfirmationCode(function(s,u){s?i(s):o(u)},t)})},r.prototype.signIn=function(e,t,n){if(n===void 0&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var o=null,i=null,s={};if(typeof e=="string")o=e,i=t;else if(ld(e))typeof t<"u"&&B.warn("The password should be defined under the first parameter object!"),o=e.username,i=e.password,s=e.validationData;else return this.rejectAuthError(ne.InvalidUsername);if(!o)return this.rejectAuthError(ne.EmptyUsername);var u=new Ao({Username:o,Password:i,ValidationData:s,ClientMetadata:n});return i?this.signInWithPassword(u):this.signInWithoutPassword(u)},r.prototype.authCallbacks=function(e,t,n){var o=this,i=this;return{onSuccess:function(s){return te(o,void 0,void 0,function(){var u,f,a,c;return re(this,function(h){switch(h.label){case 0:B.debug(s),delete e.challengeName,delete e.challengeParam,h.label=1;case 1:return h.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return h.sent(),[4,this.Credentials.set(s,"session")];case 3:return u=h.sent(),B.debug("succeed to get cognito credentials",u),[3,9];case 4:return f=h.sent(),B.debug("cannot get cognito credentials",f),[3,9];case 5:return h.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=h.sent(),i.user=a,Q("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return c=h.sent(),B.error("Failed to get the signed in user",c),n(c),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(s){B.debug("signIn failure",s),Q("signIn_failure",s,e.getUsername()+" failed to signin"),n(s)},customChallenge:function(s){B.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=s,t(e)},mfaRequired:function(s,u){B.debug("signIn MFA required"),e.challengeName=s,e.challengeParam=u,t(e)},mfaSetup:function(s,u){B.debug("signIn mfa setup",s),e.challengeName=s,e.challengeParam=u,t(e)},newPasswordRequired:function(s,u){B.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:s,requiredAttributes:u},t(e)},totpRequired:function(s,u){B.debug("signIn totpRequired"),e.challengeName=s,e.challengeParam=u,t(e)},selectMFAType:function(s,u){B.debug("signIn selectMFAType",s),e.challengeName=s,e.challengeParam=u,t(e)}}},r.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var n=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(o,i){n.authenticateUser(e,t.authCallbacks(n,function(s){t.pendingSignIn=null,o(s)},function(s){t.pendingSignIn=null,i(s)}))}),this.pendingSignIn},r.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(o,i){n.initiateAuth(e,t.authCallbacks(n,o,i))})},r.prototype.getMFAOptions=function(e){return new Promise(function(t,n){e.getMFAOptions(function(o,i){if(o){B.debug("get MFA Options failed",o),n(o);return}B.debug("get MFA options success",i),t(i)})})},r.prototype.getPreferredMFA=function(e,t){var n=this,o=this;return new Promise(function(i,s){var u=n._config.clientMetadata,f=t?t.bypassCache:!1;e.getUserData(function(a,c){return te(n,void 0,void 0,function(){var h,y;return re(this,function(_){switch(_.label){case 0:if(!a)return[3,5];if(B.debug("getting preferred mfa failed",a),!this.isSessionInvalid(a))return[3,4];_.label=1;case 1:return _.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return _.sent(),[3,4];case 3:return h=_.sent(),s(new Error("Session is invalid due to: "+a.message+" and failed to clean up invalid session: "+h.message)),[2];case 4:return s(a),[2];case 5:return y=o._getMfaTypeFromUserData(c),y?(i(y),[2]):(s("invalid MFA Type"),[2])}})})},{bypassCache:f,clientMetadata:u})})},r.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var o=e.UserMFASettingList;if(o)o.length===0?t="NOMFA":B.debug("invalid case for getPreferredMFA",e);else{var i=e.MFAOptions;i?t="SMS_MFA":t="NOMFA"}}return t},r.prototype._getUserData=function(e,t){var n=this;return new Promise(function(o,i){e.getUserData(function(s,u){return te(n,void 0,void 0,function(){var f;return re(this,function(a){switch(a.label){case 0:if(!s)return[3,5];if(B.debug("getting user data failed",s),!this.isSessionInvalid(s))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return a.sent(),[3,4];case 3:return f=a.sent(),i(new Error("Session is invalid due to: "+s.message+" and failed to clean up invalid session: "+f.message)),[2];case 4:return i(s),[2];case 5:o(u),a.label=6;case 6:return[2]}})})},t)})},r.prototype.setPreferredMFA=function(e,t){return te(this,void 0,void 0,function(){var n,o,i,s,u,f,a,c=this;return re(this,function(h){switch(h.label){case 0:return n=this._config.clientMetadata,[4,this._getUserData(e,{bypassCache:!0,clientMetadata:n})];case 1:switch(o=h.sent(),i=null,s=null,u=t,u){case"TOTP":return[3,2];case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":return[3,3];case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return f=o.UserMFASettingList,[4,this._getMfaTypeFromUserData(o)];case 5:if(a=h.sent(),a==="NOMFA")return[2,Promise.resolve("No change for mfa type")];if(a==="SMS_MFA")i={PreferredMfa:!1,Enabled:!1};else if(a==="SOFTWARE_TOKEN_MFA")s={PreferredMfa:!1,Enabled:!1};else return[2,this.rejectAuthError(ne.InvalidMFA)];return f&&f.length!==0&&f.forEach(function(y){y==="SMS_MFA"?i={PreferredMfa:!1,Enabled:!1}:y==="SOFTWARE_TOKEN_MFA"&&(s={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return B.debug("no validmfa method provided"),[2,this.rejectAuthError(ne.NoMFA)];case 7:return[2,new Promise(function(y,_){e.setUserMfaPreference(i,s,function(b,E){if(b)return B.debug("Set user mfa preference error",b),_(b);B.debug("Set user mfa success",E),B.debug("Caching the latest user data into local"),e.getUserData(function(C,O){return te(c,void 0,void 0,function(){var T;return re(this,function(M){switch(M.label){case 0:if(!C)return[3,5];if(B.debug("getting user data failed",C),!this.isSessionInvalid(C))return[3,4];M.label=1;case 1:return M.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return M.sent(),[3,4];case 3:return T=M.sent(),_(new Error("Session is invalid due to: "+C.message+" and failed to clean up invalid session: "+T.message)),[2];case 4:return[2,_(C)];case 5:return[2,y(E)]}})})},{bypassCache:!0,clientMetadata:n})})})]}})})},r.prototype.disableSMS=function(e){return new Promise(function(t,n){e.disableMFA(function(o,i){if(o){B.debug("disable mfa failed",o),n(o);return}B.debug("disable mfa succeed",i),t(i)})})},r.prototype.enableSMS=function(e){return new Promise(function(t,n){e.enableMFA(function(o,i){if(o){B.debug("enable mfa failed",o),n(o);return}B.debug("enable mfa succeed",i),t(i)})})},r.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(o){B.debug("associateSoftwareToken failed",o),n(o)},associateSecretCode:function(o){B.debug("associateSoftwareToken sucess",o),t(o)}})})},r.prototype.verifyTotpToken=function(e,t){return B.debug("verification totp token",e,t),new Promise(function(n,o){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(i){B.debug("verifyTotpToken failed",i),o(i)},onSuccess:function(i){Q("signIn",e,"A user "+e.getUsername()+" has been signed in"),Q("verify",e,"A user "+e.getUsername()+" has been verified"),B.debug("verifyTotpToken success",i),n(i)}})})},r.prototype.confirmSignIn=function(e,t,n,o){var i=this;if(o===void 0&&(o=this._config.clientMetadata),!t)return this.rejectAuthError(ne.EmptyCode);var s=this;return new Promise(function(u,f){e.sendMFACode(t,{onSuccess:function(a){return te(i,void 0,void 0,function(){var c,h;return re(this,function(y){switch(y.label){case 0:B.debug(a),y.label=1;case 1:return y.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return y.sent(),[4,this.Credentials.set(a,"session")];case 3:return c=y.sent(),B.debug("succeed to get cognito credentials",c),[3,6];case 4:return h=y.sent(),B.debug("cannot get cognito credentials",h),[3,6];case 5:return s.user=e,Q("signIn",e,"A user "+e.getUsername()+" has been signed in"),u(e),[7];case 6:return[2]}})})},onFailure:function(a){B.debug("confirm signIn failure",a),f(a)}},n,o)})},r.prototype.completeNewPassword=function(e,t,n,o){var i=this;if(n===void 0&&(n={}),o===void 0&&(o=this._config.clientMetadata),!t)return this.rejectAuthError(ne.EmptyPassword);var s=this;return new Promise(function(u,f){e.completeNewPasswordChallenge(t,n,{onSuccess:function(a){return te(i,void 0,void 0,function(){var c,h;return re(this,function(y){switch(y.label){case 0:B.debug(a),y.label=1;case 1:return y.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return y.sent(),[4,this.Credentials.set(a,"session")];case 3:return c=y.sent(),B.debug("succeed to get cognito credentials",c),[3,6];case 4:return h=y.sent(),B.debug("cannot get cognito credentials",h),[3,6];case 5:return s.user=e,Q("signIn",e,"A user "+e.getUsername()+" has been signed in"),u(e),[7];case 6:return[2]}})})},onFailure:function(a){B.debug("completeNewPassword failure",a),Q("completeNewPassword_failure",a,i.user+" failed to complete the new password flow"),f(a)},mfaRequired:function(a,c){B.debug("signIn MFA required"),e.challengeName=a,e.challengeParam=c,u(e)},mfaSetup:function(a,c){B.debug("signIn mfa setup",a),e.challengeName=a,e.challengeParam=c,u(e)},totpRequired:function(a,c){B.debug("signIn mfa setup",a),e.challengeName=a,e.challengeParam=c,u(e)}},o)})},r.prototype.sendCustomChallengeAnswer=function(e,t,n){var o=this;return n===void 0&&(n=this._config.clientMetadata),this.userPool?t?new Promise(function(i,s){e.sendCustomChallengeAnswer(t,o.authCallbacks(e,i,s),n)}):this.rejectAuthError(ne.EmptyChallengeResponse):this.rejectNoUserPool()},r.prototype.deleteUserAttributes=function(e,t){var n=this;return new Promise(function(o,i){n.userSession(e).then(function(s){e.deleteAttributes(t,function(u,f){return u?i(u):o(f)})})})},r.prototype.deleteUser=function(){return te(this,void 0,void 0,function(){var e,t,n=this;return re(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw e=o.sent(),B.debug("Failed to sync cache info into memory",e),new Error(e);case 3:return t=this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true",[2,new Promise(function(i,s){return te(n,void 0,void 0,function(){var u,f=this;return re(this,function(a){if(this.userPool)if(u=this.userPool.getCurrentUser(),u)u.getSession(function(c,h){return te(f,void 0,void 0,function(){var y,_=this;return re(this,function(b){switch(b.label){case 0:if(!c)return[3,5];if(B.debug("Failed to get the user session",c),!this.isSessionInvalid(c))return[3,4];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(u)];case 2:return b.sent(),[3,4];case 3:return y=b.sent(),s(new Error("Session is invalid due to: "+c.message+" and failed to clean up invalid session: "+y.message)),[2];case 4:return[2,s(c)];case 5:u.deleteUser(function(E,C){if(E)s(E);else{Q("userDeleted",C,"The authenticated user has been deleted."),u.signOut(),_.user=null;try{_.cleanCachedItems()}catch{B.debug("failed to clear cached items")}t?_.oAuthSignOutRedirect(i,s):(Q("signOut",_.user,"A user has been signed out"),i(C))}}),b.label=6;case 6:return[2]}})})});else return B.debug("Failed to get user from user pool"),[2,s(new Error("No current user."))];else B.debug("no Congito User pool"),s(new Error("Cognito User pool does not exist"));return[2]})})})]}})})},r.prototype.updateUserAttributes=function(e,t,n){var o=this;n===void 0&&(n=this._config.clientMetadata);var i=[],s=this;return new Promise(function(u,f){s.userSession(e).then(function(a){for(var c in t)if(c!=="sub"&&c.indexOf("_verified")<0){var h={Name:c,Value:t[c]};i.push(h)}e.updateAttributes(i,function(y,_,b){if(y)return Q("updateUserAttributes_failure",y,"Failed to update attributes"),f(y);var E=o.createUpdateAttributesResultList(t,b==null?void 0:b.CodeDeliveryDetailsList);return Q("updateUserAttributes",E,"Attributes successfully updated"),u(_)},n)})})},r.prototype.createUpdateAttributesResultList=function(e,t){var n={};return Object.keys(e).forEach(function(o){n[o]={isUpdated:!0};var i=t==null?void 0:t.find(function(s){return s.AttributeName===o});i&&(n[o].isUpdated=!1,n[o].codeDeliveryDetails=i)}),n},r.prototype.userAttributes=function(e){var t=this;return new Promise(function(n,o){t.userSession(e).then(function(i){e.getUserAttributes(function(s,u){s?o(s):n(u)})})})},r.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then(function(n){var o=t.attributesToObject(n),i={},s={};return o.email&&(o.email_verified?s.email=o.email:i.email=o.email),o.phone_number&&(o.phone_number_verified?s.phone_number=o.phone_number:i.phone_number=o.phone_number),{verified:s,unverified:i}})},r.prototype.isErrorWithMessage=function(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"message")},r.prototype.isTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&e.message==="Access Token has been revoked"},r.prototype.isRefreshTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&e.message==="Refresh Token has been revoked"},r.prototype.isUserDisabledError=function(e){return this.isErrorWithMessage(e)&&e.message==="User is disabled."},r.prototype.isUserDoesNotExistError=function(e){return this.isErrorWithMessage(e)&&e.message==="User does not exist."},r.prototype.isRefreshTokenExpiredError=function(e){return this.isErrorWithMessage(e)&&e.message==="Refresh Token has expired"},r.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true"},r.prototype.isSessionInvalid=function(e){return this.isUserDisabledError(e)||this.isUserDoesNotExistError(e)||this.isTokenRevokedError(e)||this.isRefreshTokenRevokedError(e)||this.isRefreshTokenExpiredError(e)},r.prototype.cleanUpInvalidSession=function(e){return te(this,void 0,void 0,function(){var t=this;return re(this,function(n){switch(n.label){case 0:e.signOut(),this.user=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return n.sent(),[3,4];case 3:return n.sent(),B.debug("failed to clear cached items"),[3,4];case 4:return this.isSignedInHostedUI()?[2,new Promise(function(o,i){t.oAuthSignOutRedirect(o,i)})]:(Q("signOut",this.user,"A user has been signed out"),[2])}})})},r.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise(function(n,o){t._storageSync.then(function(){return te(t,void 0,void 0,function(){var i,s,u,f,a,c,h,y=this;return re(this,function(_){switch(_.label){case 0:return this.isOAuthInProgress()?(B.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(b){var E=setTimeout(function(){B.debug("OAuth signIn in progress timeout"),Ge.remove("auth",C),b()},$h);Ge.listen("auth",C);function C(O){var T=O.payload,M=T.event;(M==="cognitoHostedUI"||M==="cognitoHostedUI_failure")&&(B.debug("OAuth signIn resolved: "+M),clearTimeout(E),Ge.remove("auth",C),b())}})]):[3,2];case 1:_.sent(),_.label=2;case 2:if(i=this.userPool.getCurrentUser(),!i)return B.debug("Failed to get user from user pool"),o("No current user"),[2];_.label=3;case 3:return _.trys.push([3,7,,8]),[4,this._userSession(i)];case 4:return s=_.sent(),u=e?e.bypassCache:!1,u?[4,this.Credentials.clear()]:[3,6];case 5:_.sent(),_.label=6;case 6:if(f=this._config.clientMetadata,a=s.getAccessToken().decodePayload().scope,c=a===void 0?"":a,c.split(" ").includes(Uo))i.getUserData(function(b,E){return te(y,void 0,void 0,function(){var C,O,T,M,q,z,V;return re(this,function(Y){switch(Y.label){case 0:if(!b)return[3,7];if(B.debug("getting user data failed",b),!this.isSessionInvalid(b))return[3,5];Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(i)];case 2:return Y.sent(),[3,4];case 3:return C=Y.sent(),o(new Error("Session is invalid due to: "+b.message+" and failed to clean up invalid session: "+C.message)),[2];case 4:return o(b),[3,6];case 5:n(i),Y.label=6;case 6:return[2];case 7:for(O=E.PreferredMfaSetting||"NOMFA",T=[],M=0;M<E.UserAttributes.length;M++)q={Name:E.UserAttributes[M].Name,Value:E.UserAttributes[M].Value},z=new St(q),T.push(z);return V=this.attributesToObject(T),Object.assign(i,{attributes:V,preferredMFA:O}),[2,n(i)]}})})},{bypassCache:u,clientMetadata:f});else return B.debug("Unable to get the user data because the "+Uo+" is not in the scopes of the access token"),[2,n(i)];return[3,8];case 7:return h=_.sent(),o(h),[3,8];case 8:return[2]}})})}).catch(function(i){return B.debug("Failed to sync cache info into memory",i),o(i)})}):this.rejectNoUserPool()},r.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},r.prototype.currentAuthenticatedUser=function(e){return te(this,void 0,void 0,function(){var t,n,o,i,s;return re(this,function(u){switch(u.label){case 0:B.debug("getting current authenticated user"),t=null,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._storageSync];case 2:return u.sent(),[3,4];case 3:throw n=u.sent(),B.debug("Failed to sync cache info into memory",n),n;case 4:try{o=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")),o&&(t=me(me({},o.user),{token:o.token}))}catch{B.debug("cannot load federated user from auth storage")}return t?(this.user=t,B.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:B.debug("get current authenticated userpool user"),i=null,u.label=6;case 6:return u.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return i=u.sent(),[3,9];case 8:return s=u.sent(),s==="No userPool"&&B.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),B.debug("The user is not authenticated by the error",s),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=i,[2,this.user]}})})},r.prototype.currentSession=function(){var e=this;return B.debug("Getting current session"),this.userPool?new Promise(function(t,n){e.currentUserPoolUser().then(function(o){e.userSession(o).then(function(i){t(i)}).catch(function(i){B.debug("Failed to get the current session",i),n(i)})}).catch(function(o){B.debug("Failed to get the current user",o),n(o)})}):Promise.reject(new Error("No User Pool in the configuration."))},r.prototype._userSession=function(e){return te(this,void 0,void 0,function(){var t,n,o=this;return re(this,function(i){switch(i.label){case 0:if(!e)return B.debug("the user is null"),[2,this.rejectAuthError(ne.NoUserSession)];t=this._config.clientMetadata,this.inflightSessionPromiseCounter===0&&(this.inflightSessionPromise=new Promise(function(s,u){e.getSession(function(f,a){return te(o,void 0,void 0,function(){var c;return re(this,function(h){switch(h.label){case 0:if(!f)return[3,5];if(B.debug("Failed to get the session from user",e),!this.isSessionInvalid(f))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return h.sent(),[3,4];case 3:return c=h.sent(),u(new Error("Session is invalid due to: "+f.message+" and failed to clean up invalid session: "+c.message)),[2];case 4:return u(f),[2];case 5:return B.debug("Succeed to get the user session",a),s(a),[2]}})})},{clientMetadata:t})})),this.inflightSessionPromiseCounter++,i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.inflightSessionPromise];case 2:return n=i.sent(),e.signInUserSession=n,[2,n];case 3:return this.inflightSessionPromiseCounter--,[7];case 4:return[2]}})})},r.prototype.userSession=function(e){return this._userSession(e)},r.prototype.currentUserCredentials=function(){return te(this,void 0,void 0,function(){var e,t,n=this;return re(this,function(o){switch(o.label){case 0:B.debug("Getting current user credentials"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._storageSync];case 2:return o.sent(),[3,4];case 3:throw e=o.sent(),B.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(i){B.debug("failed to get or parse item aws-amplify-federatedInfo",i)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(i){return B.debug("getting session success",i),n.Credentials.set(i,"session")}).catch(function(){return B.debug("getting guest credentials"),n.Credentials.set(null,"guest")})]}})})},r.prototype.currentCredentials=function(){return B.debug("getting current credentials"),this.Credentials.get()},r.prototype.verifyUserAttribute=function(e,t,n){return n===void 0&&(n=this._config.clientMetadata),new Promise(function(o,i){e.getAttributeVerificationCode(t,{onSuccess:function(s){return o(s)},onFailure:function(s){return i(s)}},n)})},r.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise(function(o,i){e.verifyAttribute(t,n,{onSuccess:function(s){o(s)},onFailure:function(s){i(s)}})}):this.rejectAuthError(ne.EmptyCode)},r.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then(function(n){return t.verifyUserAttribute(n,e)})},r.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then(function(o){return n.verifyUserAttributeSubmit(o,e,t)})},r.prototype.cognitoIdentitySignOut=function(e,t){return te(this,void 0,void 0,function(){var n,o,i=this;return re(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this._storageSync];case 1:return s.sent(),[3,3];case 2:throw n=s.sent(),B.debug("Failed to sync cache info into memory",n),n;case 3:return o=this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true",[2,new Promise(function(u,f){if(e&&e.global){B.debug("user global sign out",t);var a=i._config.clientMetadata;t.getSession(function(c,h){return te(i,void 0,void 0,function(){var y,_=this;return re(this,function(b){switch(b.label){case 0:if(!c)return[3,5];if(B.debug("failed to get the user session",c),!this.isSessionInvalid(c))return[3,4];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return b.sent(),[3,4];case 3:return y=b.sent(),f(new Error("Session is invalid due to: "+c.message+" and failed to clean up invalid session: "+y.message)),[2];case 4:return[2,f(c)];case 5:return t.globalSignOut({onSuccess:function(E){if(B.debug("global sign out success"),o)_.oAuthSignOutRedirect(u,f);else return u()},onFailure:function(E){return B.debug("global sign out failed",E),f(E)}}),[2]}})})},{clientMetadata:a})}else B.debug("user sign out",t),t.signOut(function(){if(o)i.oAuthSignOutRedirect(u,f);else return u()})})]}})})},r.prototype.oAuthSignOutRedirect=function(e,t){var n=Je().isBrowser;n?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},r.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},r.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e(Error("Signout timeout fail"))},3e3)},r.prototype.signOut=function(e){return te(this,void 0,void 0,function(){var t;return re(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),B.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser(),t?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]):[3,7];case 4:return n.sent(),[3,6];case 5:B.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:B.debug("no Cognito User pool"),n.label=8;case 8:return Q("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},r.prototype.cleanCachedItems=function(){return te(this,void 0,void 0,function(){return re(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},r.prototype.changePassword=function(e,t,n,o){var i=this;return o===void 0&&(o=this._config.clientMetadata),new Promise(function(s,u){i.userSession(e).then(function(f){e.changePassword(t,n,function(a,c){return a?(B.debug("change password failure",a),u(a)):s(c)},o)})})},r.prototype.forgotPassword=function(e,t){if(t===void 0&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(ne.EmptyUsername);var n=this.createCognitoUser(e);return new Promise(function(o,i){n.forgotPassword({onSuccess:function(){o()},onFailure:function(s){B.debug("forgot password failure",s),Q("forgotPassword_failure",s,e+" forgotPassword failed"),i(s)},inputVerificationCode:function(s){Q("forgotPassword",n,e+" has initiated forgot password flow"),o(s)}},t)})},r.prototype.forgotPasswordSubmit=function(e,t,n,o){if(o===void 0&&(o=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(ne.EmptyUsername);if(!t)return this.rejectAuthError(ne.EmptyCode);if(!n)return this.rejectAuthError(ne.EmptyPassword);var i=this.createCognitoUser(e);return new Promise(function(s,u){i.confirmPassword(t,n,{onSuccess:function(f){Q("forgotPasswordSubmit",i,e+" forgotPasswordSubmit successful"),s(f)},onFailure:function(f){Q("forgotPasswordSubmit_failure",f,e+" forgotPasswordSubmit failed"),u(f)}},o)})},r.prototype.currentUserInfo=function(){return te(this,void 0,void 0,function(){var e,f,t,n,o,i,s,u,f;return re(this,function(a){switch(a.label){case 0:return e=this.Credentials.getCredSource(),!e||e==="aws"||e==="userPool"?[4,this.currentUserPoolUser().catch(function(c){return B.error(c)})]:[3,9];case 1:if(f=a.sent(),!f)return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(f)];case 3:t=a.sent(),n=this.attributesToObject(t),o=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return o=a.sent(),[3,7];case 6:return i=a.sent(),B.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return s={id:o?o.identityId:void 0,username:f.getUsername(),attributes:n},[2,s];case 8:return u=a.sent(),B.error("currentUserInfo error",u),[2,{}];case 9:return e==="federated"?(f=this.user,[2,f||{}]):[2]}})})},r.prototype.federatedSignIn=function(e,t,n){return te(this,void 0,void 0,function(){var o,f,i,s,u,f,a,c,h,y,_,b;return re(this,function(E){switch(E.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(typeof e>"u"&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Vr(e)||cd(e)||fd(e)||typeof e>"u"?(o=e||{provider:hr.Cognito},f=Vr(o)?o.provider:o.customProvider,i=(Vr(o),o.customState),this._config.userPoolId&&(s=vt(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,u=vt(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,u,s,f,i)),[3,4]):[3,1];case 1:f=e;try{a=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user),a&&B.warn("There is already a signed in user: "+a+` in your app.
																	You should not call Auth.federatedSignIn method again as it may cause unexpected behavior.`)}catch{}return c=t.token,h=t.identity_id,y=t.expires_at,[4,this.Credentials.set({provider:f,token:c,identity_id:h,user:n,expires_at:y},"federation")];case 2:return _=E.sent(),[4,this.currentAuthenticatedUser()];case 3:return b=E.sent(),Q("signIn",b,"A user "+b.username+" has been signed in"),B.debug("federated sign in credentials",_),[2,_];case 4:return[2]}})})},r.prototype._handleAuthResponse=function(e){return te(this,void 0,void 0,function(){var t,n,o,i,s,u,f,a,c,h,y,_,b,E;return re(this,function(C){switch(C.label){case 0:if(this.oAuthFlowInProgress)return B.debug("Skipping URL "+e+" current flow in progress"),[2];C.label=1;case 1:if(C.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Q("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(Je().isBrowser?window.location.href:""),n=!!(tt(t).query||"").split("&").map(function(O){return O.split("=")}).find(function(O){var T=Ve(O,1),M=T[0];return M==="code"||M==="error"}),o=!!(tt(t).hash||"#").substr(1).split("&").map(function(O){return O.split("=")}).find(function(O){var T=Ve(O,1),M=T[0];return M==="access_token"||M==="error"}),!(n||o))return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),C.label=2;case 2:return C.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=C.sent(),s=i.accessToken,u=i.idToken,f=i.refreshToken,a=i.state,c=new En({IdToken:new Sn({IdToken:u}),RefreshToken:new An({RefreshToken:f}),AccessToken:new _n({AccessToken:s})}),h=void 0,this._config.identityPoolId?[4,this.Credentials.set(c,"session")]:[3,5];case 4:h=C.sent(),B.debug("AWS credentials",h),C.label=5;case 5:return y=/-/.test(a),_=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"]),_.setSignInUserSession(c),window&&typeof window.history<"u"&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Q("signIn",_,"A user "+_.getUsername()+" has been signed in"),Q("cognitoHostedUI",_,"A user "+_.getUsername()+" has been signed in via Cognito Hosted UI"),y&&(b=a.split("-").splice(1).join("-"),Q("customOAuthState",ma(b),"State for user "+_.getUsername())),[2,h];case 6:return E=C.sent(),B.debug("Error in cognito hosted auth response",E),window&&typeof window.history<"u"&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Q("signIn_failure",E,"The OAuth response flow failed"),Q("cognitoHostedUI_failure",E,"A failure occurred when returning to the Cognito Hosted UI"),Q("customState_failure",E,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},r.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},r.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map(function(o){o.Name==="email_verified"||o.Name==="phone_number_verified"?n[o.Name]=t.isTruthyString(o.Value)||o.Value===!0:n[o.Name]=o.Value}),n},r.prototype.isTruthyString=function(e){return typeof e.toLowerCase=="function"&&e.toLowerCase()==="true"},r.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,o=new Cn(t);return n&&o.setAuthenticationFlowType(n),o},r.prototype._isValidAuthStorage=function(e){return!!e&&typeof e.getItem=="function"&&typeof e.setItem=="function"&&typeof e.removeItem=="function"&&typeof e.clear=="function"},r.prototype.noUserPoolErrorHandler=function(e){return e&&(!e.userPoolId||!e.identityPoolId)?ne.MissingAuthConfig:ne.NoConfig},r.prototype.rejectAuthError=function(e){return Promise.reject(new et(e))},r.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Vh(e))},r.prototype.rememberDevice=function(){return te(this,void 0,void 0,function(){var e,t;return re(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),B.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(o,i){e.setDeviceStatusRemembered({onSuccess:function(s){o(s)},onFailure:function(s){s.code==="InvalidParameterException"?i(new et(ne.DeviceConfig)):s.code==="NetworkError"?i(new et(ne.NetworkError)):i(s)}})})]}})})},r.prototype.forgetDevice=function(){return te(this,void 0,void 0,function(){var e,t;return re(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),B.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(o,i){e.forgetDevice({onSuccess:function(s){o(s)},onFailure:function(s){s.code==="InvalidParameterException"?i(new et(ne.DeviceConfig)):s.code==="NetworkError"?i(new et(ne.NetworkError)):i(s)}})})]}})})},r.prototype.fetchDevices=function(){return te(this,void 0,void 0,function(){var e,t;return re(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:throw t=n.sent(),B.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(o,i){var s={onSuccess:function(u){var f=u.Devices.map(function(a){var c=a.DeviceAttributes.find(function(y){var _=y.Name;return _==="device_name"})||{},h={id:a.DeviceKey,name:c.Value};return h});o(f)},onFailure:function(u){u.code==="InvalidParameterException"?i(new et(ne.DeviceConfig)):u.code==="NetworkError"?i(new et(ne.NetworkError)):i(u)}};e.listDevices(Yh,null,s)})]}})})},r}(),Xh=new Zh(null);xn.register(Xh);export{Xh as A};
